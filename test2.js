/**
 *  ███████╗██╗   ██╗██████╗       ███████╗████████╗ ██████╗ ██████╗ ███████╗
 *  ██╔════╝██║   ██║██╔══██╗      ██╔════╝╚══██╔══╝██╔═══██╗██╔══██╗██╔════╝
 *  ███████╗██║   ██║██████╔╝█████╗███████╗   ██║   ██║   ██║██████╔╝█████╗
 *  ╚════██║██║   ██║██╔══██╗╚════╝╚════██║   ██║   ██║   ██║██╔══██╗██╔══╝
 *  ███████║╚██████╔╝██████╔╝      ███████║   ██║   ╚██████╔╝██║  ██║███████╗
 *  ╚══════╝ ╚═════╝ ╚═════╝       ╚══════╝   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝
 * Advanced Subscription Manager for QX, Loon, Surge, Stash and ShadowRocket!
 * @updated: 2024/4/30 07:41:16
 * @version: 2.14.303
 * @author: Peng-YM
 * @github: https://github.com/sub-store-org/Sub-Store
 * @documentation: https://www.notion.so/Sub-Store-6259586994d34c11a4ced5c406264b46
 */
* testjjdddjdjjssjjsj12334

!function(){var createModuleFactory=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},_$sync_106=createModuleFactory((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){r.default.read(_$constants_67.ARTIFACTS_KEY)||r.default.write({},_$constants_67.ARTIFACTS_KEY),e.get("/api/sync/artifacts",v),e.get("/api/sync/artifact/:name",g)},t.produceArtifact=_,t.syncArtifacts=h;var r=a(_$app_68),n=a(_$download_108),o=_$proxyUtils_69({});function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new S(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=A(s,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var f={};function _(){}function d(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v($([])));m&&m!==t&&r.call(m,o)&&(y=m);var g=h.prototype=_.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,u){var c=p(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function $(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,u(g,"constructor",h),u(h,"constructor",d),d.displayName=u(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),u(g,i,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=$,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:$(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function p(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){p(a,n,o,s,i,"next",e)}function i(e){p(a,n,o,s,i,"throw",e)}s(void 0)}))}}function _(e){return d.apply(this,arguments)}function d(){return(d=f(l().mark((function e(t){var a,s,u,p,_,d,h,y,v,m,g,b,w,A,E,x,S,$,C,k,P,O,I,R,j,T,F,L,D,N,B,U,M,q,H,G,Y,K,z,W,V,X,J,Q,Z,ee,te,re,ne,oe,ae,se,ie,ue,ce,le,pe;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.type,s=t.name,u=t.platform,p=t.url,_=t.ua,d=t.content,h=t.mergeSources,y=t.ignoreFailedRemoteSub,v=t.ignoreFailedRemoteFile,m=t.produceType,g=t.produceOpts,b=void 0===g?{}:g,w=t.subscription,u=u||"JSON","subscription"!==a){e.next=74;break}if(!s){e.next=10;break}if(E=r.default.read(_$constants_67.SUBS_KEY),A=(0,_$database_107.findByName)(E,s)){e.next=8;break}throw new Error("\u627e\u4e0d\u5230\u8ba2\u9605 ".concat(s));case 8:e.next=15;break;case 10:if(!w){e.next=14;break}A=w,e.next=15;break;case 14:throw new Error("\u672a\u63d0\u4f9b\u8ba2\u9605\u540d\u79f0\u6216\u8ba2\u9605\u6570\u636e");case 15:if(!d||["localFirst","remoteFirst"].includes(h)){e.next=19;break}x=d,e.next=44;break;case 19:if(!p){e.next=31;break}return S={},e.next=23,Promise.all(p.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,_||A.ua,void 0,A.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),S[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(A.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 23:if(x=e.sent,$=A.ignoreFailedRemoteSub,null!=y&&""!==y&&($=y),$||!(Object.keys(S).length>0)){e.next=28;break}throw new Error("\u8ba2\u9605 ".concat(A.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(S).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 28:"localFirst"===h?x.unshift(d):"remoteFirst"===h&&x.push(d),e.next=44;break;case 31:if("local"!==A.source||["localFirst","remoteFirst"].includes(A.mergeSources)){e.next=35;break}x=A.content,e.next=44;break;case 35:return C={},e.next=38,Promise.all(A.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,_||A.ua,void 0,A.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),C[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(A.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 38:if(x=e.sent,k=A.ignoreFailedRemoteSub,null!=y&&""!==y&&(k=y),k||!(Object.keys(C).length>0)){e.next=43;break}throw new Error("\u8ba2\u9605 ".concat(A.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(C).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 43:"localFirst"===A.mergeSources?x.unshift(A.content):"remoteFirst"===A.mergeSources&&x.push(A.content);case 44:return(P=(Array.isArray(x)?x:[x]).map((function(e){return o.ProxyUtils.parse(e)})).flat()).forEach((function(e){e.subName=A.name})),e.next=48,o.ProxyUtils.process(P,A.process||[],u,c({},A.name,A));case 48:if(0!==(P=e.sent).length){e.next=51;break}throw new Error("\u8ba2\u9605 ".concat(s," \u4e2d\u4e0d\u542b\u6709\u6548\u8282\u70b9"));case 51:O={},I=i(P),e.prev=53,I.s();case 55:if((R=I.n()).done){e.next=63;break}if(j=R.value,!O[j.name]){e.next=60;break}return r.default.notify("\ud83c\udf0d Sub-Store","\u26a0\ufe0f \u8ba2\u9605 ".concat(s," \u5305\u542b\u91cd\u590d\u8282\u70b9 ").concat(j.name,"\uff01"),"\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),e.abrupt("break",63);case 60:O[j.name]=!0;case 61:e.next=55;break;case 63:e.next=68;break;case 65:e.prev=65,e.t0=e.catch(53),I.e(e.t0);case 68:return e.prev=68,I.f(),e.finish(68);case 71:return e.abrupt("return",o.ProxyUtils.produce(P,u,m,b));case 74:if("collection"!==a){e.next=120;break}if(T=r.default.read(_$constants_67.SUBS_KEY),F=r.default.read(_$constants_67.COLLECTIONS_KEY),L=(0,_$database_107.findByName)(F,s)){e.next=80;break}throw new Error("\u627e\u4e0d\u5230\u7ec4\u5408\u8ba2\u9605 ".concat(s));case 80:return D=L.subscriptions,N={},B={},U=0,e.next=86,Promise.all(D.map(function(){var e=f(l().mark((function e(t){var a,s,i,p,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$database_107.findByName)(T,t),e.prev=1,r.default.info("\u6b63\u5728\u5904\u7406\u5b50\u8ba2\u9605\uff1a".concat(a.name,"...")),"local"!==a.source||["localFirst","remoteFirst"].includes(a.mergeSources)){e.next=7;break}i=a.content,e.next=16;break;case 7:return p={},e.next=10,Promise.all(a.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,a.ua,void 0,a.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),p[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(a.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 10:return e.next=12,e.sent;case 12:if(i=e.sent,a.ignoreFailedRemoteSub||!(Object.keys(p).length>0)){e.next=15;break}throw new Error("\u8ba2\u9605 ".concat(a.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(p).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 15:"localFirst"===a.mergeSources?i.unshift(a.content):"remoteFirst"===a.mergeSources&&i.push(a.content);case 16:return(_=(Array.isArray(i)?i:[i]).map((function(e){return o.ProxyUtils.parse(e)})).flat()).forEach((function(e){e.subName=a.name,e.collectionName=L.name})),e.next=20,o.ProxyUtils.process(_,a.process||[],u,(c(s={},a.name,a),c(s,"_collection",L),s));case 20:_=e.sent,N[t]=_,U++,r.default.info("\u2705 \u5b50\u8ba2\u9605\uff1a".concat(a.name,"\u52a0\u8f7d\u6210\u529f\uff0c\u8fdb\u5ea6--").concat(100*(U/D.length).toFixed(1),"% ")),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(1),U++,B[t]=e.t0,r.default.error("\u274c \u5904\u7406\u7ec4\u5408\u8ba2\u9605\u4e2d\u7684\u5b50\u8ba2\u9605: ".concat(a.name,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(e.t0,"\uff01\u8fdb\u5ea6--").concat(100*(U/D.length).toFixed(1),"%"));case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}()));case 86:if(M=L.ignoreFailedRemoteSub,null!=y&&""!==y&&(M=y),M||!(Object.keys(B).length>0)){e.next=90;break}throw new Error("\u7ec4\u5408\u8ba2\u9605 ".concat(s," \u4e2d\u7684\u5b50\u8ba2\u9605 ").concat(Object.keys(B).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 90:return(q=Array.prototype.concat.apply([],D.map((function(e){return N[e]||[]})))).forEach((function(e){e.collectionName=L.name})),e.next=94,o.ProxyUtils.process(q,L.process||[],u,{_collection:L});case 94:if(0!==(q=e.sent).length){e.next=97;break}throw new Error("\u7ec4\u5408\u8ba2\u9605 ".concat(s," \u4e2d\u4e0d\u542b\u6709\u6548\u8282\u70b9"));case 97:H={},G=i(q),e.prev=99,G.s();case 101:if((Y=G.n()).done){e.next=109;break}if(K=Y.value,!H[K.name]){e.next=106;break}return r.default.notify("\ud83c\udf0d Sub-Store","\u26a0\ufe0f \u7ec4\u5408\u8ba2\u9605 ".concat(s," \u5305\u542b\u91cd\u590d\u8282\u70b9 ").concat(K.name,"\uff01"),"\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),e.abrupt("break",109);case 106:H[K.name]=!0;case 107:e.next=101;break;case 109:e.next=114;break;case 111:e.prev=111,e.t1=e.catch(99),G.e(e.t1);case 114:return e.prev=114,G.f(),e.finish(114);case 117:return e.abrupt("return",o.ProxyUtils.produce(q,u,m,b));case 120:if("rule"!==a){e.next=151;break}if(z=r.default.read(_$constants_67.RULES_KEY),W=(0,_$database_107.findByName)(z,s)){e.next=125;break}throw new Error("\u627e\u4e0d\u5230\u89c4\u5219 ".concat(s));case 125:V=[],X=0;case 127:if(!(X<W.urls.length)){e.next=145;break}return J=W.urls[X],r.default.info("\u6b63\u5728\u5904\u7406URL\uff1a".concat(J,"\uff0c\u8fdb\u5ea6--").concat(100*((X+1)/W.urls.length).toFixed(1),"% ")),e.prev=130,e.next=133,(0,n.default)(J);case 133:Q=e.sent,Z=Q.body,ee=_$ruleUtils_91.RuleUtils.parse(Z),V=V.concat(ee),e.next=142;break;case 139:e.prev=139,e.t2=e.catch(130),r.default.error("\u5904\u7406\u5206\u6d41\u8ba2\u9605\u4e2d\u7684URL: ".concat(J,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(e.t2,"! \u8be5\u8ba2\u9605\u5df2\u88ab\u8df3\u8fc7\u3002"));case 142:X++,e.next=127;break;case 145:return e.next=147,_$ruleUtils_91.RuleUtils.process(V,[{type:"Remove Duplicate Filter"}]);case 147:return V=e.sent,e.abrupt("return",_$ruleUtils_91.RuleUtils.produce(V,u));case 151:if("file"!==a){e.next=196;break}if(re=r.default.read(_$constants_67.FILES_KEY),ne=(0,_$database_107.findByName)(re,s)){e.next=156;break}throw new Error("\u627e\u4e0d\u5230\u6587\u4ef6 ".concat(s));case 156:if(!d||["localFirst","remoteFirst"].includes(h)){e.next=160;break}oe=d,e.next=185;break;case 160:if(!p){e.next=172;break}return ae={},e.next=164,Promise.all(p.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,_||ne.ua);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),ae[t]=e.t0,r.default.error("\u6587\u4ef6 ".concat(ne.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 164:if(oe=e.sent,se=ne.ignoreFailedRemoteFile,null!=v&&""!==v&&(se=v),se||!(Object.keys(ae).length>0)){e.next=169;break}throw new Error("\u6587\u4ef6 ".concat(ne.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(Object.keys(ae).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 169:"localFirst"===h?oe.unshift(d):"remoteFirst"===h&&oe.push(d),e.next=185;break;case 172:if("local"!==ne.source||["localFirst","remoteFirst"].includes(ne.mergeSources)){e.next=176;break}oe=ne.content,e.next=185;break;case 176:return ie={},e.next=179,Promise.all(ne.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,_||ne.ua);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),ie[t]=e.t0,r.default.error("\u6587\u4ef6 ".concat(ne.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 179:if(oe=e.sent,ue=ne.ignoreFailedRemoteFile,null!=v&&""!==v&&(ue=v),ue||!(Object.keys(ie).length>0)){e.next=184;break}throw new Error("\u6587\u4ef6 ".concat(ne.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(Object.keys(ie).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 184:"localFirst"===ne.mergeSources?oe.unshift(ne.content):"remoteFirst"===ne.mergeSources&&oe.push(ne.content);case 185:if(ce=(Array.isArray(oe)?oe:[oe]).flat(),le=ce.filter((function(e){return null!=e&&""!==e})).join("\n"),!(Array.isArray(ne.process)&&ne.process.length>0)){e.next=193;break}return e.next=190,o.ProxyUtils.process({$files:ce,$content:le},ne.process);case 190:e.t3=e.sent,e.next=194;break;case 193:e.t3={$content:le,$files:ce};case 194:return pe=e.t3,e.abrupt("return",null!==(te=null==pe?void 0:pe.$content)&&void 0!==te?te:"");case 196:case"end":return e.stop()}}),e,null,[[53,65,68,71],[99,111,114,117],[130,139]])})))).apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return(y=f(l().mark((function e(){var t,n,o,a,s,u,c,p,d,h,y,v,m,g,b,w,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.default.info("\u5f00\u59cb\u540c\u6b65\u6240\u6709\u8fdc\u7a0b\u914d\u7f6e..."),t=r.default.read(_$constants_67.ARTIFACTS_KEY),n={},e.prev=3,o=[],a=r.default.read(_$constants_67.SUBS_KEY),s=r.default.read(_$constants_67.COLLECTIONS_KEY),u=[],t.map((function(e){if(e.sync&&e.source)if("subscription"===e.type){var t=e.source,r=(0,_$database_107.findByName)(a,t);r&&r.url&&!u.includes(t)&&u.push(t)}else if("collection"===e.type){var n=(0,_$database_107.findByName)(s,e.source);n&&Array.isArray(n.subscriptions)&&n.subscriptions.map((function(e){var t=(0,_$database_107.findByName)(a,e);t&&t.url&&!u.includes(e)&&u.push(e)}))}})),!(u.length>0)){e.next=12;break}return e.next=12,Promise.all(u.map(function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({type:"subscription",name:t});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.next=14,Promise.all(t.map(function(){var e=f(l().mark((function e(t){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.sync||!t.source){e.next=7;break}return r.default.info("\u6b63\u5728\u540c\u6b65\u4e91\u914d\u7f6e\uff1a".concat(t.name,"...")),e.next=5,_({type:t.type,name:t.source,platform:t.platform,produceOpts:{"include-unsupported-proxy":t.includeUnsupportedProxy}});case 5:a=e.sent,n[encodeURIComponent(t.name)]={content:a};case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r.default.error("\u540c\u6b65\u914d\u7f6e ".concat(t.name," \u53d1\u751f\u9519\u8bef: ").concat(null!==(s=e.t0.message)&&void 0!==s?s:e.t0)),o.push(t.name);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 14:if(!(o.length>0)){e.next=16;break}throw new Error("\u540c\u6b65\u914d\u7f6e ".concat(o.join(", ")," \u53d1\u751f\u9519\u8bef \u8be6\u60c5\u8bf7\u67e5\u770b\u65e5\u5fd7"));case 16:return e.next=18,(0,_$artifacts_96.syncToGist)(n);case 18:c=e.sent,p=JSON.parse(c.body),d=i(t);try{for(d.s();!(h=d.n()).done;)(y=h.value).sync&&(y.updated=(new Date).getTime(),m=p.files,g=void 0,Array.isArray(m)&&(g=!0,m=Object.fromEntries(m.map((function(e){return[e.path,e]})))),b=null===(v=m[encodeURIComponent(y.name)])||void 0===v?void 0:v.raw_url,w=g?b:null==b?void 0:b.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1"),r.default.info("\u4e0a\u4f20\u914d\u7f6e\u5b8c\u6210\n\u6587\u4ef6\u5217\u8868: ".concat(Object.keys(m).join(", "),"\n\u5f53\u524d\u6587\u4ef6: ").concat(encodeURIComponent(y.name),"\n\u54cd\u5e94\u8fd4\u56de\u7684\u539f\u59cb\u94fe\u63a5: ").concat(b,"\n\u5904\u7406\u5b8c\u7684\u65b0\u94fe\u63a5: ").concat(w)),y.url=w)}catch(E){d.e(E)}finally{d.f()}r.default.write(t,_$constants_67.ARTIFACTS_KEY),r.default.info("\u5168\u90e8\u8ba2\u9605\u540c\u6b65\u6210\u529f\uff01"),e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(3),r.default.error("\u540c\u6b65\u8ba2\u9605\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(A=e.t0.message)&&void 0!==A?A:e.t0)),e.t0;case 30:case"end":return e.stop()}}),e,null,[[3,26]])})))).apply(this,arguments)}function v(e,t){return m.apply(this,arguments)}function m(){return(m=f(l().mark((function e(t,n){var o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.info("\u5f00\u59cb\u540c\u6b65\u6240\u6709\u8fdc\u7a0b\u914d\u7f6e..."),e.prev=1,e.next=4,h();case 4:(0,_$response_102.success)(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),r.default.error("\u540c\u6b65\u8ba2\u9605\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(o=e.t0.message)&&void 0!==o?o:e.t0)),(0,_$response_102.failed)(n,new _$errors_98.InternalServerError("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts","Reason: ".concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function g(e,t){return b.apply(this,arguments)}function b(){return(b=f(l().mark((function e(t,n){var o,a,s,i,u,p,f,d,h,y,v,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.params.name,o=decodeURIComponent(o),r.default.info("\u5f00\u59cb\u540c\u6b65\u8fdc\u7a0b\u914d\u7f6e ".concat(o,"...")),a=r.default.read(_$constants_67.ARTIFACTS_KEY),s=(0,_$database_107.findByName)(a,o)){e.next=9;break}return r.default.error("\u627e\u4e0d\u5230\u8fdc\u7a0b\u914d\u7f6e ".concat(o)),(0,_$response_102.failed)(n,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","\u627e\u4e0d\u5230\u8fdc\u7a0b\u914d\u7f6e ".concat(o)),404),e.abrupt("return");case 9:if(s.source){e.next=13;break}return r.default.error("\u8fdc\u7a0b\u914d\u7f6e ".concat(o," \u672a\u8bbe\u7f6e\u6765\u6e90")),(0,_$response_102.failed)(n,new _$errors_98.ResourceNotFoundError("RESOURCE_HAS_NO_SOURCE","\u8fdc\u7a0b\u914d\u7f6e ".concat(o," \u672a\u8bbe\u7f6e\u6765\u6e90")),404),e.abrupt("return");case 13:return e.prev=13,e.next=16,_({type:s.type,name:s.source,platform:s.platform,produceOpts:{"include-unsupported-proxy":s.includeUnsupportedProxy}});case 16:return u=e.sent,r.default.info("\u6b63\u5728\u4e0a\u4f20\u914d\u7f6e\uff1a".concat(s.name,"\n>>>").concat(JSON.stringify(s,null,2))),e.next=20,(0,_$artifacts_96.syncToGist)(c({},encodeURIComponent(s.name),{content:u}));case 20:p=e.sent,s.updated=(new Date).getTime(),f=JSON.parse(p.body),d=f.files,Array.isArray(d)&&(h=!0,d=Object.fromEntries(d.map((function(e){return[e.path,e]})))),y=null===(i=d[encodeURIComponent(s.name)])||void 0===i?void 0:i.raw_url,v=h?y:null==y?void 0:y.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1"),r.default.info("\u4e0a\u4f20\u914d\u7f6e\u5b8c\u6210\n\u6587\u4ef6\u5217\u8868: ".concat(Object.keys(d).join(", "),"\n\u5f53\u524d\u6587\u4ef6: ").concat(encodeURIComponent(s.name),"\n\u54cd\u5e94\u8fd4\u56de\u7684\u539f\u59cb\u94fe\u63a5: ").concat(y,"\n\u5904\u7406\u5b8c\u7684\u65b0\u94fe\u63a5: ").concat(v)),s.url=v,r.default.write(a,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(n,s),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(13),r.default.error("\u8fdc\u7a0b\u914d\u7f6e ".concat(s.name," \u53d1\u751f\u9519\u8bef: ").concat(null!==(m=e.t0.message)&&void 0!==m?m:e.t0)),(0,_$response_102.failed)(n,new _$errors_98.InternalServerError("FAILED_TO_SYNC_ARTIFACT","Failed to sync artifact ".concat(o),"Reason: ".concat(e.t0)));case 37:case"end":return e.stop()}}),e,null,[[13,33]])})))).apply(this,arguments)}})),_$proxyUtils_69=createModuleFactory((function(e,t){(function(e){(function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyUtils=void 0;var n=p(_$yaml_119),o=p(_$download_108),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=function(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return function(e){return e?r:t}(e)}(void 0);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(o,s,i):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}(_$processors_76({})),s=p(_$preprocessors_75),i=p(_$producers_79),u=p(_$parsers_70),c=p(_$app_68),l=_$sync_106({});function p(e){return e&&e.__esModule?e:{default:e}}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new S(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=A(s,r);if(i){if(i===p)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var p={};function _(){}function d(){}function h(){}var y={};u(y,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v($([])));m&&m!==t&&n.call(m,a)&&(y=m);var g=h.prototype=_.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var o;this._invoke=function(a,s){function i(){return new t((function(o,i){!function o(a,s,i,u){var c=l(e[a],e,s);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,u)}),(function(e){o("throw",e,i,u)})):t.resolve(f).then((function(e){p.value=e,i(p)}),(function(e){return o("throw",e,i,u)}))}u(c.arg)}(a,s,o,i)}))}return o=o?o.then(i,i):i()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function $(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,u(g,"constructor",h),u(h,"constructor",d),d.displayName=u(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=$,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var i=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:$(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function _(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(){var e;return e=f().mark((function e(t){var r,n,s,i,u,p,_,d,y,v,m,g,b,w,A,E,x,S,$,C,k,P,O,I,R,j=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=j.length>1&&void 0!==j[1]?j[1]:[],n=j.length>2?j[2]:void 0,s=j.length>3?j[3]:void 0,i=h(r),e.prev=4,i.s();case 6:if((u=i.n()).done){e.next=71;break}if(p=u.value,_=void 0,d={},-1===p.type.indexOf("Script")){e.next=60;break}if(y=p.args,v=y.mode,m=y.content,"link"!==v){e.next=59;break}if(g=void 0,(b=m).endsWith("#noCache")&&(b=b.replace(/#noCache$/,""),g=!0),(w=b.split("#")).length>1)try{d=JSON.parse(decodeURIComponent(w[1]))}catch(f){A=h(w[1].split("&"));try{for(A.s();!(E=A.n()).done;)x=E.value,S=x.split("=")[0],$=x.split("=")[1],d[S]=null==$||""===$||decodeURIComponent($)}catch(T){A.e(T)}finally{A.f()}}if(b="".concat(b.split("#")[0]).concat(g?"#noCache":""),!(C=b.match(/^\/api\/(file|module)\/(.+)/))){e.next=47;break}if(k="",e.prev=22,k=null==C?void 0:C[1],null!=(P=null==C?void 0:C[2])){e.next=27;break}throw new Error("\u672c\u5730 ".concat(k," URL \u65e0\u6548: ").concat(b));case 27:if(P=decodeURIComponent(P),O="module"===k?_$constants_67.MODULES_KEY:_$constants_67.FILES_KEY,I=(0,_$database_107.findByName)(c.default.read(O),P)){e.next=32;break}throw new Error("\u627e\u4e0d\u5230 ".concat(k,": ").concat(P));case 32:if("module"!==k){e.next=36;break}_=I.content,e.next=39;break;case 36:return e.next=38,(0,l.produceArtifact)({type:"file",name:P});case 38:_=e.sent;case 39:e.next=45;break;case 41:throw e.prev=41,e.t0=e.catch(22),c.default.error("Error when loading ".concat(k,": ").concat(p.args.content,".\n Reason: ").concat(e.t0)),new Error("\u65e0\u6cd5\u52a0\u8f7d ".concat(k,": ").concat(b));case 45:e.next=57;break;case 47:return e.prev=47,e.next=50,(0,o.default)(b);case 50:_=e.sent,e.next=57;break;case 53:throw e.prev=53,e.t1=e.catch(47),c.default.error("Error when downloading remote script: ".concat(p.args.content,".\n Reason: ").concat(e.t1)),new Error("\u65e0\u6cd5\u4e0b\u8f7d\u811a\u672c: ".concat(b));case 57:e.next=60;break;case 59:_=m;case 60:if(a.default[p.type]){e.next=63;break}return c.default.error('Unknown operator: "'.concat(p.type,'"')),e.abrupt("continue",69);case 63:return c.default.log('Applying "'.concat(p.type,'" with arguments:\n >>> ').concat(JSON.stringify(p.args,null,2)||"None")),R=void 0,R=-1!==p.type.indexOf("Script")?a.default[p.type](_,n,d,s):a.default[p.type](p.args||{}),e.next=68,(0,a.ApplyProcessor)(R,t);case 68:t=e.sent;case 69:e.next=6;break;case 71:e.next=76;break;case 73:e.prev=73,e.t2=e.catch(4),i.e(e.t2);case 76:return e.prev=76,i.f(),e.finish(76);case 79:return e.abrupt("return",t);case 80:case"end":return e.stop()}}),e,null,[[4,73,76,79],[22,41],[47,53]])})),(m=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){_(a,n,o,s,i,"next",e)}function i(e){_(a,n,o,s,i,"throw",e)}s(void 0)}))}).apply(this,arguments)}var g={parse:function(e){e=function(e){var t,r=h(s.default);try{for(r.s();!(t=r.n()).done;){var n=t.value;try{if(n.test(e))return c.default.info("Pre-processor [".concat(n.name,"] activated")),n.parse(e)}catch(o){c.default.error("Parser [".concat(n.name,"] failed\n Reason: ").concat(o))}}}catch(a){r.e(a)}finally{r.f()}return e}(e);var t,r,n=[],o=h(e.split("\n"));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(0!==(a=a.trim()).length){var i=!1;if(t){var l=d(b(t,a),2),p=l[0];l[1]||(n.push(w(p)),i=!0)}if(!i){var f,_=h(u.default);try{for(_.s();!(f=_.n()).done;){var y=f.value,v=d(b(y,a),2),m=v[0];if(!v[1]){n.push(w(m)),t=y,i=!0,c.default.info("".concat(y.name," is activated"));break}}}catch(g){_.e(g)}finally{_.f()}}i||c.default.error("Failed to parse line: ".concat(a))}}}catch(g){o.e(g)}finally{o.f()}return n},process:function(e){return m.apply(this,arguments)},produce:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.default[t];if(!o)throw new Error("Target platform: ".concat(t," is not supported!"));var a=/Surge|SurgeMac|Shadowrocket/i.test(t);if(e=(e=e.filter((function(e){return!(e.supported&&!1===e.supported[t])}))).map((function(e){return(0,_$utils_114.isNotBlank)(e.name)||(e.name="".concat(e.type," ").concat(e.server,":").concat(e.port)),e["disable-sni"]&&(a?e.sni="off":["tuic"].includes(e.type)||(c.default.error("Target platform ".concat(t," does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.")),e.sni="",e["skip-cert-verify"]=!0,delete e["tls-fingerprint"])),e})),c.default.log("Producing proxies for target: ".concat(t)),void 0===o.type||"SINGLE"===o.type){var s,u,l,p,f,_=1e4,d=e.map((function(e){try{var t=o.produce(e,r,n);return t.length>0&&t.includes("__SubStoreLocalPort__")&&(t=t.replace(/__SubStoreLocalPort__/g,_++)),t}catch(a){return c.default.error("Cannot produce proxy: ".concat(JSON.stringify(e,null,2),"\nReason: ").concat(a)),""}})).filter((function(e){return e.length>0}));return d="internal"===r?d:d.join("\n"),t.startsWith("Surge")&&e.length>0&&e.every((function(e){return"wireguard"===e.type}))&&(d="#!name=".concat(null===(s=e[0])||void 0===s?void 0:s.subName,"\n#!desc=").concat(null!==(u=null===(l=e[0])||void 0===l?void 0:l._desc)&&void 0!==u?u:"","\n#!category=").concat(null!==(p=null===(f=e[0])||void 0===f?void 0:f._category)&&void 0!==p?p:"","\n").concat(d)),d}if("ALL"===o.type)return o.produce(e,r,n)},isIPv4:_$utils_114.isIPv4,isIPv6:_$utils_114.isIPv6,isIP:A,yaml:n.default,getFlag:_$geo_111.getFlag,getISO:_$geo_111.getISO};function b(e,t){if(!function(e,t){try{return e.test(t)}catch(r){return!1}}(e,t))return[null,new Error("Parser mismatch")];try{return[e.parse(t),null]}catch(r){return[null,r]}}function w(t){var r,n,o;if(t.interface&&(t["interface-name"]=t.interface,delete t.interface),(0,_$utils_114.isValidPortNumber)(t.port)&&(t.port=parseInt(t.port,10)),t.server&&(t.server="".concat(t.server).trim().replace(/^\[/,"").replace(/\]$/,"")),"ws"===t.network&&(t["ws-opts"]||!t["ws-path"]&&!t["ws-headers"]||(t["ws-opts"]={},t["ws-path"]&&(t["ws-opts"].path=t["ws-path"]),t["ws-headers"]&&(t["ws-opts"].headers=t["ws-headers"])),delete t["ws-path"],delete t["ws-headers"]),"trojan"===t.type&&"tcp"===t.network&&delete t.network,["vless"].includes(t.type)&&(t.network||(t.network="tcp")),["trojan","tuic","hysteria","hysteria2"].includes(t.type)&&(t.tls=!0),t.network){var a,s,i,u,l=null===(a=t["".concat(t.network,"-opts")])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host,p=null===(i=t["".concat(t.network,"-opts")])||void 0===i||null===(u=i.headers)||void 0===u?void 0:u.host;"h2"===t.network?!p&&l&&(t["".concat(t.network,"-opts")].headers.host=l,delete t["".concat(t.network,"-opts")].headers.Host):p&&!l&&(t["".concat(t.network,"-opts")].headers.Host=p,delete t["".concat(t.network,"-opts")].headers.host)}if("h2"===t.network){var f,_,d,h=null===(f=t["h2-opts"])||void 0===f||null===(_=f.headers)||void 0===_?void 0:_.host,y=null===(d=t["h2-opts"])||void 0===d?void 0:d.path;h&&!Array.isArray(h)&&(t["h2-opts"].headers.host=[h]),Array.isArray(y)&&(t["h2-opts"].path=y[0])}if(t.tls&&!t.sni){if(t.network){var v,m,g=null===(v=t["".concat(t.network,"-opts")])||void 0===v||null===(m=v.headers)||void 0===m?void 0:m.Host;(g=Array.isArray(g)?g[0]:g)&&(t.sni=g)}t.sni||A(t.server)||(t.sni=t.server)}if(t.tls||!["ws","http"].includes(t.network)||null!==(r=t["".concat(t.network,"-opts")])&&void 0!==r&&null!==(n=r.headers)&&void 0!==n&&n.Host||A(t.server)||(t["".concat(t.network,"-opts")]=t["".concat(t.network,"-opts")]||{},t["".concat(t.network,"-opts")].headers=t["".concat(t.network,"-opts")].headers||{},t["".concat(t.network,"-opts")].headers.Host=["vmess","vless"].includes(t.type)&&"http"===t.network?[t.server]:t.server),["vmess","vless"].includes(t.type)&&"http"===t.network){var b,w,E,x=null===(b=t["".concat(t.network,"-opts")])||void 0===b?void 0:b.path,S=null===(w=t["".concat(t.network,"-opts")])||void 0===w||null===(E=w.headers)||void 0===E?void 0:E.Host;S&&!Array.isArray(S)&&(t["".concat(t.network,"-opts")].headers.Host=[S]),x&&!Array.isArray(x)&&(t["".concat(t.network,"-opts")].path=[x])}if(["hysteria","hysteria2"].includes(t.type)&&!t.ports&&delete t.ports,["vless"].includes(t.type)&&(t["reality-opts"]||t.flow||delete t.flow,["http"].includes(t.network)&&((null===(o=t["".concat(t.network,"-opts")])||void 0===o?void 0:o.path)||(t["".concat(t.network,"-opts")]||(t["".concat(t.network,"-opts")]={}),t["".concat(t.network,"-opts")].path=["/"]))),"string"!=typeof t.name)if(/^\d+$/.test(t.name))t.name="".concat(t.name);else try{var $;null!==($=t.name)&&void 0!==$&&$.data?t.name=e.from(t.name.data).toString("utf8"):t.name=(0,_$utils_114.utf8ArrayToStr)(t.name)}catch(C){c.default.error("proxy.name decode failed\nReason: ".concat(C)),t.name="".concat(t.type," ").concat(t.server,":").concat(t.port)}return["","off"].includes(t.sni)&&(t["disable-sni"]=!0),t}function A(e){return(0,_$utils_114.isIPv4)(e)||(0,_$utils_114.isIPv6)(e)}t.ProxyUtils=g}).call(this)}).call(this,_$buffer_2({}).Buffer)})),_$buffer_2=createModuleFactory((function(e,t){(function(e){(function(){"use strict";t.Buffer=r,t.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},t.INSPECT_MAX_BYTES=50;function e(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return n(e,t,r)}function n(t,n,o){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|u(t,n),a=e(o),s=a.write(t,n);return s!==o&&(a=a.slice(0,s)),a}(t,n);if(ArrayBuffer.isView(t))return s(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(T(t,ArrayBuffer)||t&&T(t.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=r.prototype,o}(t,n,o);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=t.valueOf&&t.valueOf();if(null!=a&&a!==t)return r.from(a,n,o);var c=function(t){if(r.isBuffer(t)){var n=0|i(t.length),o=e(n);return 0===o.length||t.copy(o,0,0,n),o}return void 0!==t.length?"number"!=typeof t.length||F(t.length)?e(0):s(t):"Buffer"===t.type&&Array.isArray(t.data)?s(t.data):void 0}(t);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(t){return o(t),e(t<0?0:0|i(t))}function s(t){for(var r=t.length<0?0:0|i(t.length),n=e(r),o=0;o<r;o+=1)n[o]=255&t[o];return n}function i(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function u(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(a)return o?-1:I(e).length;t=(""+t).toLowerCase(),a=!0}}function c(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function l(e,t,n,o,a){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),F(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=r.from(t,o)),r.isBuffer(t))return 0===t.length?-1:p(e,t,n,o,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,o,a);throw new TypeError("val must be string, number or Buffer")}function p(e,t,r,n,o){var a,s=1,i=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,i/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(a=r;a<i;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s}else-1!==l&&(a-=a-l),l=-1}else for(r+u>i&&(r=i-u),a=r;a>=0;a--){for(var p=!0,f=0;f<u;f++)if(c(e,a+f)!==c(t,f)){p=!1;break}if(p)return a}return-1}function f(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=t.length;n>a/2&&(n=a/2);for(var s=0;s<n;++s){var i=parseInt(t.substr(2*s,2),16);if(F(i))return s;e[r+s]=i}return s}function _(e,t,r,n){return j(I(t,e.length-r),e,r,n)}function d(e,t,r,n){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function h(e,t,r,n){return d(e,t,r,n)}function y(e,t,r,n){return j(R(t),e,r,n)}function v(e,t,r,n){return j(function(e,t){for(var r,n,o,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function m(e,t,r){return 0===t&&r===e.length?_$base64Js_1.fromByteArray(e):_$base64Js_1.fromByteArray(e.slice(t,r))}function g(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var a,s,i,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[o+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[o+1],s=e[o+2],128==(192&a)&&128==(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[o+1],s=e[o+2],i=e[o+3],128==(192&a)&&128==(192&s)&&128==(192&i)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&i)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=b));return r}(n)}t.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,r){return n(e,t,r)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(t,r,n){return function(t,r,n){return o(t),t<=0?e(t):void 0!==r?"string"==typeof n?e(t).fill(r,n):e(t).fill(r):e(t)}(t,r,n)},r.allocUnsafe=function(e){return a(e)},r.allocUnsafeSlow=function(e){return a(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(T(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,o=t.length,a=0,s=Math.min(n,o);a<s;++a)if(e[a]!==t[a]){n=e[a],o=t[a];break}return n<o?-1:o<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=r.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(T(s,Uint8Array)&&(s=r.from(s)),!r.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,a),a+=s.length}return o},r.byteLength=u,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?g(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return g(this,t,r);case"ascii":return w(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return m(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,o,a){if(T(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),t<0||n>e.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&t>=n)return 0;if(o>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(a>>>=0)-(o>>>=0),i=(n>>>=0)-(t>>>=0),u=Math.min(s,i),c=this.slice(o,a),l=e.slice(t,n),p=0;p<u;++p)if(c[p]!==l[p]){s=c[p],i=l[p];break}return s<i?-1:i<s?1:0},r.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},r.prototype.indexOf=function(e,t,r){return l(this,e,t,r,!0)},r.prototype.lastIndexOf=function(e,t,r){return l(this,e,t,r,!1)},r.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return f(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return d(this,e,t,r);case"latin1":case"binary":return h(this,e,t,r);case"base64":return y(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function E(e,t,r){var n,o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);for(var a="",s=t;s<r;++s)a+=(n=e[s])<16?"0"+n.toString(16):n.toString(16);return a}function x(e,t,r){for(var n=e.slice(t,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function S(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,n,o,a,s){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<s)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,0,r,4),_$ieee754_3.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,0,r,8),_$ieee754_3.write(e,t,r,n,52,8),r+8}r.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var o=this.subarray(e,t);return o.__proto__=r.prototype,o},r.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n},r.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},r.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},r.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),_$ieee754_3.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),_$ieee754_3.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),_$ieee754_3.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),_$ieee754_3.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||$(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},r.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||$(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},r.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);$(this,e,t,r,o-1,-o)}var a=0,s=1,i=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+r},r.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);$(this,e,t,r,o-1,-o)}var a=r-1,s=1,i=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+r},r.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},r.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},r.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},r.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},r.prototype.copy=function(e,t,n,o){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var a=o-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,o);else if(this===e&&n<t&&t<o)for(var s=a-1;s>=0;--s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,o),t);return a},r.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!r.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var a=e.charCodeAt(0);("utf8"===o&&a<128||"latin1"===o)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=r.isBuffer(e)?e:r.from(e,o),u=i.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=i[s%u]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e,t){var r;t=t||1/0;for(var n=e.length,o=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function R(e){return _$base64Js_1.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this)}).call(this,_$buffer_2({}).Buffer)})),_$processors_76=createModuleFactory((function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ApplyProcessor=function(e,t){return B.apply(this,arguments)},t.default=void 0;var n=l(_$resourceCache_117),o=l(_$scriptResourceCache_118),a=l(_$lodash_35),s=l(_$app_68),i=_$proxyUtils_69({}),u=_$sync_106({}),c=l(_$env_109);function l(e){return e&&e.__esModule?e:{default:e}}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new S(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=A(s,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var f={};function _(){}function d(){}function h(){}var y={};u(y,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v($([])));m&&m!==t&&n.call(m,a)&&(y=m);var g=h.prototype=_.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var o;this._invoke=function(a,s){function i(){return new t((function(o,i){!function o(a,s,i,u){var c=l(e[a],e,s);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,u)}),(function(e){o("throw",e,i,u)})):t.resolve(f).then((function(e){p.value=e,i(p)}),(function(e){return o("throw",e,i,u)}))}u(c.arg)}(a,s,o,i)}))}return o=o?o.then(i,i):i()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function $(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,u(g,"constructor",h),u(h,"constructor",d),d.displayName=u(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=$,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var i=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:$(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function f(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){f(a,n,o,s,i,"next",e)}function i(e){f(a,n,o,s,i,"throw",e)}s(void 0)}))}}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){for(var r=null,n=0;n<e.length;n++)if(e[n].test(t)){r=n+1;break}return r}function w(e){return{name:"Regex Rename Operator",func:function(t){return t.map((function(t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=o.expr,s=o.now;t.name=t.name.replace(j(a,"g"),s).trim()}}catch(i){n.e(i)}finally{n.f()}return t}))}}}function A(e){var t,r;try{if(!/^2001::[^:]+:[^:]+:[^:]+$/.test(e))throw new Error("Invalid IP4P: ".concat(e));var n=e.split(":");r=parseInt(n[2],16);var o=parseInt(n[3],16),a=parseInt(n[4],16),i=255&o,u=a>>8,c=255&a;if(t="".concat(o>>8,".").concat(i,".").concat(u,".").concat(c),r<=0||r>65535)throw new Error("Invalid port number: ".concat(r));if(!(0,_$utils_114.isIPv4)(t))throw new Error("Invalid IP address: ".concat(t))}catch(l){s.default.error("IP4P \u89e3\u6790\u5931\u8d25: ".concat(l))}return{server:t,port:r}}var E,x,S,$,C,k={Google:(C=_(p().mark((function e(t,r,o){var a,i,u,c,l,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$md5_121.hex_md5)("GOOGLE:".concat(t,":").concat(r)),i=n.default.get(a),o||!i){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,s.default.http.get({url:"https://8.8.4.4/resolve?name=".concat(encodeURIComponent(t),"&type=").concat("IPv6"===r?"AAAA":"A"),headers:{accept:"application/dns-json"}});case 6:if(u=e.sent,0===(c=JSON.parse(u.body)).Status){e.next=10;break}throw new Error("Status is ".concat(c.Status));case 10:if(0!==(l=c.Answer).length){e.next=13;break}throw new Error("No answers");case 13:return f=l[l.length-1].data,n.default.set(a,f),e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)}))),function(e,t,r){return C.apply(this,arguments)}),"IP-API":($=_(p().mark((function e(t,r,o){var a,i,u,c,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["IPv6"].includes(r)){e.next=2;break}throw new Error("\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9 IP-API \u4e0d\u652f\u6301 ".concat(r));case 2:if(a=(0,_$md5_121.hex_md5)("IP-API:".concat(t)),i=n.default.get(a),o||!i){e.next=6;break}return e.abrupt("return",i);case 6:return e.next=8,s.default.http.get({url:"http://ip-api.com/json/".concat(encodeURIComponent(t),"?lang=zh-CN")});case 8:if(u=e.sent,"success"===(c=JSON.parse(u.body)).status){e.next=12;break}throw new Error("Status is ".concat(c.status));case 12:return l=c.query,n.default.set(a,l),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))),function(e,t,r){return $.apply(this,arguments)}),Cloudflare:(S=_(p().mark((function e(t,r,o){var a,i,u,c,l,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$md5_121.hex_md5)("CLOUDFLARE:".concat(t,":").concat(r)),i=n.default.get(a),o||!i){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,s.default.http.get({url:"https://1.0.0.1/dns-query?name=".concat(encodeURIComponent(t),"&type=").concat("IPv6"===r?"AAAA":"A"),headers:{accept:"application/dns-json"}});case 6:if(u=e.sent,0===(c=JSON.parse(u.body)).Status){e.next=10;break}throw new Error("Status is ".concat(c.Status));case 10:if(0!==(l=c.Answer).length){e.next=13;break}throw new Error("No answers");case 13:return f=l[l.length-1].data,n.default.set(a,f),e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)}))),function(e,t,r){return S.apply(this,arguments)}),Ali:(x=_(p().mark((function e(t,r,o){var a,i,u,c,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$md5_121.hex_md5)("ALI:".concat(t,":").concat(r)),i=n.default.get(a),o||!i){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,s.default.http.get({url:"http://223.6.6.6/resolve?name=".concat(encodeURIComponent(t),"&type=").concat("IPv6"===r?"AAAA":"A","&short=1"),headers:{accept:"application/dns-json"}});case 6:if(u=e.sent,0!==(c=JSON.parse(u.body)).length){e.next=10;break}throw new Error("No answers");case 10:return l=c[c.length-1],n.default.set(a,l),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),function(e,t,r){return x.apply(this,arguments)}),Tencent:(E=_(p().mark((function e(t,r,o){var a,i,u,c,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$md5_121.hex_md5)("ALI:".concat(t,":").concat(r)),i=n.default.get(a),o||!i){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,s.default.http.get({url:"http://119.28.28.28/d?type=".concat("IPv6"===r?"AAAA":"A","&dn=").concat(encodeURIComponent(t)),headers:{accept:"application/dns-json"}});case 6:if(u=e.sent,0!==(c=u.body.split(";").map((function(e){return e.split(",")[0]}))).length&&"0"!==String(c)){e.next=10;break}throw new Error("No answers");case 10:return l=c[c.length-1],n.default.set(a,l),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),function(e,t,r){return E.apply(this,arguments)})};function P(e){var t=e.provider,r=e.type,n=e.filter,o=e.cache;if(["IPv6","IP4P"].includes(r)&&["IP-API"].includes(t))throw new Error("\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9 ".concat(t," \u4e0d\u652f\u6301 ").concat(r));var a,i=["IPv6","IP4P"].includes(r)?"IPv6":"IPv4",u=k[t];if(!u)throw new Error("\u627e\u4e0d\u5230\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9: ".concat(t));return{name:"Resolve Domain Operator",func:(a=_(p().mark((function e(a){var c,l,f,_,v,m,g,b,w;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={},l=15,p=new Set(a.filter((function(e){return!O(e.server)&&!e["no-resolve"]})).map((function(e){return e.server}))),f=function(e){if(Array.isArray(e))return y(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||h(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),_=Math.ceil(f.length/l),v=0;case 5:if(!(v<_)){e.next=14;break}m=[],g=d(f.splice(0,l));try{for(w=function(){var e=b.value;m.push(u(e,i,"disabled"===o).then((function(t){c[e]=t,s.default.info("Successfully resolved domain: ".concat(e," \u279f ").concat(t))})).catch((function(r){s.default.error("Failed to resolve domain: ".concat(e," with resolver [").concat(t,"]: ").concat(r))})))},g.s();!(b=g.n()).done;)w()}catch(E){g.e(E)}finally{g.f()}return e.next=11,Promise.all(m);case 11:v++,e.next=5;break;case 14:return a.forEach((function(e){if(!e["no-resolve"])if(c[e.server])if("IP4P"===r){var t=A(c[e.server]),n=t.server,o=t.port;n&&o?(e._domain=e.server,e.server=n,e.port=o,e.resolved=!0,e._IPv4=e.server,O(e._IP)||(e._IP=e.server)):e.resolved=!1}else e._domain=e.server,e.server=c[e.server],e.resolved=!0,e["_".concat(i)]=e.server,O(e._IP)||(e._IP=e.server);else e.resolved=!1})),e.abrupt("return",a.filter((function(e){return"removeFailed"===n?O(e.server)||e["no-resolve"]||e.resolved:"IPOnly"===n?O(e.server):"IPv4Only"===n?(0,_$utils_114.isIPv4)(e.server):"IPv6Only"!==n||(0,_$utils_114.isIPv6)(e.server)})));case 16:case"end":return e.stop()}var p}),e)}))),function(e){return a.apply(this,arguments)})}}function O(e){return(0,_$utils_114.isIPv4)(e)||(0,_$utils_114.isIPv6)(e)}function I(){return{name:"Useless Filter",func:R({regex:["\u7f51\u5740","\u6d41\u91cf","\u65f6\u95f4","\u5e94\u6025","\u8fc7\u671f","Bandwidth","expire"],keep:!1}).func}}function R(e){var t=e.regex,r=void 0===t?[]:t,n=e.keep,o=void 0===n||n;return{name:"Regex Filter",func:function(e){return e.map((function(e){var t=r.some((function(t){return j(t).test(e.name)}));return o?t:!t}))}}}function j(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r=r.join(""),e.startsWith("(?i)")?(e=e.substring(4),new RegExp(e,"i"+r)):new RegExp(e,r)}P.resolver=k;var T={"Useless Filter":I,"Region Filter":function(e){var t={HK:"\ud83c\udded\ud83c\uddf0",TW:"\ud83c\uddf9\ud83c\uddfc",US:"\ud83c\uddfa\ud83c\uddf8",SG:"\ud83c\uddf8\ud83c\uddec",JP:"\ud83c\uddef\ud83c\uddf5",UK:"\ud83c\uddec\ud83c\udde7",DE:"\ud83c\udde9\ud83c\uddea",KR:"\ud83c\uddf0\ud83c\uddf7"};return{name:"Region Filter",func:function(r){return r.map((function(r){var n=(0,_$geo_111.getFlag)(r.name);return e.some((function(e){return t[e]===n}))}))}}},"Regex Filter":R,"Type Filter":function(e){return{name:"Type Filter",func:function(t){return t.map((function(t){return e.some((function(e){return t.type===e}))}))}}},"Script Filter":function(e,t,r,n){return{name:"Script Filter",func:(a=_(p().mark((function o(a){var s;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=(0,_$logical_115.FULL)(a.length,!0),o.next=3,_(p().mark((function o(){var i;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=M("filter",e,r),s=i(a,t,m({source:n},c.default));case 2:case"end":return o.stop()}}),o)})))();case 3:return o.abrupt("return",s);case 4:case"end":return o.stop()}}),o)}))),function(e){return a.apply(this,arguments)}),nodeFunc:(o=_(p().mark((function o(a){var s;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=(0,_$logical_115.FULL)(a.length,!0),o.next=3,_(p().mark((function o(){var i;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=M("filter","async function filter(input = []) {\n                        let proxies = input\n                        let list = []\n                        const fn = async ($server) => {\n                            ".concat(e,"\n                        }\n                        for await (let $server of proxies) {\n                            list.push(await fn($server))\n                        }\n                        return list\n                      }"),r),s=i(a,t,m({source:n},c.default));case 2:case"end":return o.stop()}}),o)})))();case 3:return o.abrupt("return",s);case 4:case"end":return o.stop()}}),o)}))),function(e){return o.apply(this,arguments)})};var o,a},"Conditional Filter":function(e){var t=e.rule;return{name:"Conditional Filter",func:function(e){return e.map((function(e){return function e(t,r){if(!t.operator)switch(t.proposition){case"IN":return-1!==t.value.indexOf(r[t.attr]);case"CONTAINS":return"string"==typeof r[t.attr]&&-1!==r[t.attr].indexOf(t.value);case"EQUALS":return r[t.attr]===t.value;case"EXISTS":return null!==r[t.attr]||void 0!==r[t.attr];default:throw new Error("Unknown proposition: ".concat(t.proposition))}switch(t.operator){case"AND":return t.child.every((function(t){return e(t,r)}));case"OR":return t.child.some((function(t){return e(t,r)}));case"NOT":return!e(t.child,r);default:throw new Error("Unknown operator: ".concat(t.operator))}}(t,e)}))}}},"Quick Setting Operator":function(e){return{name:"Quick Setting Operator",func:function(r){if(t(e.useless)){var n=I().func(r);r=r.filter((function(e,t){return n[t]&&e.port>0&&e.port<=65535}))}return r.map((function(r){return r.udp=t(e.udp,r.udp),r.tfo=t(e.tfo,r.tfo),r["fast-open"]=t(e.tfo,r["fast-open"]),r["skip-cert-verify"]=t(e.scert,r["skip-cert-verify"]),"vmess"===r.type&&(r.aead=t(e["vmess aead"],r.aead)),r}))}};function t(e,t){switch(e){case"ENABLED":return!0;case"DISABLED":return!1;default:return t}}},"Flag Operator":function(e){var t=e.mode,r=e.tw;return{name:"Flag Operator",func:function(e){return e.map((function(e){if("remove"===t)e.name=U(e.name);else{var n=(0,_$geo_111.getFlag)(e.name);e.name=U(e.name),e.name=n+" "+e.name,"ws"==r?e.name=e.name.replace(/\ud83c\uddf9\ud83c\uddfc/g,"\ud83c\uddfc\ud83c\uddf8"):"tw"==r||(e.name=e.name.replace(/\ud83c\uddf9\ud83c\uddfc/g,"\ud83c\udde8\ud83c\uddf3"))}return e}))}}},"Sort Operator":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc";return{name:"Sort Operator",func:function(t){switch(e){case"asc":case"desc":return t.sort((function(t,r){return(t.name>r.name?1:-1)*("desc"===e?-1:1)}));case"random":return function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e}(t);default:throw new Error("Unknown sort option: "+e)}}}},"Regex Sort Operator":function(e){return{name:"Regex Sort Operator",func:function(t){return e=e.map((function(e){return j(e)})),t.sort((function(t,r){var n=b(e,t.name),o=b(e,r.name);return n&&!o?-1:o&&!n?1:n&&o?n<o?-1:1:!n&&!o||n&&o&&n===o?t.name<r.name?-1:1:void 0}))}}},"Regex Rename Operator":w,"Regex Delete Operator":function(e){return{name:"Regex Delete Operator",func:w(e.map((function(e){return{expr:e,now:""}}))).func}},"Script Operator":function(e,t,r,n){return{name:"Script Operator",func:(a=_(p().mark((function o(a){var s;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=a,o.next=3,_(p().mark((function o(){var i;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=M("operator",e,r),s=i(a,t,m({source:n},c.default));case 2:case"end":return o.stop()}}),o)})))();case 3:return o.abrupt("return",s);case 4:case"end":return o.stop()}}),o)}))),function(e){return a.apply(this,arguments)}),nodeFunc:(o=_(p().mark((function o(a){var s;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=a,o.next=3,_(p().mark((function o(){var i;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=M("operator","async function operator(input = []) {\n                        if (input && (input.$files || input.$content)) {\n                            let { $content, $files } = input\n                            ".concat(e,"\n                            return { $content, $files }\n                        } else {\n                            let proxies = input\n                            let list = []\n                            for await (let $server of proxies) {\n                                ").concat(e,"\n                                list.push($server)\n                            }\n                            return list\n                        }\n                      }"),r),s=i(a,t,m({source:n},c.default));case 2:case"end":return o.stop()}}),o)})))();case 3:return o.abrupt("return",s);case 4:case"end":return o.stop()}}),o)}))),function(e){return o.apply(this,arguments)})};var o,a},"Handle Duplicate Operator":function(e){var t=m(m({},{action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back"}),e),r=t.action,n=t.template,o=t.link,a=t.position;return{name:"Handle Duplicate Operator",func:function(e){if("delete"===r){var t={};return e.filter((function(e){return!t[e.name]&&(t[e.name]=!0,!0)}))}if("rename"===r){var s=n.split(" "),i={},u=0;e.forEach((function(e){void 0===i[e.name]?i[e.name]=1:i[e.name]++,u=Math.max(i[e.name].toString().length,u)}));var c={};return e.map((function(e){if(i[e.name]>1){void 0===c[e.name]&&(c[e.name]=1);for(var t="",r=c[e.name]++,n=0;r>0;)t=s[r%10]+t,r=parseInt(r/10),n++;for(;n++<u;)t=s[0]+t;"front"===a?e.name=t+o+e.name:"back"===a&&(e.name=e.name+o+t)}return e}))}}}},"Resolve Domain Operator":P};function F(e,t){return L.apply(this,arguments)}function L(){return(L=_(p().mark((function e(t,r){var n,o,a,i,u,c,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_$logical_115.FULL)(r.length,!0),e.prev=1,e.next=4,t.func(r);case 4:n=e.sent,e.next=25;break;case 7:return e.prev=7,e.t0=e.catch(1),a="",(i="".concat(null!==(o=e.t0.message)&&void 0!==o?o:e.t0)).includes("$server is not defined")?a="":(s.default.error("Cannot apply filter ".concat(t.name,"(function filter)! Reason: ").concat(e.t0)),a="\u6267\u884c function filter \u5931\u8d25 ".concat(i,"; ")),e.prev=12,e.next=15,t.nodeFunc(r);case 15:n=e.sent,e.next=25;break;case 18:throw e.prev=18,e.t1=e.catch(12),s.default.error("Cannot apply filter ".concat(t.name,"(shortcut script)! Reason: ").concat(e.t1)),c="",l="".concat(null!==(u=e.t1.message)&&void 0!==u?u:e.t1),a&&l===i?(c="",a="\u6267\u884c\u5931\u8d25 ".concat(i)):c="\u6267\u884c\u5feb\u6377\u8fc7\u6ee4\u811a\u672c \u5931\u8d25 ".concat(l),new Error("\u811a\u672c\u8fc7\u6ee4 ".concat(a).concat(c));case 25:return e.abrupt("return",r.filter((function(e,t){return n[t]})));case 26:case"end":return e.stop()}}),e,null,[[1,7],[12,18]])})))).apply(this,arguments)}function D(e,t){return N.apply(this,arguments)}function N(){return(N=_(p().mark((function e(t,r){var n,o,a,i,u,c,l,f,_,d,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=r,n=JSON.parse(JSON.stringify(p)),e.prev=1,e.next=4,t.func(n);case 4:(o=e.sent)&&(n=o),e.next=27;break;case 8:return e.prev=8,e.t0=e.catch(1),c="",(l="".concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0)).includes("$server is not defined")||l.includes("$content is not defined")||l.includes("$files is not defined")||null!==(i=n)&&void 0!==i&&i.$files||null!==(u=n)&&void 0!==u&&u.$content?c="":(s.default.error("Cannot apply operator ".concat(t.name,"(function operator)! Reason: ").concat(e.t0)),c="\u6267\u884c function operator \u5931\u8d25 ".concat(l,"; ")),e.prev=13,e.next=16,t.nodeFunc(n);case 16:(f=e.sent)&&(n=f),e.next=27;break;case 20:throw e.prev=20,e.t1=e.catch(13),s.default.error("Cannot apply operator ".concat(t.name,"(shortcut script)! Reason: ").concat(e.t1)),d="",h="".concat(null!==(_=e.t1.message)&&void 0!==_?_:e.t1),c&&h===l?(d="",c="\u6267\u884c\u5931\u8d25 ".concat(l)):d="\u6267\u884c\u5feb\u6377\u811a\u672c \u5931\u8d25 ".concat(h),new Error("\u811a\u672c\u64cd\u4f5c ".concat(c).concat(d));case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}var p}),e,null,[[1,8],[13,20]])})))).apply(this,arguments)}function B(){return(B=_(p().mark((function e(t,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t.name.indexOf("Filter")){e.next=4;break}return e.abrupt("return",F(t,r));case 4:if(-1===t.name.indexOf("Operator")){e.next=6;break}return e.abrupt("return",D(t,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return e.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]|\ud83c\udff4\u200d\u2620\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08/g,"").trim()}function M(e,t,r){var n={getFlowField:_$flow_110.getFlowField,getFlowHeaders:_$flow_110.getFlowHeaders,parseFlowHeaders:_$flow_110.parseFlowHeaders,flowTransfer:_$flow_110.flowTransfer,validCheck:_$flow_110.validCheck,getRmainingDays:_$flow_110.getRmainingDays};return s.default.env.isLoon?new Function("$arguments","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","scriptResourceCache","flowUtils","produceArtifact","".concat(t,"\n return ").concat(e))(r,s.default,a.default,$persistentStore,$httpClient,$notification,i.ProxyUtils,o.default,n,u.produceArtifact):new Function("$arguments","$substore","lodash","ProxyUtils","scriptResourceCache","flowUtils","produceArtifact","".concat(t,"\n return ").concat(e))(r,s.default,a.default,i.ProxyUtils,o.default,n,u.produceArtifact)}t.default=T})),_$package_66={name:"sub-store",version:"2.14.303",description:"Advanced Subscription Manager for QX, Loon, Surge, Stash and ShadowRocket.",main:"src/main.js",scripts:{preinstall:"npx only-allow pnpm",test:"gulp peggy && npx cross-env BABEL_ENV=test mocha src/test/**/*.spec.js --require @babel/register --recursive",serve:"node sub-store.min.js",start:"nodemon -w src -w package.json --exec babel-node src/main.js","dev:esbuild":"nodemon -w src -w package.json dev-esbuild.js","dev:run":"nodemon -w sub-store.min.js sub-store.min.js",build:"gulp",bundle:"node bundle.js",changelog:"conventional-changelog -p cli -i CHANGELOG.md -s"},author:"Peng-YM",license:"GPL-3.0",dependencies:{automerge:"1.0.1-preview.7","body-parser":"^1.19.0","connect-history-api-fallback":"^2.0.0",cron:"^3.1.6",express:"^4.17.1","http-proxy-middleware":"^2.0.6","js-base64":"^3.7.2",lodash:"^4.17.21",request:"^2.88.2",requests:"^0.3.0",semver:"^7.3.7","static-js-yaml":"^1.0.0",uuid:"^8.3.2"},devDependencies:{"@babel/core":"^7.18.0","@babel/node":"^7.17.10","@babel/preset-env":"^7.18.0","@babel/register":"^7.17.7","@types/gulp":"^4.0.9",axios:"^0.21.2","babel-plugin-relative-path-import":"^2.0.1",babelify:"^10.0.0","browser-pack-flat":"^3.4.2",browserify:"^17.0.0",chai:"^4.3.6",esbuild:"^0.19.8",eslint:"^8.16.0",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint-new":"^1.4.4","gulp-file":"^0.4.0","gulp-header":"^2.0.9","gulp-prettier":"^4.0.0","gulp-tap":"^2.0.0",mocha:"^10.0.0",nodemon:"^2.0.16",peggy:"^2.0.1",prettier:"2.6.2","prettier-plugin-sort-imports":"^1.6.1",tinyify:"^3.0.0"}},_$constants_67={};Object.defineProperty(_$constants_67,"__esModule",{value:!0}),_$constants_67.SUBS_KEY=_$constants_67.SETTINGS_KEY=_$constants_67.SCRIPT_RESOURCE_CACHE_KEY=_$constants_67.SCHEMA_VERSION_KEY=_$constants_67.RULES_KEY=_$constants_67.RESOURCE_CACHE_KEY=_$constants_67.MODULES_KEY=_$constants_67.HEADERS_RESOURCE_CACHE_KEY=_$constants_67.GIST_BACKUP_KEY=_$constants_67.GIST_BACKUP_FILE_NAME=_$constants_67.FILES_KEY=_$constants_67.CSR_EXPIRATION_TIME_KEY=_$constants_67.COLLECTIONS_KEY=_$constants_67.CHR_EXPIRATION_TIME_KEY=_$constants_67.CACHE_EXPIRATION_TIME_MS=_$constants_67.ARTIFACT_REPOSITORY_KEY=_$constants_67.ARTIFACTS_KEY=void 0,_$constants_67.SCHEMA_VERSION_KEY="schemaVersion",_$constants_67.SETTINGS_KEY="settings",_$constants_67.SUBS_KEY="subs",_$constants_67.COLLECTIONS_KEY="collections",_$constants_67.FILES_KEY="files",_$constants_67.MODULES_KEY="modules",_$constants_67.ARTIFACTS_KEY="artifacts",_$constants_67.RULES_KEY="rules",_$constants_67.GIST_BACKUP_KEY="Auto Generated Sub-Store Backup",_$constants_67.GIST_BACKUP_FILE_NAME="Sub-Store",_$constants_67.ARTIFACT_REPOSITORY_KEY="Sub-Store Artifacts Repository",_$constants_67.RESOURCE_CACHE_KEY="#sub-store-cached-resource",_$constants_67.HEADERS_RESOURCE_CACHE_KEY="#sub-store-cached-headers-resource",_$constants_67.CHR_EXPIRATION_TIME_KEY="#sub-store-chr-expiration-time",_$constants_67.CACHE_EXPIRATION_TIME_MS=36e5,_$constants_67.SCRIPT_RESOURCE_CACHE_KEY="#sub-store-cached-script-resource",_$constants_67.CSR_EXPIRATION_TIME_KEY="#sub-store-csr-expiration-time";var _$openApi_122={};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==_typeof(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){asyncGeneratorStep(a,n,o,s,i,"next",e)}function i(e){asyncGeneratorStep(a,n,o,s,i,"throw",e)}s(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$openApi_122,"__esModule",{value:!0}),_$openApi_122.ENV=ENV,_$openApi_122.HTTP=HTTP,_$openApi_122.OpenAPI=void 0;var isQX="undefined"!=typeof $task,isLoon="undefined"!=typeof $loon,isSurge="undefined"!=typeof $httpClient&&!isLoon,isNode=eval('typeof process !== "undefined"'),isStash="undefined"!=typeof $environment&&$environment["stash-version"],isShadowRocket="undefined"!=typeof $rocket,isEgern="object"==("undefined"==typeof egern?"undefined":_typeof(egern)),isLanceX="undefined"!=typeof $native,OpenAPI=function(){function OpenAPI(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled",debug=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,OpenAPI),this.name=name,this.debug=debug,this.http=HTTP(),this.env=ENV(),this.node=function(){if(isNode){var fs=eval("require('fs')");return{fs:fs}}return null}(),this.initCache();var delay=function(e,t){return new Promise((function(r){setTimeout(r.bind(null,t),e)}))},_ref;Promise.prototype.delay=(_ref=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this;case 2:return r=e.sent,e.next=5,delay(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return _ref.apply(this,arguments)})}return _createClass(OpenAPI,[{key:"initCache",value:function initCache(){if(isQX&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(isLoon||isSurge)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),isNode){var basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath="".concat(basePath,"/root.json");this.log("Root path: ".concat(rootPath)),this.node.fs.existsSync(rootPath)?this.root=JSON.parse(this.node.fs.readFileSync("".concat(rootPath))):(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"wx"}),this.root={});var fpath="".concat(basePath,"/").concat(this.name,".json");this.log("Data path: ".concat(fpath)),this.node.fs.existsSync(fpath)?this.cache=JSON.parse(this.node.fs.readFileSync("".concat(fpath))):(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"wx"}),this.cache={})}}},{key:"persistCache",value:function persistCache(){var data=JSON.stringify(this.cache,null,2);if(isQX&&$prefs.setValueForKey(data,this.name),(isLoon||isSurge)&&$persistentStore.write(data,this.name),isNode){var basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync("".concat(basePath,"/").concat(this.name,".json"),data,{flag:"w"},(function(e){return console.log(e)})),this.node.fs.writeFileSync("".concat(basePath,"/root.json"),JSON.stringify(this.root,null,2),{flag:"w"},(function(e){return console.log(e)}))}}},{key:"write",value:function(e,t){if(this.log("SET ".concat(t)),-1!==t.indexOf("#")){if(t=t.substr(1),isSurge||isLoon)return $persistentStore.write(e,t);if(isQX)return $prefs.setValueForKey(e,t);isNode&&(this.root[t]=e)}else this.cache[t]=e;this.persistCache()}},{key:"read",value:function(e){return this.log("READ ".concat(e)),-1===e.indexOf("#")?this.cache[e]:(e=e.substr(1),isSurge||isLoon?$persistentStore.read(e):isQX?$prefs.valueForKey(e):isNode?this.root[e]:void 0)}},{key:"delete",value:function(e){if(this.log("DELETE ".concat(e)),-1!==e.indexOf("#")){if(e=e.substr(1),isSurge||isLoon)return $persistentStore.write(null,e);if(isQX)return $prefs.removeValueForKey(e);isNode&&delete this.root[e]}else delete this.cache[e];this.persistCache()}},{key:"notify",value:function notify(title){var subtitle=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",content=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},openURL=options["open-url"],mediaURL=options["media-url"];if(isQX&&$notify(title,subtitle,content,options),isSurge&&$notification.post(title,subtitle,content+"".concat(mediaURL?"\n\u591a\u5a92\u4f53:"+mediaURL:""),{url:openURL}),isLoon){var opts={};openURL&&(opts.openUrl=openURL),mediaURL&&(opts.mediaUrl=mediaURL),"{}"===JSON.stringify(opts)?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,opts)}if(isNode){var content_=content+(openURL?"\n\u70b9\u51fb\u8df3\u8f6c: ".concat(openURL):"")+(mediaURL?"\n\u591a\u5a92\u4f53: ".concat(mediaURL):"");console.log("".concat(title,"\n").concat(subtitle,"\n").concat(content_,"\n\n"));var push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push){var url=push.replace("[\u63a8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63a8\u9001\u5185\u5bb9]",encodeURIComponent([subtitle,content_].map((function(e){return e})).join("\n"))),$http=HTTP();$http.get({url:url}).then((function(e){console.log("[Push Service] URL: ".concat(url,"\nRES: ").concat(e.statusCode," ").concat(e.body))})).catch((function(e){console.log("[Push Service] URL: ".concat(url,"\nERROR: ").concat(e))}))}}}},{key:"log",value:function(e){this.debug&&console.log("[".concat(this.name,"] LOG: ").concat(e))}},{key:"info",value:function(e){console.log("[".concat(this.name,"] INFO: ").concat(e))}},{key:"error",value:function(e){console.log("[".concat(this.name,"] ERROR: ").concat(e))}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"done",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};isQX||isLoon||isSurge?$done(e):isNode&&"undefined"!=typeof $context&&($context.headers=e.headers,$context.statusCode=e.statusCode,$context.body=e.body)}}]),OpenAPI}();function ENV(){return{isQX:isQX,isLoon:isLoon,isSurge:isSurge,isNode:isNode,isStash:isStash,isShadowRocket:isShadowRocket,isEgern:isEgern,isLanceX:isLanceX}}function HTTP(){var defaultOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseURL:""},_ENV=ENV(),isQX=_ENV.isQX,isLoon=_ENV.isLoon,isSurge=_ENV.isSurge,isNode=_ENV.isNode,methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options="string"==typeof options?{url:options}:options;var baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options=_objectSpread(_objectSpread({},defaultOptions),options);var timeout=options.timeout,events=_objectSpread(_objectSpread({},{onRequest:function(){},onResponse:function(e){return e},onTimeout:function(){}}),options.events),worker,timeoutid;if(events.onRequest(method,options),options.node&&isSurge){var build=$environment["surge-build"];build&&parseInt(build)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}isQX?worker=$task.fetch({method:method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):(isLoon||isSurge||isNode)&&(worker=new Promise((function(resolve,reject){var request=isNode?eval("require('request')"):$httpClient,opts=JSON.parse(JSON.stringify(options));if(!isNode&&opts.timeout){opts.timeout++;var unit="ms";(isSurge||isStash||isShadowRocket)&&(opts.timeout=Math.ceil(opts.timeout/1e3),unit="s")}request[method.toLowerCase()](opts,(function(e,t,r){e?reject(e):resolve({statusCode:t.status||t.statusCode,headers:t.headers,body:r})}))})));var timer=timeout?new Promise((function(e,t){timeoutid=setTimeout((function(){return events.onTimeout(),t("".concat(method," URL: ").concat(options.url," exceeds the timeout ").concat(timeout," ms"))}),timeout)})):null;return(timer?Promise.race([timer,worker]).then((function(e){return"undefined"!=typeof clearTimeout&&clearTimeout(timeoutid),e})):worker).then((function(e){return events.onResponse(e)}))}var http={};return methods.forEach((function(e){return http[e.toLowerCase()]=function(t){return send(e,t)}})),http}_$openApi_122.OpenAPI=OpenAPI;var _$app_68={};Object.defineProperty(_$app_68,"__esModule",{value:!0}),_$app_68.default=void 0;var _default=new _$openApi_122.OpenAPI("sub-store");_$app_68.default=_default;var _$migration_116={};Object.defineProperty(_$migration_116,"__esModule",{value:!0}),_$migration_116.default=function(){var e;(e=_app.default.read(_$constants_67.SCHEMA_VERSION_KEY))||function(){_app.default.info("Start migrating...");var e=_app.default.read(_$constants_67.SUBS_KEY)||{},t=Object.values(e).map((function(e){return e.source=e.source||"remote",u(e),c(e),e}));_app.default.write(t,_$constants_67.SUBS_KEY);var r=_app.default.read(_$constants_67.COLLECTIONS_KEY)||{},n=Object.values(r).map((function(e){return delete e.ua,u(e),c(e),e}));_app.default.write(n,_$constants_67.COLLECTIONS_KEY);var o=_app.default.read(_$constants_67.ARTIFACTS_KEY)||{},a=Object.values(o);_app.default.write(a,_$constants_67.ARTIFACTS_KEY);var s=_app.default.read(_$constants_67.RULES_KEY)||{},i=Object.values(s);function u(e){var t=e["display-name"];t&&(e.displayName=t,delete e["display-name"])}function c(e){var t=e.process;if(t&&0!==t.length){var r,n=[],o={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,void 0):void 0}}(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.type)if("Useless Filter"===s.type)o.args.useless="ENABLED";else if("Set Property Operator"===s.type){var i=s.args,u=i.key,c=i.value;switch(u){case"udp":o.args.udp=c?"ENABLED":"DISABLED";break;case"tfo":o.args.tfo=c?"ENABLED":"DISABLED";break;case"skip-cert-verify":o.args.scert=c?"ENABLED":"DISABLED";break;case"aead":o.args["vmess aead"]=c?"ENABLED":"DISABLED"}}else if(-1!==s.type.indexOf("Keyword"));else if("Flag Operator"===s.type){var l=void 0===s.args||s.args;s.args={mode:l?"add":"remove"},n.push(s)}else n.push(s)}}catch(p){a.e(p)}finally{a.f()}n.unshift(o),e.process=n}}_app.default.write(i,_$constants_67.RULES_KEY),delete _app.default.cache.builtin,_app.default.info("Migration complete!")}(),"2.0"!==e&&_app.default.write("2.0",_$constants_67.SCHEMA_VERSION_KEY)};var obj,_app=(obj=_$app_68)&&obj.__esModule?obj:{default:obj};function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _$express_120={};function ___classCallCheck_120(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ___defineProperties_120(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_120(e,t,r){return t&&___defineProperties_120(e.prototype,t),r&&___defineProperties_120(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function express(_ref){var $=_ref.substore,port=_ref.port,host=_ref.host,_ENV=(0,_$openApi_122.ENV)(),isNode=_ENV.isNode,DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"};if(isNode){var express_=eval('require("express")'),bodyParser=eval('require("body-parser")'),_app=express_();return _app.use(bodyParser.json({verify:rawBodySaver,limit:"1mb"})),_app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),_app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),_app.use((function(e,t,r){t.set(DEFAULT_HEADERS),r()})),_app.start=function(){var e=_app.listen(port,host,(function(){var t=e.address(),r=t.address,n=t.port;$.info("[BACKEND] ".concat(r,":").concat(n))}))},_app}var handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.method,o=t.url,a=t.headers,s=t.body;a=formatHeaders(a),/json/i.test(a["content-type"])&&(s=JSON.parse(s)),n=n.toUpperCase();var i,u=extractURL(o),c=u.path,l=u.query,p=null,f=0;for(i=r;i<handlers.length;i++)if("ALL"===handlers[i].method||n===handlers[i].method){var _=handlers[i].pattern;patternMatched(_,c)&&_.split("/").length>f&&(p=handlers[i],f=_.split("/").length)}if(p){var d=function(){e(n,o,i)},h={method:n,url:o,path:c,query:l,params:extractPathParams(p.pattern,c),headers:a,body:s},y=Response(),v=p.callback,m=function(e){y.status(500).json({status:"failed",message:"Internal Server Error: ".concat(e)})};if("AsyncFunction"===v.constructor.name)v(h,y,d).catch(m);else try{v(h,y,d)}catch(g){m(g)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach((function(e){app[e.toLowerCase()]=function(t,r){handlers.push({method:e,pattern:t,callback:r})}})),app.route=function(e){var t={};return METHODS_NAMES.forEach((function(r){t[r.toLowerCase()]=function(n){return handlers.push({method:r,pattern:e,callback:n}),t}})),t},app.start=function(){dispatch($request)},app;function rawBodySaver(e,t,r,n){r&&r.length&&(e.rawBody=r.toString(n||"utf8"))}function Response(){var e=200,t=(0,_$openApi_122.ENV)(),r=t.isQX,n=t.isLoon,o=t.isSurge,a=DEFAULT_HEADERS,s={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new(function(){function t(){___classCallCheck_120(this,t)}return ___createClass_120(t,[{key:"status",value:function(t){return e=t,this}},{key:"send",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i={status:r?s[e]:e,body:t,headers:a};r?$done(i):(n||o)&&$done({response:i})}},{key:"end",value:function(){this.send()}},{key:"html",value:function(e){this.set("Content-Type","text/html;charset=UTF-8"),this.send(e)}},{key:"json",value:function(e){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(e))}},{key:"set",value:function(e,t){return a[e]=t,this}}]),t}())}}function formatHeaders(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];t[o.toLowerCase()]=e[o]}return t}function patternMatched(e,t){if(e instanceof RegExp&&e.test(t))return!0;if("/"===e)return!0;if(-1===e.indexOf(":")){for(var r=t.split("/"),n=e.split("/"),o=0;o<n.length;o++)if(r[o]!==n[o])return!1;return!0}return!!extractPathParams(e,t)}function extractURL(e){var t=(e.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",r={};if(-1!==e.indexOf("?"))for(var n=e.slice(e.indexOf("?")+1).split("&"),o=0;o<n.length;o++){var a=n[o].split("=");r[a[0]]=a[1]}return{path:t,query:r}}function extractPathParams(e,t){if(-1===e.indexOf(":"))return null;for(var r={},n=0,o=0;n<e.length;n++,o++)if(":"===e[n]){for(var a=[],s=[];"/"!==e[++n]&&n<e.length;)a.push(e[n]);for(;"/"!==t[o]&&o<t.length;)s.push(t[o++]);r[a.join("")]=s.join("")}else if(e[n]!==t[o])return null;return r}Object.defineProperty(_$express_120,"__esModule",{value:!0}),_$express_120.default=express;var _$database_107={};function findIndexByName(e,t){return e.findIndex((function(e){return e.name===t}))}Object.defineProperty(_$database_107,"__esModule",{value:!0}),_$database_107.deleteByName=function(e,t){var r=findIndexByName(e,t);e.splice(r,1)},_$database_107.findByName=function(e,t){return e.find((function(e){return e.name===t}))},_$database_107.findIndexByName=findIndexByName,_$database_107.updateByName=function(e,t,r){e[findIndexByName(e,t)]=r};var _$response_102={};Object.defineProperty(_$response_102,"__esModule",{value:!0}),_$response_102.failed=function(e,t,r){e.status(r||500).json({status:"failed",error:{code:t.code,type:t.type,message:t.message,details:t.details}})},_$response_102.success=function(e,t,r){e.status(r||200).json({status:"success",data:t})};var _$errors_98={};function ___typeof_98(e){return(___typeof_98="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===___typeof_98(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ___defineProperties_98(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_98(e,t,r){return t&&___defineProperties_98(e.prototype,t),r&&___defineProperties_98(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ___classCallCheck_98(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(_$errors_98,"__esModule",{value:!0}),_$errors_98.ResourceNotFoundError=_$errors_98.RequestInvalidError=_$errors_98.NetworkError=_$errors_98.InternalServerError=void 0;var BaseError=___createClass_98((function e(t,r,n){___classCallCheck_98(this,e),this.code=t,this.message=r,this.details=n})),InternalServerError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var a;return ___classCallCheck_98(this,r),(a=t.call(this,e,n,o)).type="InternalServerError",a}return ___createClass_98(r)}();_$errors_98.InternalServerError=InternalServerError;var RequestInvalidError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var a;return ___classCallCheck_98(this,r),(a=t.call(this,e,n,o)).type="RequestInvalidError",a}return ___createClass_98(r)}();_$errors_98.RequestInvalidError=RequestInvalidError;var ResourceNotFoundError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var a;return ___classCallCheck_98(this,r),(a=t.call(this,e,n,o)).type="ResourceNotFoundError",a}return ___createClass_98(r)}();_$errors_98.ResourceNotFoundError=ResourceNotFoundError;var NetworkError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var a;return ___classCallCheck_98(this,r),(a=t.call(this,e,n,o)).type="NetworkError",a}return ___createClass_98(r)}();_$errors_98.NetworkError=NetworkError;var _$collections_97={};Object.defineProperty(_$collections_97,"__esModule",{value:!0}),_$collections_97.default=function(e){___app_97.default.read(_$constants_67.COLLECTIONS_KEY)||___app_97.default.write({},_$constants_67.COLLECTIONS_KEY),e.route("/api/collection/:name").get(getCollection).patch(updateCollection).delete(deleteCollection),e.route("/api/collections").get(getAllCollections).post(createCollection).put(replaceCollection)};var __obj_97,___app_97=(__obj_97=_$app_68)&&__obj_97.__esModule?__obj_97:{default:__obj_97};function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_97(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_97(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_97(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __ownKeys_97(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_97(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_97(Object(r),!0).forEach((function(t){___defineProperty_97(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_97(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_97(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function createCollection(e,t){var r=e.body;if(___app_97.default.info("\u6b63\u5728\u521b\u5efa\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r.name)),/\//.test(r.name))(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("INVALID_NAME","Collection ".concat(r.name," is invalid")));else{var n=___app_97.default.read(_$constants_67.COLLECTIONS_KEY);(0,_$database_107.findByName)(n,r.name)?(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY","Collection ".concat(r.name," already exists."))):(n.push(r),___app_97.default.write(n,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t,r,201))}}function getCollection(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=___app_97.default.read(_$constants_67.COLLECTIONS_KEY),o=(0,_$database_107.findByName)(n,r);o?(0,_$response_102.success)(t,o):(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("SUBSCRIPTION_NOT_FOUND","Collection ".concat(r," does not exist"),404))}function updateCollection(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=e.body,o=___app_97.default.read(_$constants_67.COLLECTIONS_KEY),a=(0,_$database_107.findByName)(o,r);if(a){var s=___objectSpread_97(___objectSpread_97({},a),n);if(___app_97.default.info("\u6b63\u5728\u66f4\u65b0\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r,"...")),r!==s.name){var i,u=___app_97.default.read(_$constants_67.ARTIFACTS_KEY)||[],c=_createForOfIteratorHelper(u);try{for(c.s();!(i=c.n()).done;){var l=i.value;"collection"===l.type&&l.source===a.name&&(l.source=s.name)}}catch(p){c.e(p)}finally{c.f()}___app_97.default.write(u,_$constants_67.ARTIFACTS_KEY)}(0,_$database_107.updateByName)(o,r,s),___app_97.default.write(o,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t,s)}else(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","Collection ".concat(r," does not exist!")),404)}function deleteCollection(e,t){var r=e.params.name;r=decodeURIComponent(r),___app_97.default.info("\u6b63\u5728\u5220\u9664\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r));var n=___app_97.default.read(_$constants_67.COLLECTIONS_KEY);(0,_$database_107.deleteByName)(n,r),___app_97.default.write(n,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t)}function getAllCollections(e,t){var r=___app_97.default.read(_$constants_67.COLLECTIONS_KEY);(0,_$response_102.success)(t,r)}function replaceCollection(e,t){var r=e.body;___app_97.default.write(r,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t)}var _$utils_114={};Object.defineProperty(_$utils_114,"__esModule",{value:!0}),_$utils_114.getIfNotBlank=function(e,t){return isNotBlank(e)?e:t},_$utils_114.getIfPresent=function(e,t){return isPresent(e)?e:t},_$utils_114.getPolicyDescriptor=function(e){return e?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(e)?{"policy-descriptor":e}:{policy:e}:{}},_$utils_114.isIPv4=function(e){return IPV4_REGEX.test(e)},_$utils_114.isIPv6=function(e){return IPV6_REGEX.test(e)},_$utils_114.isNotBlank=isNotBlank,_$utils_114.isPresent=isPresent,_$utils_114.isValidPortNumber=function(e){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(e)},_$utils_114.utf8ArrayToStr=void 0;var IPV4_REGEX=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,IPV6_REGEX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function isNotBlank(e){return"string"==typeof e&&e.trim().length>0}function isPresent(e){return null!=e}var charCache,charFromCodePt,result,utf8ArrayToStr="undefined"!=typeof TextDecoder?function(e){return(new TextDecoder).decode(new Uint8Array(e))}:(charCache=new Array(128),charFromCodePt=String.fromCodePoint||String.fromCharCode,result=[],function(e){var t,r,n=e.length;result.length=0;for(var o=0;o<n;)(r=e[o++])<=127?t=r:r<=223?t=(31&r)<<6|63&e[o++]:r<=239?t=(15&r)<<12|(63&e[o++])<<6|63&e[o++]:String.fromCodePoint?t=(7&r)<<18|(63&e[o++])<<12|(63&e[o++])<<6|63&e[o++]:(t=63,o+=3),result.push(charCache[t]||(charCache[t]=charFromCodePt(t)));return result.join("")});_$utils_114.utf8ArrayToStr=utf8ArrayToStr;var _$headersResourceCache_113={};Object.defineProperty(_$headersResourceCache_113,"__esModule",{value:!0}),_$headersResourceCache_113.default=void 0;var __obj_113,___app_113=(__obj_113=_$app_68)&&__obj_113.__esModule?__obj_113:{default:__obj_113};function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_113(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_113(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_113(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_113(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_113=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=function(){___app_113.default.read(_$constants_67.CHR_EXPIRATION_TIME_KEY)||___app_113.default.write("6e4",_$constants_67.CHR_EXPIRATION_TIME_KEY);var e=6e4;if(___app_113.default.env.isLoon){var t={"1\u5206\u949f":6e4,"5\u5206\u949f":3e5,"10\u5206\u949f":6e5,"30\u5206\u949f":18e5,"1\u5c0f\u65f6":36e5,"2\u5c0f\u65f6":72e5,"3\u5c0f\u65f6":108e5,"6\u5c0f\u65f6":216e5,"12\u5c0f\u65f6":432e5,"24\u5c0f\u65f6":864e5,"48\u5c0f\u65f6":1728e5,"72\u5c0f\u65f6":2592e5,"\u53c2\u6570\u4f20\u5165":"readcachets"},r=___app_113.default.read("#\u54cd\u5e94\u5934\u7f13\u5b58\u6709\u6548\u671f");return r in t&&"readcachets"===(e=t[r])&&(e=r),e}return ___app_113.default.read(_$constants_67.CHR_EXPIRATION_TIME_KEY)}(),___app_113.default.read(_$constants_67.HEADERS_RESOURCE_CACHE_KEY)||___app_113.default.write("{}",_$constants_67.HEADERS_RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_113.default.read(_$constants_67.HEADERS_RESOURCE_CACHE_KEY))}catch(r){var t;___app_113.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_67.HEADERS_RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:r)),this.resourceCache={},___app_113.default.write("{}",_$constants_67.HEADERS_RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=_slicedToArray(r,2),o=n[0],a=n[1];a.time||(delete e.resourceCache[o],___app_113.default.delete("#".concat(o)),t=!0),(new Date).getTime()-a.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_113.default.write(JSON.stringify(this.resourceCache),_$constants_67.HEADERS_RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"gettime",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].time:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_113(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());_$headersResourceCache_113.default=___default_113;var _$flow_110={};Object.defineProperty(_$flow_110,"__esModule",{value:!0}),_$flow_110.flowTransfer=flowTransfer,_$flow_110.getFlowField=getFlowField,_$flow_110.getFlowHeaders=function(e,t,r,n){return _getFlowHeaders.apply(this,arguments)},_$flow_110.getRmainingDays=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t=e.resetDay,r=e.startDate,n=e.cycleDays;if(["string","number"].includes(___typeof_110(e))&&(t=e),r&&n){if(n=parseInt(n),isNaN(n)||n<=0)throw new Error("\u91cd\u7f6e\u5468\u671f\u5e94\u4e3a\u6b63\u6574\u6570");if(!r||!Date.parse(r))throw new Error("\u5f00\u59cb\u65e5\u671f\u4e0d\u5408\u6cd5");var o=new Date(r),a=new Date;if(o.setHours(0,0,0,0),a.setHours(0,0,0,0),o.getTime()>a.getTime())throw new Error("\u5f00\u59cb\u65e5\u671f\u5e94\u65e9\u4e8e\u73b0\u5728");var s=new Date(r);for(s.setDate(s.getDate()+n);s<a;)s.setDate(s.getDate()+n);s.setHours(0,0,0,0);var i=s.getTime()-a.getTime(),u=Math.ceil(i/864e5);return u}if(!t)return;if(t=parseInt(t),isNaN(t)||t<=0||t>31)throw new Error("\u6708\u91cd\u7f6e\u65e5\u5e94\u4e3a 1-31 \u4e4b\u95f4\u7684\u6574\u6570");var c=new Date,l=c.getDate(),p=c.getMonth(),f=c.getFullYear();return(t>l?0:new Date(f,p+1,0).getDate())-l+t}catch(d){var _;___app_110.default.error("getRmainingDays failed: ".concat(null!==(_=d.message)&&void 0!==_?_:d))}},_$flow_110.parseFlowHeaders=function(e){if(e){var t=e.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),r=Number(t[1]+t[2]),n=e.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),o=Number(n[1]+n[2]),a=e.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),s=Number(a[1]+a[2]),i=e.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/);return{expires:i?Number(i[1]+i[2]):void 0,total:s,usage:{upload:r,download:o}}}},_$flow_110.validCheck=function(e){if(!e)throw new Error("\u6ca1\u6709\u6d41\u91cf\u4fe1\u606f");if(null!=e&&e.expires&&1e3*e.expires<Date.now()){var t=new Date(1e3*e.expires).toLocaleDateString();throw new Error("\u8ba2\u9605\u5df2\u8fc7\u671f: ".concat(t))}if(null!=e&&e.total){var r,n,o=(null===(r=e.usage)||void 0===r?void 0:r.upload)||0,a=(null===(n=e.usage)||void 0===n?void 0:n.download)||0;if(e.total-o-a<0){var s=o+a,i=flowTransfer(Math.abs(s));i.value=s<0?"-"+i.value:i.value;var u=flowTransfer(e.total);throw new Error("\u6d41\u91cf\u5df2\u7528\u5b8c: ".concat(i.value," ").concat(i.unit," / ").concat(u.value," ").concat(u.unit))}}};var ___app_110=_interopRequireDefault(_$app_68),_headersResourceCache=_interopRequireDefault(_$headersResourceCache_113);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_110(){___regeneratorRuntime_110=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_110(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_110(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_110(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_110(Object(r),!0).forEach((function(t){___defineProperty_110(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_110(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_110(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___createForOfIteratorHelper_110(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_110(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_110(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_110(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___typeof_110(e){return(___typeof_110="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function __asyncGeneratorStep_110(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function getFlowField(e){return e[Object.keys(e).filter((function(e){return/SUBSCRIPTION-USERINFO/i.test(e)}))[0]]}function _getFlowHeaders(){var e;return e=___regeneratorRuntime_110().mark((function e(t,r,n,o){var a,s,i,u,c,l,p,f,_,d,h,y,v,m,g,b,w,A,E,x,S,$,C,k,P,O,I,R;return ___regeneratorRuntime_110().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={},c=(i=t).split("#"),i=i.split("#")[0],c.length>1)try{u=JSON.parse(decodeURIComponent(c[1]))}catch(j){l=___createForOfIteratorHelper_110(c[1].split("&"));try{for(l.s();!(p=l.n()).done;)f=p.value,_=f.split("=")[0],d=f.split("=")[1],u[_]=null==d||""===d||decodeURIComponent(d)}catch(T){l.e(T)}finally{l.f()}}if(null===(a=u)||void 0===a||!a.noFlow){e.next=7;break}return e.abrupt("return");case 7:if(h=(0,_$openApi_122.ENV)(),y=h.isStash,v=h.isLoon,m=h.isShadowRocket,g=h.isQX,b=_headersResourceCache.default.get(i),null!==(s=u)&&void 0!==s&&s.noCache||!b){e.next=13;break}w=b,e.next=37;break;case 13:return A=___app_110.default.read(_$constants_67.SETTINGS_KEY),E=A.defaultFlowUserAgent,x=A.defaultTimeout,S=r||E||"Quantumult%20X/1.0.30 (iPhone14,2; iOS 15.6)",$=n||x,C=(0,_$openApi_122.HTTP)(),e.prev=17,___app_110.default.info("\u4f7f\u7528 HEAD \u65b9\u6cd5\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f: ".concat(i,", User-Agent: ").concat(S||"")),e.next=21,C.head(___objectSpread_110(___objectSpread_110(___objectSpread_110(___objectSpread_110({url:i.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))[0],headers:___objectSpread_110(___objectSpread_110({"User-Agent":S},y&&o?{"X-Stash-Selected-Proxy":encodeURIComponent(o)}:{}),m&&o?{"X-Surge-Policy":o}:{}),timeout:$},o?{proxy:o}:{}),v&&o?{node:o}:{}),g&&o?{opts:{policy:o}}:{}),o?(0,_$utils_114.getPolicyDescriptor)(o):{}));case 21:k=e.sent,P=k.headers,w=getFlowField(P),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(17),___app_110.default.error("\u4f7f\u7528 HEAD \u65b9\u6cd5\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f\u5931\u8d25: ".concat(i,", User-Agent: ").concat(S||"",": ").concat(null!==(O=e.t0.message)&&void 0!==O?O:e.t0));case 29:if(w){e.next=36;break}return ___app_110.default.info("\u4f7f\u7528 GET \u65b9\u6cd5\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f: ".concat(i,", User-Agent: ").concat(S||"")),e.next=33,C.get({url:i.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))[0],headers:{"User-Agent":S},timeout:$});case 33:I=e.sent,R=I.headers,w=getFlowField(R);case 36:w&&_headersResourceCache.default.set(i,w);case 37:return e.abrupt("return",w);case 38:case"end":return e.stop()}}),e,null,[[17,26]])})),(_getFlowHeaders=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_110(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_110(a,n,o,s,i,"throw",e)}s(void 0)}))}).apply(this,arguments)}function flowTransfer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=r.indexOf(t);return e<1024||n===r.length-1?{value:e.toFixed(1),unit:t}:flowTransfer(e/1024,r[++n])}var _$subscriptions_105={};function ___typeof_105(e){return(___typeof_105="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$subscriptions_105,"__esModule",{value:!0}),_$subscriptions_105.default=function(e){e.get("/api/sub/flow/:name",getFlowInfo),e.route("/api/sub/:name").get(getSubscription).patch(updateSubscription).delete(deleteSubscription),e.route("/api/subs").get(getAllSubscriptions).post(createSubscription).put(replaceSubscriptions)};var __obj_105,___app_105=(__obj_105=_$app_68)&&__obj_105.__esModule?__obj_105:{default:__obj_105};function ___regeneratorRuntime_105(){___regeneratorRuntime_105=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_105(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function ___createForOfIteratorHelper_105(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_105(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_105(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_105(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __ownKeys_105(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_105(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_105(Object(r),!0).forEach((function(t){___defineProperty_105(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_105(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_105(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function __asyncGeneratorStep_105(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function getFlowInfo(e,t){return _getFlowInfo.apply(this,arguments)}function _getFlowInfo(){var e;return e=___regeneratorRuntime_105().mark((function e(t,r){var n,o,a,s,i,u,c,l,p,f,_,d,h;return ___regeneratorRuntime_105().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.name,n=decodeURIComponent(n),o=___app_105.default.read(_$constants_67.SUBS_KEY),a=(0,_$database_107.findByName)(o,n)){e.next=7;break}return(0,_$response_102.failed)(r,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","Subscription ".concat(n," does not exist!")),404),e.abrupt("return");case 7:if("local"!==a.source||["localFirst","remoteFirst"].includes(a.mergeSources)){e.next=10;break}return a.subUserinfo?(0,_$response_102.success)(r,___objectSpread_105({},(0,_$flow_110.parseFlowHeaders)(a.subUserinfo))):(0,_$response_102.failed)(r,new _$errors_98.RequestInvalidError("NO_FLOW_INFO","N/A","Local subscription ".concat(n," has no flow information!"))),e.abrupt("return");case 10:if(e.prev=10,i=null===(s="".concat(a.url).split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})))||void 0===s?void 0:s[0],u={},c=i.split("#"),i=i.split("#")[0],c.length>1)try{u=JSON.parse(decodeURIComponent(c[1]))}catch(y){l=___createForOfIteratorHelper_105(c[1].split("&"));try{for(l.s();!(p=l.n()).done;)f=p.value,_=f.split("=")[0],d=f.split("=")[1],u[_]=null==d||""===d||decodeURIComponent(d)}catch(v){l.e(v)}finally{l.f()}}if(!u.noFlow){e.next=19;break}return(0,_$response_102.failed)(r,new _$errors_98.RequestInvalidError("NO_FLOW_INFO","N/A","Subscription ".concat(n,": noFlow"))),e.abrupt("return");case 19:if(!a.subUserinfo){e.next=23;break}(0,_$response_102.success)(r,___objectSpread_105(___objectSpread_105({},(0,_$flow_110.parseFlowHeaders)(a.subUserinfo)),{},{remainingDays:(0,_$flow_110.getRmainingDays)({resetDay:u.resetDay,startDate:u.startDate,cycleDays:u.cycleDays})})),e.next=30;break;case 23:return e.next=25,(0,_$flow_110.getFlowHeaders)(i,u.flowUserAgent,void 0,a.proxy);case 25:if(h=e.sent){e.next=29;break}return(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("NO_FLOW_INFO","No flow info","Failed to fetch flow headers")),e.abrupt("return");case 29:(0,_$response_102.success)(r,___objectSpread_105(___objectSpread_105({},(0,_$flow_110.parseFlowHeaders)(h)),{},{remainingDays:(0,_$flow_110.getRmainingDays)({resetDay:u.resetDay,startDate:u.startDate,cycleDays:u.cycleDays})}));case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(10),(0,_$response_102.failed)(r,new _$errors_98.NetworkError("URL_NOT_ACCESSIBLE","The URL for subscription ".concat(n," is inaccessible.")));case 35:case"end":return e.stop()}}),e,null,[[10,32]])})),(_getFlowInfo=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_105(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_105(a,n,o,s,i,"throw",e)}s(void 0)}))}).apply(this,arguments)}function createSubscription(e,t){var r=e.body;if(___app_105.default.info("\u6b63\u5728\u521b\u5efa\u8ba2\u9605\uff1a ".concat(r.name)),/\//.test(r.name))(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("INVALID_NAME","Subscription ".concat(r.name," is invalid")));else{var n=___app_105.default.read(_$constants_67.SUBS_KEY);(0,_$database_107.findByName)(n,r.name)?(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY","Subscription ".concat(r.name," already exists."))):(n.push(r),___app_105.default.write(n,_$constants_67.SUBS_KEY),(0,_$response_102.success)(t,r,201))}}function getSubscription(e,t){var r=e.params.name,n=e.query.raw;r=decodeURIComponent(r);var o=___app_105.default.read(_$constants_67.SUBS_KEY),a=(0,_$database_107.findByName)(o,r);a?n?t.set("content-type","application/json").set("content-disposition",'attachment; filename="'.concat(encodeURIComponent(r),'.json"')).send(JSON.stringify(a)):(0,_$response_102.success)(t,a):(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("SUBSCRIPTION_NOT_FOUND","Subscription ".concat(r," does not exist"),404))}function updateSubscription(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=e.body,o=___app_105.default.read(_$constants_67.SUBS_KEY),a=(0,_$database_107.findByName)(o,r);if(a){var s=___objectSpread_105(___objectSpread_105({},a),n);if(___app_105.default.info("\u6b63\u5728\u66f4\u65b0\u8ba2\u9605\uff1a ".concat(r)),r!==n.name){var i,u=___app_105.default.read(_$constants_67.COLLECTIONS_KEY)||[],c=___createForOfIteratorHelper_105(u);try{for(c.s();!(i=c.n()).done;){var l=i.value,p=l.subscriptions.indexOf(r);-1!==p&&(l.subscriptions[p]=n.name)}}catch(y){c.e(y)}finally{c.f()}var f,_=___app_105.default.read(_$constants_67.ARTIFACTS_KEY)||[],d=___createForOfIteratorHelper_105(_);try{for(d.s();!(f=d.n()).done;){var h=f.value;"subscription"===h.type&&h.source==r&&(h.source=n.name)}}catch(y){d.e(y)}finally{d.f()}___app_105.default.write(u,_$constants_67.COLLECTIONS_KEY),___app_105.default.write(_,_$constants_67.ARTIFACTS_KEY)}(0,_$database_107.updateByName)(o,r,s),___app_105.default.write(o,_$constants_67.SUBS_KEY),(0,_$response_102.success)(t,s)}else(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","Subscription ".concat(r," does not exist!")),404)}function deleteSubscription(e,t){var r=e.params.name;r=decodeURIComponent(r),___app_105.default.info("\u5220\u9664\u8ba2\u9605\uff1a".concat(r,"..."));var n=___app_105.default.read(_$constants_67.SUBS_KEY);(0,_$database_107.deleteByName)(n,r),___app_105.default.write(n,_$constants_67.SUBS_KEY);var o,a=___app_105.default.read(_$constants_67.COLLECTIONS_KEY),s=___createForOfIteratorHelper_105(a);try{for(s.s();!(o=s.n()).done;){var i=o.value;i.subscriptions=i.subscriptions.filter((function(e){return e!==r}))}}catch(u){s.e(u)}finally{s.f()}___app_105.default.write(a,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t)}function getAllSubscriptions(e,t){var r=___app_105.default.read(_$constants_67.SUBS_KEY);(0,_$response_102.success)(t,r)}function replaceSubscriptions(e,t){var r=e.body;___app_105.default.write(r,_$constants_67.SUBS_KEY),(0,_$response_102.success)(t)}___app_105.default.read(_$constants_67.SUBS_KEY)||___app_105.default.write({},_$constants_67.SUBS_KEY);var _$gist_112={};function ___typeof_112(e){return(___typeof_112="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ___slicedToArray_112(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||_unsupportedIterableToArray(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___regeneratorRuntime_112(){___regeneratorRuntime_112=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_112(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function ___createForOfIteratorHelper_112(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_112(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_112(e,t):void 0}}function ___arrayLikeToArray_112(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __asyncGeneratorStep_112(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_112(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_112(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_112(a,n,o,s,i,"throw",e)}s(void 0)}))}}function __ownKeys_112(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_112(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_112(Object(r),!0).forEach((function(t){___defineProperty_112(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_112(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_112(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___defineProperties_112(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(_$gist_112,"__esModule",{value:!0}),_$gist_112.default=void 0;var Gist=function(){function e(t){var r=t.token,n=t.key,o=t.syncPlatform;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"gitlab"===o?(this.headers={"PRIVATE-TOKEN":"".concat(r),"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=(0,_$openApi_122.HTTP)({baseURL:"https://gitlab.com/api/v4",headers:___objectSpread_112({},this.headers),events:{onResponse:function(e){if(/^[45]/.test(String(e.statusCode))){var t,r,n=JSON.parse(e.body);return Promise.reject("ERROR: ".concat(null!==(t=null===(r=n.message)||void 0===r?void 0:r.error)&&void 0!==t?t:n.message))}return e}}})):(this.headers={Authorization:"token ".concat(r),"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=(0,_$openApi_122.HTTP)({baseURL:"https://api.github.com",headers:___objectSpread_112({},this.headers),events:{onResponse:function(e){return/^[45]/.test(String(e.statusCode))?Promise.reject("ERROR: ".concat(JSON.parse(e.body).message)):e}}})),this.key=n,this.syncPlatform=o}var t,r,n,o;return t=e,(r=[{key:"locate",value:(o=___asyncToGenerator_112(___regeneratorRuntime_112().mark((function e(){var t=this;return ___regeneratorRuntime_112().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gitlab"!==this.syncPlatform){e.next=4;break}return e.abrupt("return",this.http.get("/snippets").then((function(e){var r,n=___createForOfIteratorHelper_112(JSON.parse(e.body));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.title===t.key)return o}}catch(a){n.e(a)}finally{n.f()}})));case 4:return e.abrupt("return",this.http.get("/gists").then((function(e){var r,n=___createForOfIteratorHelper_112(JSON.parse(e.body));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.description===t.key)return o}}catch(a){n.e(a)}finally{n.f()}})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"upload",value:(n=___asyncToGenerator_112(___regeneratorRuntime_112().mark((function e(t){var r,n,o,a;return ___regeneratorRuntime_112().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t).length){e.next=2;break}return e.abrupt("return",Promise.reject("\u672a\u63d0\u4f9b\u9700\u4e0a\u4f20\u7684\u6587\u4ef6"));case 2:return e.next=4,this.locate();case 4:if(r=e.sent,n=t,null==r||!r.id){e.next=25;break}if("gitlab"===this.syncPlatform&&(r.files=r.files.reduce((function(e,t){return e[t.path]=t,e}),{})),o=[],a=___objectSpread_112({},r.files),Object.keys(n).map((function(e){a[e]?null==n[e].content||""===n[e].content?(delete a[e],o.push({action:"delete",file_path:e})):(a[e]=n[e],o.push({action:"update",file_path:e,content:n[e].content})):null==n[e].content||""===n[e].content?(delete a[e],delete n[e]):(a[e]=n[e],o.push({action:"create",file_path:e,content:n[e].content}))})),"gitlab"!==this.syncPlatform){e.next=20;break}if(0!==Object.keys(a).length){e.next=14;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u66f4\u65b0 snippet"));case 14:if(!(Object.keys(a).length>10)){e.next=16;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4 snippet \u7684\u6587\u4ef6\u6570\u8d85\u8fc7 10, \u65e0\u6cd5\u66f4\u65b0 snippet"));case 16:return n=o,e.abrupt("return",this.http.put({headers:___objectSpread_112(___objectSpread_112({},this.headers),{},{"Content-Type":"application/json"}),url:"/snippets/".concat(r.id),body:JSON.stringify({files:n})}));case 20:if(0!==Object.keys(a).length){e.next=22;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u66f4\u65b0 gist"));case 22:return e.abrupt("return",this.http.patch({url:"/gists/".concat(r.id),body:JSON.stringify({files:n})}));case 23:e.next=36;break;case 25:if(n=Object.entries(n).reduce((function(e,t){var r=___slicedToArray_112(t,2),n=r[0],o=r[1];return null!==o.content&&""!==o.content&&(e[n]=o),e}),{}),"gitlab"!==this.syncPlatform){e.next=33;break}if(0!==Object.keys(n).length){e.next=29;break}return e.abrupt("return",Promise.reject("\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u521b\u5efa snippet"));case 29:return n=Object.keys(n).map((function(e){return{file_path:e,content:n[e].content}})),e.abrupt("return",this.http.post({headers:___objectSpread_112(___objectSpread_112({},this.headers),{},{"Content-Type":"application/json"}),url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:n})}));case 33:if(0!==Object.keys(n).length){e.next=35;break}return e.abrupt("return",Promise.reject("\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u521b\u5efa gist"));case 35:return e.abrupt("return",this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:n})}));case 36:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"download",value:function(){var e=___asyncToGenerator_112(___regeneratorRuntime_112().mark((function e(t){var r,n,o,a;return ___regeneratorRuntime_112().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.locate();case 2:if(null==(r=e.sent)||!r.id){e.next=20;break}return e.prev=4,e.next=7,this.http.get("/gists/".concat(r.id)).then((function(e){return JSON.parse(e.body)}));case 7:return n=e.sent,o=n.files,a=o[t].raw_url,e.next=12,this.http.get(a).then((function(e){return e.body}));case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 18:e.next=21;break;case 20:return e.abrupt("return",Promise.reject("\u627e\u4e0d\u5230 Sub-Store Gist"));case 21:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}])&&___defineProperties_112(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();_$gist_112.default=Gist;var _$artifacts_96={};function ___typeof_96(e){return(___typeof_96="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$artifacts_96,"__esModule",{value:!0}),_$artifacts_96.default=function(e){___app_96.default.read(_$constants_67.ARTIFACTS_KEY)||___app_96.default.write({},_$constants_67.ARTIFACTS_KEY),e.get("/api/artifacts/restore",restoreArtifacts),e.route("/api/artifacts").get(getAllArtifacts).post(createArtifact).put(replaceArtifact),e.route("/api/artifact/:name").get(getArtifact).patch(updateArtifact).delete(deleteArtifact)},_$artifacts_96.syncToGist=syncToGist;var ___app_96=___interopRequireDefault_96(_$app_68),_gist=___interopRequireDefault_96(_$gist_112);function ___interopRequireDefault_96(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_96(){___regeneratorRuntime_96=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_96(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_96(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_96(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_96(Object(r),!0).forEach((function(t){___defineProperty_96(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_96(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_96(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function __asyncGeneratorStep_96(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_96(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_96(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_96(a,n,o,s,i,"throw",e)}s(void 0)}))}}function restoreArtifacts(e,t){return _restoreArtifacts.apply(this,arguments)}function _restoreArtifacts(){return(_restoreArtifacts=___asyncToGenerator_96(___regeneratorRuntime_96().mark((function e(t,r){var n,o,a,s,i,u,c,l,p,f;return ___regeneratorRuntime_96().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(___app_96.default.info("\u5f00\u59cb\u6062\u590d\u8fdc\u7a0b\u914d\u7f6e..."),e.prev=1,n=___app_96.default.read(_$constants_67.SETTINGS_KEY),o=n.gistToken,a=n.syncPlatform,o){e.next=5;break}return e.abrupt("return",Promise.reject("\u672a\u8bbe\u7f6e GitHub Token\uff01"));case 5:return s=new _gist.default({token:o,key:_$constants_67.ARTIFACT_REPOSITORY_KEY,syncPlatform:a}),e.prev=6,e.next=9,s.locate();case 9:if(null!=(i=e.sent)&&i.files){e.next=12;break}throw new Error("\u627e\u4e0d\u5230 Sub-Store Gist \u6587\u4ef6\u5217\u8868");case 12:u=___app_96.default.read(_$constants_67.ARTIFACTS_KEY),c=[],Object.keys(i.files).map((function(e){var t,r=null===(t=i.files[e])||void 0===t?void 0:t.filename;if(r)if(encodeURIComponent(r)!==r)___app_96.default.error("\u6587\u4ef6\u540d ".concat(r," \u672a\u7f16\u7801 \u4e0d\u4fdd\u5b58")),c.push(r);else{var n,o,a=(0,_$database_107.findByName)(u,r);a?(0,_$database_107.updateByName)(u,r,___objectSpread_96(___objectSpread_96({},a),{},{url:null===(n=i.files[e])||void 0===n?void 0:n.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})):u.push({name:"".concat(r),url:null===(o=i.files[e])||void 0===o?void 0:o.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}})),___app_96.default.write(u,_$constants_67.ARTIFACTS_KEY),e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(6),___app_96.default.error("\u67e5\u627e Sub-Store Gist \u65f6\u53d1\u751f\u9519\u8bef: ".concat(null!==(l=e.t0.message)&&void 0!==l?l:e.t0)),e.t0;case 22:(0,_$response_102.success)(r),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(1),___app_96.default.error("\u6062\u590d\u8fdc\u7a0b\u914d\u7f6e\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(p=e.t1.message)&&void 0!==p?p:e.t1)),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts","Reason: ".concat(null!==(f=e.t1.message)&&void 0!==f?f:e.t1)));case 29:case"end":return e.stop()}}),e,null,[[1,25],[6,18]])})))).apply(this,arguments)}function getAllArtifacts(e,t){var r=___app_96.default.read(_$constants_67.ARTIFACTS_KEY);(0,_$response_102.success)(t,r)}function replaceArtifact(e,t){var r=e.body;___app_96.default.write(r,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(t)}function getArtifact(e,t){return _getArtifact.apply(this,arguments)}function _getArtifact(){return(_getArtifact=___asyncToGenerator_96(___regeneratorRuntime_96().mark((function e(t,r){var n,o,a;return ___regeneratorRuntime_96().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.params.name,n=decodeURIComponent(n),o=___app_96.default.read(_$constants_67.ARTIFACTS_KEY),(a=(0,_$database_107.findByName)(o,n))?(0,_$response_102.success)(r,a):(0,_$response_102.failed)(r,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","Artifact ".concat(n," does not exist!")),404);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function createArtifact(e,t){var r=e.body;if(validateArtifactName(r.name)){___app_96.default.info("\u6b63\u5728\u521b\u5efa\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(r.name));var n=___app_96.default.read(_$constants_67.ARTIFACTS_KEY);(0,_$database_107.findByName)(n,r.name)?(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY","Artifact ".concat(r.name," already exists."))):(n.push(r),___app_96.default.write(n,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(t,r,201))}else(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("INVALID_ARTIFACT_NAME","Artifact name ".concat(r.name," is invalid.")))}function updateArtifact(e,t){var r=___app_96.default.read(_$constants_67.ARTIFACTS_KEY),n=e.params.name;n=decodeURIComponent(n);var o=(0,_$database_107.findByName)(r,n);if(o){___app_96.default.info("\u6b63\u5728\u66f4\u65b0\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(o.name));var a=___objectSpread_96(___objectSpread_96({},o),e.body);if(!validateArtifactName(a.name))return void(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("INVALID_ARTIFACT_NAME","Artifact name ".concat(a.name," is invalid.")));(0,_$database_107.updateByName)(r,n,a),___app_96.default.write(r,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(t,a)}else(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY","Artifact ".concat(n," already exists.")))}function deleteArtifact(e,t){return _deleteArtifact.apply(this,arguments)}function _deleteArtifact(){return(_deleteArtifact=___asyncToGenerator_96(___regeneratorRuntime_96().mark((function e(t,r){var n,o,a,s;return ___regeneratorRuntime_96().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.name,n=decodeURIComponent(n),___app_96.default.info("\u6b63\u5728\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n)),o=___app_96.default.read(_$constants_67.ARTIFACTS_KEY),e.prev=4,a=(0,_$database_107.findByName)(o,n)){e.next=8;break}throw new Error("\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\u4e0d\u5b58\u5728\uff01"));case 8:if(!a.updated){e.next=20;break}return(s={})[encodeURIComponent(a.name)]={content:""},encodeURIComponent(a.name)!==a.name&&(s[a.name]={content:""}),e.prev=12,e.next=15,syncToGist(s);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),___app_96.default.error("Function syncToGist: ".concat(n," : ").concat(e.t0));case 20:(0,_$database_107.deleteByName)(o,n),___app_96.default.write(o,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(r),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(4),___app_96.default.error("\u65e0\u6cd5\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\uff0c\u539f\u56e0\uff1a").concat(e.t1)),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("FAILED_TO_DELETE_ARTIFACT","Failed to delete artifact ".concat(n),"Reason: ".concat(e.t1)));case 29:case"end":return e.stop()}}),e,null,[[4,25],[12,17]])})))).apply(this,arguments)}function validateArtifactName(e){return/^[a-zA-Z0-9._-]*$/.test(e)}function syncToGist(e){return _syncToGist.apply(this,arguments)}function _syncToGist(){return(_syncToGist=___asyncToGenerator_96(___regeneratorRuntime_96().mark((function e(t){var r,n,o,a,s,i,u,c,l,p,f;return ___regeneratorRuntime_96().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=___app_96.default.read(_$constants_67.SETTINGS_KEY),s=a.gistToken,i=a.syncPlatform,s){e.next=3;break}return e.abrupt("return",Promise.reject("\u672a\u8bbe\u7f6e GitHub Token\uff01"));case 3:return u=new _gist.default({token:s,key:_$constants_67.ARTIFACT_REPOSITORY_KEY,syncPlatform:i}),e.next=6,u.upload(t);case 6:c=e.sent,l={};try{l=JSON.parse(c.body)}catch(_){}return p=null!==(r=null===(n=l)||void 0===n?void 0:n.html_url)&&void 0!==r?r:null===(o=l)||void 0===o?void 0:o.web_url,f=___app_96.default.read(_$constants_67.SETTINGS_KEY),p?(___app_96.default.log("\u540c\u6b65 Gist \u540e, \u627e\u5230 Sub-Store Gist: ".concat(p)),f.artifactStore=p,f.artifactStoreStatus="VALID"):(___app_96.default.error("\u540c\u6b65 Gist \u540e, \u627e\u4e0d\u5230 Sub-Store Gist"),f.artifactStoreStatus="NOT FOUND"),___app_96.default.write(f,_$constants_67.SETTINGS_KEY),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _$settings_103={};Object.defineProperty(_$settings_103,"__esModule",{value:!0}),_$settings_103.default=function(e){___app_103.default.read(_$constants_67.SETTINGS_KEY)||___app_103.default.write({},_$constants_67.SETTINGS_KEY),e.route("/api/settings").get(getSettings).patch(updateSettings)},_$settings_103.updateArtifactStore=updateArtifactStore,_$settings_103.updateAvatar=updateAvatar;var ___app_103=___interopRequireDefault_103(_$app_68),___gist_103=___interopRequireDefault_103(_$gist_112);function ___interopRequireDefault_103(e){return e&&e.__esModule?e:{default:e}}function ___typeof_103(e){return(___typeof_103="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function __ownKeys_103(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_103(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_103(Object(r),!0).forEach((function(t){___defineProperty_103(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_103(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_103(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___regeneratorRuntime_103(){___regeneratorRuntime_103=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_103(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_103(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_103(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_103(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_103(a,n,o,s,i,"throw",e)}s(void 0)}))}}function getSettings(e,t){return _getSettings.apply(this,arguments)}function _getSettings(){return(_getSettings=___asyncToGenerator_103(___regeneratorRuntime_103().mark((function e(t,r){var n,o,a;return ___regeneratorRuntime_103().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=___app_103.default.read(_$constants_67.SETTINGS_KEY))||(n={},___app_103.default.write(n,_$constants_67.SETTINGS_KEY)),n.avatarUrl){e.next=6;break}return e.next=6,updateAvatar();case 6:if(n.artifactStore){e.next=9;break}return e.next=9,updateArtifactStore();case 9:(0,_$response_102.success)(r,n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),___app_103.default.error("Failed to get settings: ".concat(null!==(o=e.t0.message)&&void 0!==o?o:e.t0)),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("FAILED_TO_GET_SETTINGS","Failed to get settings","Reason: ".concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function updateSettings(e,t){return _updateSettings.apply(this,arguments)}function _updateSettings(){return(_updateSettings=___asyncToGenerator_103(___regeneratorRuntime_103().mark((function e(t,r){var n,o,a,s;return ___regeneratorRuntime_103().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=___app_103.default.read(_$constants_67.SETTINGS_KEY),o=___objectSpread_103(___objectSpread_103({},n),t.body),___app_103.default.write(o,_$constants_67.SETTINGS_KEY),e.next=6,updateAvatar();case 6:return e.next=8,updateArtifactStore();case 8:(0,_$response_102.success)(r,o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),___app_103.default.error("Failed to update settings: ".concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0)),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("FAILED_TO_UPDATE_SETTINGS","Failed to update settings","Reason: ".concat(null!==(s=e.t0.message)&&void 0!==s?s:e.t0)));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function updateAvatar(){return _updateAvatar.apply(this,arguments)}function _updateAvatar(){return(_updateAvatar=___asyncToGenerator_103(___regeneratorRuntime_103().mark((function e(){var t,r,n,o,a,s,i;return ___regeneratorRuntime_103().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=___app_103.default.read(_$constants_67.SETTINGS_KEY),r=t.githubUser,n=t.syncPlatform,!r){e.next=28;break}if("gitlab"!==n){e.next=17;break}return e.prev=4,e.next=7,___app_103.default.http.get({url:"https://gitlab.com/api/v4/users?username=".concat(encodeURIComponent(r)),headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then((function(e){return JSON.parse(e.body)}));case 7:o=e.sent,t.avatarUrl=o[0].avatar_url.replace(/(\?|&)s=\d+(&|$)/,"$1s=160$2"),___app_103.default.write(t,_$constants_67.SETTINGS_KEY),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),___app_103.default.error("Failed to fetch GitLab avatar for User: ".concat(r,". Reason: ").concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0));case 15:e.next=28;break;case 17:return e.prev=17,e.next=20,___app_103.default.http.get({url:"https://api.github.com/users/".concat(encodeURIComponent(r)),headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then((function(e){return JSON.parse(e.body)}));case 20:s=e.sent,t.avatarUrl=s.avatar_url,___app_103.default.write(t,_$constants_67.SETTINGS_KEY),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(17),___app_103.default.error("Failed to fetch GitHub avatar for User: ".concat(r,". Reason: ").concat(null!==(i=e.t1.message)&&void 0!==i?i:e.t1));case 28:case"end":return e.stop()}}),e,null,[[4,12],[17,25]])})))).apply(this,arguments)}function updateArtifactStore(){return _updateArtifactStore.apply(this,arguments)}function _updateArtifactStore(){return(_updateArtifactStore=___asyncToGenerator_103(___regeneratorRuntime_103().mark((function e(){var t,r,n,o,a,s,i,u;return ___regeneratorRuntime_103().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(___app_103.default.log("Updating artifact store"),t=___app_103.default.read(_$constants_67.SETTINGS_KEY),r=t.gistToken,n=t.syncPlatform,!r){e.next=18;break}return o=new ___gist_103.default({token:r,key:_$constants_67.ARTIFACT_REPOSITORY_KEY,syncPlatform:n}),e.prev=5,e.next=8,o.locate();case 8:s=e.sent,(i=null!==(a=null==s?void 0:s.html_url)&&void 0!==a?a:null==s?void 0:s.web_url)?(___app_103.default.log("\u627e\u5230 Sub-Store Gist: ".concat(i)),t.artifactStore=i,t.artifactStoreStatus="VALID"):(___app_103.default.error("\u627e\u4e0d\u5230 Sub-Store Gist"),t.artifactStoreStatus="NOT FOUND"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),___app_103.default.error("\u67e5\u627e Sub-Store Gist \u65f6\u53d1\u751f\u9519\u8bef: ".concat(null!==(u=e.t0.message)&&void 0!==u?u:e.t0)),t.artifactStoreStatus="ERROR";case 17:___app_103.default.write(t,_$constants_67.SETTINGS_KEY);case 18:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}var _$resourceCache_117={};Object.defineProperty(_$resourceCache_117,"__esModule",{value:!0}),_$resourceCache_117.default=void 0;var __obj_117,___app_117=(__obj_117=_$app_68)&&__obj_117.__esModule?__obj_117:{default:__obj_117};function ___slicedToArray_117(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_117(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_117(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_117(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_117(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_117=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=t,___app_117.default.read(_$constants_67.RESOURCE_CACHE_KEY)||___app_117.default.write("{}",_$constants_67.RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_117.default.read(_$constants_67.RESOURCE_CACHE_KEY))}catch(n){var r;___app_117.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_67.RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(r=null==n?void 0:n.message)&&void 0!==r?r:n)),this.resourceCache={},___app_117.default.write("{}",_$constants_67.RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=___slicedToArray_117(r,2),o=n[0],a=n[1];a.time||(delete e.resourceCache[o],___app_117.default.delete("#".concat(o)),t=!0),(new Date).getTime()-a.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_117.default.write(JSON.stringify(this.resourceCache),_$constants_67.RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_117(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())(_$constants_67.CACHE_EXPIRATION_TIME_MS);_$resourceCache_117.default=___default_117;var _$scriptResourceCache_118={};Object.defineProperty(_$scriptResourceCache_118,"__esModule",{value:!0}),_$scriptResourceCache_118.default=void 0;var __obj_118,___app_118=(__obj_118=_$app_68)&&__obj_118.__esModule?__obj_118:{default:__obj_118};function ___slicedToArray_118(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_118(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_118(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_118(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_118(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_118=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=function(){___app_118.default.read(_$constants_67.CSR_EXPIRATION_TIME_KEY)||___app_118.default.write("1728e5",_$constants_67.CSR_EXPIRATION_TIME_KEY);var e=1728e5;if(___app_118.default.env.isLoon){var t={"1\u5206\u949f":6e4,"5\u5206\u949f":3e5,"10\u5206\u949f":6e5,"30\u5206\u949f":18e5,"1\u5c0f\u65f6":36e5,"2\u5c0f\u65f6":72e5,"3\u5c0f\u65f6":108e5,"6\u5c0f\u65f6":216e5,"12\u5c0f\u65f6":432e5,"24\u5c0f\u65f6":864e5,"48\u5c0f\u65f6":1728e5,"72\u5c0f\u65f6":2592e5,"\u53c2\u6570\u4f20\u5165":"readcachets"},r=___app_118.default.read("#\u8282\u70b9\u7f13\u5b58\u6709\u6548\u671f");return r in t&&"readcachets"===(e=t[r])&&(e=r),e}return ___app_118.default.read(_$constants_67.CSR_EXPIRATION_TIME_KEY)}(),___app_118.default.read(_$constants_67.SCRIPT_RESOURCE_CACHE_KEY)||___app_118.default.write("{}",_$constants_67.SCRIPT_RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_118.default.read(_$constants_67.SCRIPT_RESOURCE_CACHE_KEY))}catch(r){var t;___app_118.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_67.SCRIPT_RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:r)),this.resourceCache={},___app_118.default.write("{}",_$constants_67.SCRIPT_RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=___slicedToArray_118(r,2),o=n[0],a=n[1];a.time||(delete e.resourceCache[o],___app_118.default.delete("#".concat(o)),t=!0),(new Date).getTime()-a.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_118.default.write(JSON.stringify(this.resourceCache),_$constants_67.SCRIPT_RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"gettime",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].time:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_118(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());_$scriptResourceCache_118.default=___default_118;var _$env_109={};Object.defineProperty(_$env_109,"__esModule",{value:!0}),_$env_109.default=void 0;var _ENV=(0,_$openApi_122.ENV)(),__isNode_109=_ENV.isNode,__isQX_109=_ENV.isQX,__isLoon_109=_ENV.isLoon,__isSurge_109=_ENV.isSurge,__isStash_109=_ENV.isStash,__isShadowRocket_109=_ENV.isShadowRocket,__isLanceX_109=_ENV.isLanceX,__isEgern_109=_ENV.isEgern,backend="Node";__isNode_109&&(backend="Node"),__isQX_109&&(backend="QX"),__isLoon_109&&(backend="Loon"),__isSurge_109&&(backend="Surge"),__isStash_109&&(backend="Stash"),__isShadowRocket_109&&(backend="ShadowRocket"),__isEgern_109&&(backend="Egern"),__isLanceX_109&&(backend="LanceX");var meta={};try{if("undefined"!=typeof $environment&&(meta.env=$environment),"undefined"!=typeof $loon&&(meta.loon=$loon),"undefined"!=typeof $script&&(meta.script=$script),__isNode_109){meta.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};var env=eval("process.env");for(var key in env)/^SUB_STORE_/.test(key)&&(meta.node.env[key]=env[key])}}catch(e){}var ___default_109={backend:backend,version:_$package_66.version,meta:meta};_$env_109.default=___default_109;var _$miscs_100={};function ___typeof_100(e){return(___typeof_100="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$miscs_100,"__esModule",{value:!0}),_$miscs_100.default=function(e){var t,r;e.get("/api/utils/env",getEnv),e.get("/api/utils/backup",gistBackup),e.get("/api/utils/refresh",refresh),e.route("/api/storage").get((function(e,t){t.set("content-type","application/json").set("content-disposition",'attachment; filename="sub-store.json"').send(___app_100.default.env.isNode?JSON.stringify(___app_100.default.cache):___app_100.default.read("#sub-store"))})).post((function(e,t){var r=e.body.content;___app_100.default.write(r,"#sub-store"),___app_100.default.env.isNode&&(___app_100.default.cache=JSON.parse(r),___app_100.default.persistCache()),(0,_migration.default)(),(0,_$response_102.success)(t)})),e.get("/",(r=___asyncToGenerator_100(___regeneratorRuntime_100().mark((function e(t,r){return ___regeneratorRuntime_100().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.set("location","https://sub-store.vercel.app/").status(302).end();case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})),(0,_$openApi_122.ENV)().isQX&&e.options("/",(t=___asyncToGenerator_100(___regeneratorRuntime_100().mark((function e(t,r){return ___regeneratorRuntime_100().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.status(200).end();case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})),e.all("/",(function(e,t){t.send("Hello from sub-store, made with \u2764\ufe0f by Peng-YM")}))};var ___app_100=___interopRequireDefault_100(_$app_68),_resourceCache=___interopRequireDefault_100(_$resourceCache_117),_scriptResourceCache=___interopRequireDefault_100(_$scriptResourceCache_118),___headersResourceCache_100=___interopRequireDefault_100(_$headersResourceCache_113),___gist_100=___interopRequireDefault_100(_$gist_112),_migration=___interopRequireDefault_100(_$migration_116),_env=___interopRequireDefault_100(_$env_109);function ___interopRequireDefault_100(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_100(){___regeneratorRuntime_100=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_100(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_100(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_100(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_100(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_100(a,n,o,s,i,"throw",e)}s(void 0)}))}}function getEnv(e,t){(0,_$response_102.success)(t,_env.default)}function refresh(e,t){return _refresh.apply(this,arguments)}function _refresh(){return(_refresh=___asyncToGenerator_100(___regeneratorRuntime_100().mark((function e(t,r){return ___regeneratorRuntime_100().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_$settings_103.updateAvatar)();case 2:return e.next=4,(0,_$settings_103.updateArtifactStore)();case 4:_resourceCache.default.revokeAll(),_scriptResourceCache.default.revokeAll(),___headersResourceCache_100.default.revokeAll(),(0,_$response_102.success)(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gistBackup(e,t){return _gistBackup.apply(this,arguments)}function _gistBackup(){return(_gistBackup=___asyncToGenerator_100(___regeneratorRuntime_100().mark((function e(t,r){var n,o,a,s,i,u,c,l,p,f,_;return ___regeneratorRuntime_100().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.query.action,o=___app_100.default.read(_$constants_67.SETTINGS_KEY),a=o.gistToken,s=o.syncPlatform,a){e.next=6;break}(0,_$response_102.failed)(r,new _$errors_98.RequestInvalidError("GIST_TOKEN_NOT_FOUND","GitHub Token is required for backup!")),e.next=56;break;case 6:i=new ___gist_100.default({token:a,key:_$constants_67.GIST_BACKUP_KEY,syncPlatform:s}),e.prev=7,c=___app_100.default.read(_$constants_67.SETTINGS_KEY),l=c.syncTime,e.t0=n,e.next="upload"===e.t0?13:"download"===e.t0?29:49;break;case 13:return c.syncTime=(new Date).getTime(),___app_100.default.write(c,_$constants_67.SETTINGS_KEY),u=___app_100.default.read("#sub-store"),___app_100.default.env.isNode&&(u=JSON.stringify(___app_100.default.cache,null,"  ")),___app_100.default.info("\u4e0a\u4f20\u5907\u4efd\u4e2d..."),e.prev=18,e.next=21,i.upload((d={},h=_$constants_67.GIST_BACKUP_FILE_NAME,y={content:u},h in d?Object.defineProperty(d,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[h]=y,d));case 21:e.next=28;break;case 23:throw e.prev=23,e.t1=e.catch(18),c.syncTime=l,___app_100.default.write(c,_$constants_67.SETTINGS_KEY),e.t1;case 28:return e.abrupt("break",49);case 29:return ___app_100.default.info("\u8fd8\u539f\u5907\u4efd\u4e2d..."),e.next=32,i.download(_$constants_67.GIST_BACKUP_FILE_NAME);case 32:if(u=e.sent,e.prev=33,0!==Object.keys(JSON.parse(u).settings).length){e.next=36;break}throw new Error("\u5907\u4efd\u6587\u4ef6\u5e94\u8be5\u81f3\u5c11\u5305\u542b settings \u5b57\u6bb5");case 36:e.next=42;break;case 38:throw e.prev=38,e.t2=e.catch(33),___app_100.default.error("Gist \u5907\u4efd\u6587\u4ef6\u6821\u9a8c\u5931\u8d25, \u65e0\u6cd5\u8fd8\u539f\nReason: ".concat(null!==(p=e.t2.message)&&void 0!==p?p:e.t2)),new Error("Gist \u5907\u4efd\u6587\u4ef6\u6821\u9a8c\u5931\u8d25, \u65e0\u6cd5\u8fd8\u539f");case 42:return ___app_100.default.write(u,"#sub-store"),___app_100.default.env.isNode&&(u=JSON.parse(u),___app_100.default.cache=u,___app_100.default.persistCache()),___app_100.default.info("perform migration after restoring from gist..."),(0,_migration.default)(),___app_100.default.info("migration completed"),___app_100.default.info("\u8fd8\u539f\u5907\u4efd\u5b8c\u6210"),e.abrupt("break",49);case 49:(0,_$response_102.success)(r),e.next=56;break;case 52:e.prev=52,e.t3=e.catch(7),___app_100.default.error("Failed to ".concat(n," gist data.\nReason: ").concat(null!==(f=e.t3.message)&&void 0!==f?f:e.t3)),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("BACKUP_FAILED","Failed to ".concat(n," gist data!"),"Reason: ".concat(null!==(_=e.t3.message)&&void 0!==_?_:e.t3)));case 56:case"end":return e.stop()}var d,h,y}),e,null,[[7,52],[18,23],[33,38]])})))).apply(this,arguments)}var _$sort_104={};Object.defineProperty(_$sort_104,"__esModule",{value:!0}),_$sort_104.default=function(e){e.post("/api/sort/subs",sortSubs),e.post("/api/sort/collections",sortCollections),e.post("/api/sort/artifacts",sortArtifacts),e.post("/api/sort/files",sortFiles)};var __obj_104,___app_104=(__obj_104=_$app_68)&&__obj_104.__esModule?__obj_104:{default:__obj_104};function sortSubs(e,t){var r=e.body,n=___app_104.default.read(_$constants_67.SUBS_KEY);n.sort((function(e,t){return r.indexOf(e.name)-r.indexOf(t.name)})),___app_104.default.write(n,_$constants_67.SUBS_KEY),(0,_$response_102.success)(t,n)}function sortCollections(e,t){var r=e.body,n=___app_104.default.read(_$constants_67.COLLECTIONS_KEY);n.sort((function(e,t){return r.indexOf(e.name)-r.indexOf(t.name)})),___app_104.default.write(n,_$constants_67.COLLECTIONS_KEY),(0,_$response_102.success)(t,n)}function sortArtifacts(e,t){var r=e.body,n=___app_104.default.read(_$constants_67.ARTIFACTS_KEY);n.sort((function(e,t){return r.indexOf(e.name)-r.indexOf(t.name)})),___app_104.default.write(n,_$constants_67.ARTIFACTS_KEY),(0,_$response_102.success)(t,n)}function sortFiles(e,t){var r=e.body,n=___app_104.default.read(_$constants_67.FILES_KEY);n.sort((function(e,t){return r.indexOf(e.name)-r.indexOf(t.name)})),___app_104.default.write(n,_$constants_67.FILES_KEY),(0,_$response_102.success)(t,n)}var _$md5_121={};Object.defineProperty(_$md5_121,"__esModule",{value:!0}),_$md5_121.any_hmac_md5=function(e,t,r){return rstr2any(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)),r)},_$md5_121.any_md5=function(e,t){return rstr2any(rstr_md5(str2rstr_utf8(e)),t)},_$md5_121.b64_hmac_md5=function(e,t){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))},_$md5_121.b64_md5=function(e){return rstr2b64(rstr_md5(str2rstr_utf8(e)))},_$md5_121.hex_hmac_md5=function(e,t){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))},_$md5_121.hex_md5=hex_md5;var hexcase=0,b64pad="";function hex_md5(e){return rstr2hex(rstr_md5(str2rstr_utf8(e)))}function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}function rstr_hmac_md5(e,t){var r=rstr2binl(e);r.length>16&&(r=binl_md5(r,8*e.length));for(var n=Array(16),o=Array(16),a=0;a<16;a++)n[a]=909522486^r[a],o[a]=1549556828^r[a];var s=binl_md5(n.concat(rstr2binl(t)),512+8*t.length);return binl2rstr(binl_md5(o.concat(s),640))}function rstr2hex(e){for(var t,r=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<e.length;o++)t=e.charCodeAt(o),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function rstr2b64(e){for(var t="",r=e.length,n=0;n<r;n+=3)for(var o=e.charCodeAt(n)<<16|(n+1<r?e.charCodeAt(n+1)<<8:0)|(n+2<r?e.charCodeAt(n+2):0),a=0;a<4;a++)8*n+6*a>8*e.length?t+=b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-a)&63);return t}function rstr2any(e,t){var r,n,o,a,s,i=t.length,u=Array(Math.ceil(e.length/2));for(r=0;r<u.length;r++)u[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),l=Array(c);for(n=0;n<c;n++){for(s=Array(),a=0,r=0;r<u.length;r++)a=(a<<16)+u[r],a-=(o=Math.floor(a/i))*i,(s.length>0||o>0)&&(s[s.length]=o);l[n]=a,u=s}var p="";for(r=l.length-1;r>=0;r--)p+=t.charAt(l[r]);return p}function str2rstr_utf8(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function rstr2binl(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function binl2rstr(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function binl_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,s=0;s<e.length;s+=16){var i=r,u=n,c=o,l=a;r=md5_ff(r,n,o,a,e[s+0],7,-680876936),a=md5_ff(a,r,n,o,e[s+1],12,-389564586),o=md5_ff(o,a,r,n,e[s+2],17,606105819),n=md5_ff(n,o,a,r,e[s+3],22,-1044525330),r=md5_ff(r,n,o,a,e[s+4],7,-176418897),a=md5_ff(a,r,n,o,e[s+5],12,1200080426),o=md5_ff(o,a,r,n,e[s+6],17,-1473231341),n=md5_ff(n,o,a,r,e[s+7],22,-45705983),r=md5_ff(r,n,o,a,e[s+8],7,1770035416),a=md5_ff(a,r,n,o,e[s+9],12,-1958414417),o=md5_ff(o,a,r,n,e[s+10],17,-42063),n=md5_ff(n,o,a,r,e[s+11],22,-1990404162),r=md5_ff(r,n,o,a,e[s+12],7,1804603682),a=md5_ff(a,r,n,o,e[s+13],12,-40341101),o=md5_ff(o,a,r,n,e[s+14],17,-1502002290),r=md5_gg(r,n=md5_ff(n,o,a,r,e[s+15],22,1236535329),o,a,e[s+1],5,-165796510),a=md5_gg(a,r,n,o,e[s+6],9,-1069501632),o=md5_gg(o,a,r,n,e[s+11],14,643717713),n=md5_gg(n,o,a,r,e[s+0],20,-373897302),r=md5_gg(r,n,o,a,e[s+5],5,-701558691),a=md5_gg(a,r,n,o,e[s+10],9,38016083),o=md5_gg(o,a,r,n,e[s+15],14,-660478335),n=md5_gg(n,o,a,r,e[s+4],20,-405537848),r=md5_gg(r,n,o,a,e[s+9],5,568446438),a=md5_gg(a,r,n,o,e[s+14],9,-1019803690),o=md5_gg(o,a,r,n,e[s+3],14,-187363961),n=md5_gg(n,o,a,r,e[s+8],20,1163531501),r=md5_gg(r,n,o,a,e[s+13],5,-1444681467),a=md5_gg(a,r,n,o,e[s+2],9,-51403784),o=md5_gg(o,a,r,n,e[s+7],14,1735328473),r=md5_hh(r,n=md5_gg(n,o,a,r,e[s+12],20,-1926607734),o,a,e[s+5],4,-378558),a=md5_hh(a,r,n,o,e[s+8],11,-2022574463),o=md5_hh(o,a,r,n,e[s+11],16,1839030562),n=md5_hh(n,o,a,r,e[s+14],23,-35309556),r=md5_hh(r,n,o,a,e[s+1],4,-1530992060),a=md5_hh(a,r,n,o,e[s+4],11,1272893353),o=md5_hh(o,a,r,n,e[s+7],16,-155497632),n=md5_hh(n,o,a,r,e[s+10],23,-1094730640),r=md5_hh(r,n,o,a,e[s+13],4,681279174),a=md5_hh(a,r,n,o,e[s+0],11,-358537222),o=md5_hh(o,a,r,n,e[s+3],16,-722521979),n=md5_hh(n,o,a,r,e[s+6],23,76029189),r=md5_hh(r,n,o,a,e[s+9],4,-640364487),a=md5_hh(a,r,n,o,e[s+12],11,-421815835),o=md5_hh(o,a,r,n,e[s+15],16,530742520),r=md5_ii(r,n=md5_hh(n,o,a,r,e[s+2],23,-995338651),o,a,e[s+0],6,-198630844),a=md5_ii(a,r,n,o,e[s+7],10,1126891415),o=md5_ii(o,a,r,n,e[s+14],15,-1416354905),n=md5_ii(n,o,a,r,e[s+5],21,-57434055),r=md5_ii(r,n,o,a,e[s+12],6,1700485571),a=md5_ii(a,r,n,o,e[s+3],10,-1894986606),o=md5_ii(o,a,r,n,e[s+10],15,-1051523),n=md5_ii(n,o,a,r,e[s+1],21,-2054922799),r=md5_ii(r,n,o,a,e[s+8],6,1873313359),a=md5_ii(a,r,n,o,e[s+15],10,-30611744),o=md5_ii(o,a,r,n,e[s+6],15,-1560198380),n=md5_ii(n,o,a,r,e[s+13],21,1309151649),r=md5_ii(r,n,o,a,e[s+4],6,-145523070),a=md5_ii(a,r,n,o,e[s+11],10,-1120210379),o=md5_ii(o,a,r,n,e[s+2],15,718787259),n=md5_ii(n,o,a,r,e[s+9],21,-343485551),r=safe_add(r,i),n=safe_add(n,u),o=safe_add(o,c),a=safe_add(a,l)}return Array(r,n,o,a)}function md5_cmn(e,t,r,n,o,a){return safe_add((s=safe_add(safe_add(t,e),safe_add(n,a)))<<(i=o)|s>>>32-i,r);var s,i}function md5_ff(e,t,r,n,o,a,s){return md5_cmn(t&r|~t&n,e,t,o,a,s)}function md5_gg(e,t,r,n,o,a,s){return md5_cmn(t&n|r&~n,e,t,o,a,s)}function md5_hh(e,t,r,n,o,a,s){return md5_cmn(t^r^n,e,t,o,a,s)}function md5_ii(e,t,r,n,o,a,s){return md5_cmn(r^(t|~n),e,t,o,a,s)}function safe_add(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}var _$download_108={};function ___typeof_108(e){return(___typeof_108="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$download_108,"__esModule",{value:!0}),_$download_108.default=function(e,t,r,n){return _download.apply(this,arguments)};var ___resourceCache_108=___interopRequireDefault_108(_$resourceCache_117),___headersResourceCache_108=___interopRequireDefault_108(_$headersResourceCache_113),___app_108=___interopRequireDefault_108(_$app_68);function ___interopRequireDefault_108(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_108(){___regeneratorRuntime_108=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_108(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_108(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_108(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_108(Object(r),!0).forEach((function(t){___defineProperty_108(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_108(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_108(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___createForOfIteratorHelper_108(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_108(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_108(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_108(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __asyncGeneratorStep_108(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}var tasks=new Map;function _download(){var t;return t=___regeneratorRuntime_108().mark((function t(r,n,o,a){var s,i,u,c,l,p,f,_,d,h,y,v,m,g,b,w,A,E,x,S,$,C,k,P,O,I,R,j,T,F,L,D,N,B,U,M,q,H,G;return ___regeneratorRuntime_108().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l={},p=r.replace(/#noFlow$/,""),f=p.split("#"),p=p.split("#")[0],f.length>1)try{l=JSON.parse(decodeURIComponent(f[1]))}catch(e){_=___createForOfIteratorHelper_108(f[1].split("&"));try{for(_.s();!(d=_.n()).done;)h=d.value,y=h.split("=")[0],v=h.split("=")[1],l[y]=null==v||""===v||decodeURIComponent(v)}catch(Y){_.e(Y)}finally{_.f()}}if(m=null!==(s=l)&&void 0!==s&&s.cacheKey?"#sub-store-cached-custom-".concat(null===(i=l)||void 0===i?void 0:i.cacheKey):void 0,g=(0,_$openApi_122.ENV)(),b=g.isNode,w=g.isStash,A=g.isLoon,E=g.isShadowRocket,x=g.isQX,S=___app_108.default.read(_$constants_67.SETTINGS_KEY),$=S.defaultUserAgent,C=S.defaultTimeout,k=S.cacheThreshold,P=n||$||"clash.meta",O=o||C,I=(0,_$md5_121.hex_md5)(P+p),b||!tasks.has(I)){t.next=13;break}return t.abrupt("return",tasks.get(I));case 13:if(R=(0,_$openApi_122.HTTP)({headers:___objectSpread_108(___objectSpread_108({"User-Agent":P},w&&a?{"X-Stash-Selected-Proxy":encodeURIComponent(a)}:{}),E&&a?{"X-Surge-Policy":a}:{}),timeout:O}),T=___resourceCache_108.default.get(I),null!==(u=l)&&void 0!==u&&u.noCache||!T){t.next=20;break}___app_108.default.info("\u4f7f\u7528\u7f13\u5b58: ".concat(p)),j=T,t.next=44;break;case 20:return ___app_108.default.info("Downloading...\nUser-Agent: ".concat(P,"\nTimeout: ").concat(O,"\nProxy: ").concat(a,"\nURL: ").concat(p)),t.prev=21,t.next=24,R.get(___objectSpread_108(___objectSpread_108(___objectSpread_108(___objectSpread_108({url:p},a?{proxy:a}:{}),A&&a?{node:a}:{}),x&&a?{opts:{policy:a}}:{}),a?(0,_$utils_114.getPolicyDescriptor)(a):{}));case 24:if(F=t.sent,L=F.body,(D=F.headers)&&(N=(0,_$flow_110.getFlowField)(D))&&___headersResourceCache_108.default.set(p,N),0!==L.replace(/\s/g,"").length){t.next=30;break}throw new Error(new Error("\u8fdc\u7a0b\u8d44\u6e90\u5185\u5bb9\u4e3a\u7a7a"));case 30:B=!0,k&&(U=L.length/1024)>k&&(___app_108.default.info("\u8d44\u6e90\u5927\u5c0f ".concat(U.toFixed(2)," KB \u8d85\u8fc7\u4e86 ").concat(k," KB, \u4e0d\u7f13\u5b58")),B=!1),B&&(___resourceCache_108.default.set(I,L),m&&___app_108.default.write(L,m)),j=L,t.next=44;break;case 36:if(t.prev=36,t.t0=t.catch(21),!m){t.next=43;break}if(!(q=___app_108.default.read(m))){t.next=43;break}return ___app_108.default.info("\u65e0\u6cd5\u4e0b\u8f7d URL ".concat(p,": ").concat(null!==(H=t.t0.message)&&void 0!==H?H:t.t0,"\n\u4f7f\u7528\u81ea\u5b9a\u4e49\u7f13\u5b58 ").concat(null===(G=l)||void 0===G?void 0:G.cacheKey)),t.abrupt("return",q);case 43:throw new Error("\u65e0\u6cd5\u4e0b\u8f7d URL ".concat(p,": ").concat(null!==(M=t.t0.message)&&void 0!==M?M:t.t0));case 44:if(null===(c=l)||void 0===c||!c.validCheck){t.next=53;break}return t.t1=_$flow_110.validCheck,t.t2=_$flow_110.parseFlowHeaders,t.next=49,(0,_$flow_110.getFlowHeaders)(p,l.flowUserAgent,void 0,a);case 49:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.next=53,(0,t.t1)(t.t4);case 53:return b||tasks.set(I,j),t.abrupt("return",j);case 55:case"end":return t.stop()}}),t,null,[[21,36]])})),(_download=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(e){__asyncGeneratorStep_108(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_108(a,n,o,s,i,"throw",e)}s(void 0)}))}).apply(this,arguments)}var _$common_7={};function isNothing(e){return null==e}_$common_7.isNothing=isNothing,_$common_7.isObject=function(e){return"object"==typeof e&&null!==e},_$common_7.toArray=function(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]},_$common_7.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},_$common_7.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},_$common_7.extend=function(e,t){var r,n,o,a;if(t)for(r=0,n=(a=Object.keys(t)).length;r<n;r+=1)e[o=a[r]]=t[o];return e};var _$exception_9={};function YAMLException(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},_$exception_9=YAMLException;var _$mark_11={};function Mark(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}Mark.prototype.getSnippet=function(e,t){var r,n,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",n=this.position;n>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(n-=1,this.position-n>t/2-1){r=" ... ",n+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(n,a),_$common_7.repeat(" ",e)+r+s+o+"\n"+_$common_7.repeat(" ",e+this.position-n+r.length)+"^"},Mark.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},_$mark_11=Mark;var TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"],_$type_18=function(e,t){var r,n;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(t))throw new _$exception_9('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,n={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){n[String(t)]=e}))})),n),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new _$exception_9('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')},_$schema_12={};function compileList(e,t,r){var n=[];return e.include.forEach((function(e){r=compileList(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function Schema(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new _$exception_9("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(){var e,t;switch(arguments.length){case 1:e=Schema.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new _$exception_9("Wrong number of arguments for Schema.create function")}if(e=_$common_7.toArray(e),t=_$common_7.toArray(t),!e.every((function(e){return e instanceof Schema})))throw new _$exception_9("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof _$type_18})))throw new _$exception_9("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:e,explicit:t})},_$schema_12=Schema;var _$str_33=new _$type_18("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),_$seq_31=new _$type_18("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),_$map_26=new _$type_18("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),_$failsafe_16=new _$schema_12({explicit:[_$str_33,_$seq_31,_$map_26]}),_$null_28=new _$type_18("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),_$bool_20=new _$type_18("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}var _$int_22=new _$type_18("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,a=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;a=!0}return a&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!isOctCode(e.charCodeAt(o)))return!1;a=!0}return a&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!isDecCode(e.charCodeAt(o)))return!1;a=!0}return!(!a||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,a=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){a.unshift(parseInt(e,10))})),n=0,r=1,a.forEach((function(e){n+=e*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!_$common_7.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/,_$float_21=new _$type_18("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!YAML_FLOAT_PATTERN.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){o.unshift(parseFloat(e,10))})),t=0,n=1,o.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||_$common_7.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_$common_7.isNegativeZero(e))return"-0.0";return r=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"}),_$json_17=new _$schema_12({include:[_$failsafe_16],implicit:[_$null_28,_$bool_20,_$int_22,_$float_21]}),_$core_13=new _$schema_12({include:[_$json_17]}),YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),_$timestamp_34=new _$type_18("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==YAML_DATE_REGEXP.exec(e)||null!==YAML_TIMESTAMP_REGEXP.exec(e))},construct:function(e){var t,r,n,o,a,s,i,u,c=0,l=null;if(null===(t=YAML_DATE_REGEXP.exec(e))&&(t=YAML_TIMESTAMP_REGEXP.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(a=+t[4],s=+t[5],i=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(l=-l)),u=new Date(Date.UTC(r,n,o,a,s,i,c)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(e){return e.toISOString()}}),_$merge_27=new _$type_18("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),NodeBuffer;try{var _require=require;NodeBuffer=_require("buffer").Buffer}catch(__){}var BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",_$binary_19=new _$type_18("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,a=BASE64_MAP;for(r=0;r<o;r++)if(!((t=a.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,a=BASE64_MAP,s=0,i=[];for(t=0;t<o;t++)t%4==0&&t&&(i.push(s>>16&255),i.push(s>>8&255),i.push(255&s)),s=s<<6|a.indexOf(n.charAt(t));return 0==(r=o%4*6)?(i.push(s>>16&255),i.push(s>>8&255),i.push(255&s)):18===r?(i.push(s>>10&255),i.push(s>>2&255)):12===r&&i.push(s>>4&255),NodeBuffer?NodeBuffer.from?NodeBuffer.from(i):new NodeBuffer(i):i},predicate:function(e){return NodeBuffer&&NodeBuffer.isBuffer(e)},represent:function(e){var t,r,n="",o=0,a=e.length,s=BASE64_MAP;for(t=0;t<a;t++)t%3==0&&t&&(n+=s[o>>18&63],n+=s[o>>12&63],n+=s[o>>6&63],n+=s[63&o]),o=(o<<8)+e[t];return 0==(r=a%3)?(n+=s[o>>18&63],n+=s[o>>12&63],n+=s[o>>6&63],n+=s[63&o]):2===r?(n+=s[o>>10&63],n+=s[o>>4&63],n+=s[o<<2&63],n+=s[64]):1===r&&(n+=s[o>>2&63],n+=s[o<<4&63],n+=s[64],n+=s[64]),n}}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString,_$omap_29=new _$type_18("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,o,a,s=[],i=e;for(t=0,r=i.length;t<r;t+=1){if(n=i[t],a=!1,"[object Object]"!==_toString.call(n))return!1;for(o in n)if(_hasOwnProperty.call(n,o)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==s.indexOf(o))return!1;s.push(o)}return!0},construct:function(e){return null!==e?e:[]}}),___toString_30=Object.prototype.toString,_$pairs_30=new _$type_18("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,o,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],"[object Object]"!==___toString_30.call(n))return!1;if(1!==(o=Object.keys(n)).length)return!1;a[t]=[o[0],n[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),a[t]=[o[0],n[o[0]]];return a}}),___hasOwnProperty_32=Object.prototype.hasOwnProperty,_$set_32=new _$type_18("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(___hasOwnProperty_32.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),_$default_safe_15=new _$schema_12({include:[_$core_13],implicit:[_$timestamp_34,_$merge_27],explicit:[_$binary_19,_$omap_29,_$pairs_30,_$set_32]}),_$undefined_25=new _$type_18("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}}),_$regexp_24=new _$type_18("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}}),esprima;try{var ___require_23=require;esprima=___require_23("esprima")}catch(_){"undefined"!=typeof window&&(esprima=window.esprima)}var _$function_23=new _$type_18("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=esprima.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(n){return!1}},construct:function(e){var t,r="("+e+")",n=esprima.parse(r,{range:!0}),o=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"ArrowFunctionExpression"!==n.body[0].expression.type&&"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(e){o.push(e.name)})),t=n.body[0].expression.body.range,"BlockStatement"===n.body[0].expression.body.type?new Function(o,r.slice(t[0]+1,t[1]-1)):new Function(o,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}}),_$default_full_14=_$schema_12.DEFAULT=new _$schema_12({include:[_$default_safe_15],explicit:[_$undefined_25,_$regexp_24,_$function_23]}),_$loader_10={},___hasOwnProperty_10=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(e){return Object.prototype.toString.call(e)}function is_EOL(e){return 10===e||13===e}function is_WHITE_SPACE(e){return 9===e||32===e}function is_WS_OR_EOL(e){return 9===e||32===e||10===e||13===e}function is_FLOW_INDICATOR(e){return 44===e||91===e||93===e||123===e||125===e}function fromHexCode(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function simpleEscapeSequence(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||_$default_full_14,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(e,t){return new _$exception_9(t,new _$mark_11(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function throwError(e,t){throw generateError(e,t)}function throwWarning(e,t){e.onWarning&&e.onWarning.call(null,generateError(e,t))}var directiveHandlers={YAML:function(e,t,r){var n,o,a;null!==e.version&&throwError(e,"duplication of %YAML directive"),1!==r.length&&throwError(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&throwError(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),1!==o&&throwError(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&throwError(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],PATTERN_TAG_HANDLE.test(n)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),___hasOwnProperty_10.call(e.tagMap,n)&&throwError(e,'there is a previously declared suffix for "'+n+'" tag handle'),PATTERN_TAG_URI.test(o)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function captureSegment(e,t,r,n){var o,a,s,i;if(t<r){if(i=e.input.slice(t,r),n)for(o=0,a=i.length;o<a;o+=1)9===(s=i.charCodeAt(o))||32<=s&&s<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(i)&&throwError(e,"the stream contains non-printable characters");e.result+=i}}function mergeMappings(e,t,r,n){var o,a,s,i;for(_$common_7.isObject(r)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,i=(o=Object.keys(r)).length;s<i;s+=1)a=o[s],___hasOwnProperty_10.call(t,a)||(t[a]=r[a],n[a]=!0)}function storeMappingPair(e,t,r,n,o,a,s,i){var u,c;if(Array.isArray(o))for(u=0,c=(o=Array.prototype.slice.call(o)).length;u<c;u+=1)Array.isArray(o[u])&&throwError(e,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===_class(o[u])&&(o[u]="[object Object]");if("object"==typeof o&&"[object Object]"===_class(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(a))for(u=0,c=a.length;u<c;u+=1)mergeMappings(e,t,a[u],r);else mergeMappings(e,t,a,r);else e.json||___hasOwnProperty_10.call(r,o)||!___hasOwnProperty_10.call(t,o)||(e.line=s||e.line,e.position=i||e.position,throwError(e,"duplicated mapping key")),t[o]=a,delete r[o];return t}function readLineBreak(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function skipSeparationSpace(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;is_WHITE_SPACE(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!is_EOL(o))break;for(readLineBreak(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&throwWarning(e,"deficient indentation"),n}function testDocumentSeparator(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!is_WS_OR_EOL(t)))}function writeFoldedLines(e,t){1===t?e.result+=" ":t>1&&(e.result+=_$common_7.repeat("\n",t-1))}function readBlockSequence(e,t){var r,n,o=e.tag,a=e.anchor,s=[],i=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);0!==n&&45===n&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(i=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=t)s.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,composeNode(e,t,CONTEXT_BLOCK_IN,!1,!0),s.push(e.result),skipSeparationSpace(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!i&&(e.tag=o,e.anchor=a,e.kind="sequence",e.result=s,!0)}function readTagProperty(e){var t,r,n,o,a=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&throwError(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(a=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,a){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!is_WS_OR_EOL(o);)33===o&&(s?throwError(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),PATTERN_FLOW_INDICATORS.test(n)&&throwError(e,"tag suffix cannot contain flow indicator characters")}return n&&!PATTERN_TAG_URI.test(n)&&throwError(e,"tag name cannot contain such characters: "+n),a?e.tag=n:___hasOwnProperty_10.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:throwError(e,'undeclared tag handle "'+r+'"'),!0}function readAnchorProperty(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&throwError(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function composeNode(e,t,r,n,o){var a,s,i,u,c,l,p,f,_=1,d=!1,h=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=i=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,n&&skipSeparationSpace(e,!0,-1)&&(d=!0,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)),1===_)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(d=!0,i=a,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)):i=!1;if(i&&(i=d||o),1!==_&&CONTEXT_BLOCK_OUT!==r||(p=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?t:t+1,f=e.position-e.lineStart,1===_?i&&(readBlockSequence(e,f)||function(e,t,r){var n,o,a,s,i,u=e.tag,c=e.anchor,l={},p={},f=null,_=null,d=null,h=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),i=e.input.charCodeAt(e.position);0!==i;){if(n=e.input.charCodeAt(e.position+1),a=e.line,s=e.position,63!==i&&58!==i||!is_WS_OR_EOL(n)){if(!composeNode(e,r,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===a){for(i=e.input.charCodeAt(e.position);is_WHITE_SPACE(i);)i=e.input.charCodeAt(++e.position);if(58===i)is_WS_OR_EOL(i=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),h&&(storeMappingPair(e,l,p,f,_,null),f=_=d=null),y=!0,h=!1,o=!1,f=e.tag,_=e.result;else{if(!y)return e.tag=u,e.anchor=c,!0;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,e.anchor=c,!0;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===i?(h&&(storeMappingPair(e,l,p,f,_,null),f=_=d=null),y=!0,h=!0,o=!0):h?(h=!1,o=!0):throwError(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,i=n;if((e.line===a||e.lineIndent>t)&&(composeNode(e,t,CONTEXT_BLOCK_OUT,!0,o)&&(h?_=e.result:d=e.result),h||(storeMappingPair(e,l,p,f,_,d,a,s),f=_=d=null),skipSeparationSpace(e,!0,-1),i=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==i)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return h&&storeMappingPair(e,l,p,f,_,null),y&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=l),y}(e,f,p))||function(e,t){var r,n,o,a,s,i,u,c,l,p,f=!0,_=e.tag,d=e.anchor,h={};if(91===(p=e.input.charCodeAt(e.position)))o=93,i=!1,n=[];else{if(123!==p)return!1;o=125,i=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),p=e.input.charCodeAt(++e.position);0!==p;){if(skipSeparationSpace(e,!0,t),(p=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=_,e.anchor=d,e.kind=i?"mapping":"sequence",e.result=n,!0;f||throwError(e,"missed comma between flow collection entries"),l=null,a=s=!1,63===p&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(a=s=!0,e.position++,skipSeparationSpace(e,!0,t)),r=e.line,composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),c=e.tag,u=e.result,skipSeparationSpace(e,!0,t),p=e.input.charCodeAt(e.position),!s&&e.line!==r||58!==p||(a=!0,p=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,t),composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),l=e.result),i?storeMappingPair(e,n,h,c,u,l):a?n.push(storeMappingPair(e,null,h,c,u,l)):n.push(u),skipSeparationSpace(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}throwError(e,"unexpected end of the stream within a flow collection")}(e,p)?h=!0:(s&&function(e,t){var r,n,o,a,s,i=CHOMPING_CLIP,u=!1,c=!1,l=t,p=0,f=!1;if(124===(a=e.input.charCodeAt(e.position)))n=!1;else{if(62!==a)return!1;n=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)CHOMPING_CLIP===i?i=43===a?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!((o=48<=(s=a)&&s<=57?s-48:-1)>=0))break;0===o?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?throwError(e,"repeat of an indentation width identifier"):(l=t+o-1,c=!0)}if(is_WHITE_SPACE(a)){do{a=e.input.charCodeAt(++e.position)}while(is_WHITE_SPACE(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!is_EOL(a)&&0!==a)}for(;0!==a;){for(readLineBreak(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),is_EOL(a))p++;else{if(e.lineIndent<l){i===CHOMPING_KEEP?e.result+=_$common_7.repeat("\n",u?1+p:p):i===CHOMPING_CLIP&&u&&(e.result+="\n");break}for(n?is_WHITE_SPACE(a)?(f=!0,e.result+=_$common_7.repeat("\n",u?1+p:p)):f?(f=!1,e.result+=_$common_7.repeat("\n",p+1)):0===p?u&&(e.result+=" "):e.result+=_$common_7.repeat("\n",p):e.result+=_$common_7.repeat("\n",u?1+p:p),u=!0,c=!0,p=0,r=e.position;!is_EOL(a)&&0!==a;)a=e.input.charCodeAt(++e.position);captureSegment(e,r,e.position,!1)}}return!0}(e,p)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(captureSegment(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else is_EOL(r)?(captureSegment(e,n,o,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),n=o=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}(e,p)||function(e,t){var r,n,o,a,s,i,u;if(34!==(i=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(i=e.input.charCodeAt(e.position));){if(34===i)return captureSegment(e,r,e.position,!0),e.position++,!0;if(92===i){if(captureSegment(e,r,e.position,!0),is_EOL(i=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,t);else if(i<256&&simpleEscapeCheck[i])e.result+=simpleEscapeMap[i],e.position++;else if((s=120===(u=i)?2:117===u?4:85===u?8:0)>0){for(o=s,a=0;o>0;o--)(s=fromHexCode(i=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+s:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(a),e.position++}else throwError(e,"unknown escape sequence");r=n=e.position}else is_EOL(i)?(captureSegment(e,r,n,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),r=n=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}(e,p)?h=!0:function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),___hasOwnProperty_10.call(e.anchorMap,r)||throwError(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],skipSeparationSpace(e,!0,-1),!0}(e)?(h=!0,null===e.tag&&null===e.anchor||throwError(e,"alias node should not have any properties")):function(e,t,r){var n,o,a,s,i,u,c,l,p=e.kind,f=e.result;if(is_WS_OR_EOL(l=e.input.charCodeAt(e.position))||is_FLOW_INDICATOR(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;0!==l;){if(58===l){if(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n))break}else if(35===l){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||r&&is_FLOW_INDICATOR(l))break;if(is_EOL(l)){if(i=e.line,u=e.lineStart,c=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=t){s=!0,l=e.input.charCodeAt(e.position);continue}e.position=a,e.line=i,e.lineStart=u,e.lineIndent=c;break}}s&&(captureSegment(e,o,a,!1),writeFoldedLines(e,e.line-i),o=a=e.position,s=!1),is_WHITE_SPACE(l)||(a=e.position+1),l=e.input.charCodeAt(++e.position)}return captureSegment(e,o,a,!1),!!e.result||(e.kind=p,e.result=f,!1)}(e,p,CONTEXT_FLOW_IN===r)&&(h=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===_&&(h=i&&readBlockSequence(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&throwError(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,c=e.implicitTypes.length;u<c;u+=1)if((l=e.implicitTypes[u]).resolve(e.result)){e.result=l.construct(e.result),e.tag=l.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else ___hasOwnProperty_10.call(e.typeMap[e.kind||"fallback"],e.tag)?(l=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&l.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+l.kind+'", not "'+e.kind+'"'),l.resolve(e.result)?(e.result=l.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):throwError(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||h}function readDocument(e){var t,r,n,o,a=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(skipSeparationSpace(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!is_WS_OR_EOL(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");0!==o;){for(;is_WHITE_SPACE(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!is_EOL(o));break}if(is_EOL(o))break;for(t=e.position;0!==o&&!is_WS_OR_EOL(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&readLineBreak(e),___hasOwnProperty_10.call(directiveHandlers,r)?directiveHandlers[r](e,r,n):throwWarning(e,'unknown document directive "'+r+'"')}skipSeparationSpace(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,skipSeparationSpace(e,!0,-1)):s&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(a,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new State(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,throwError(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=loadDocuments(e,r);if("function"!=typeof t)return n;for(var o=0,a=n.length;o<a;o+=1)t(n[o])}function load(e,t){var r=loadDocuments(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new _$exception_9("expected a single document in the stream, but found more")}}_$loader_10.loadAll=loadAll,_$loader_10.load=load,_$loader_10.safeLoadAll=function(e,t,r){return"object"==typeof t&&null!==t&&void 0===r&&(r=t,t=null),loadAll(e,t,_$common_7.extend({schema:_$default_safe_15},r))},_$loader_10.safeLoad=function(e,t){return load(e,_$common_7.extend({schema:_$default_safe_15},t))};var _$dumper_8={},___toString_8=Object.prototype.toString,___hasOwnProperty_8=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function encodeHex(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new _$exception_9("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+_$common_7.repeat("0",n-t.length)+t}function __State_8(e){this.schema=e.schema||_$default_full_14,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=_$common_7.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,a,s,i,u;if(null===t)return{};for(r={},o=0,a=(n=Object.keys(t)).length;o<a;o+=1)s=n[o],i=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&___hasOwnProperty_8.call(u.styleAliases,i)&&(i=u.styleAliases[i]),r[s]=i;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,t){for(var r,n=_$common_7.repeat(" ",t),o=0,a=-1,s="",i=e.length;o<i;)-1===(a=e.indexOf("\n",o))?(r=e.slice(o),o=i):(r=e.slice(o,a+1),o=a+1),r.length&&"\n"!==r&&(s+=n),s+=r;return s}function generateNextLine(e,t){return"\n"+_$common_7.repeat(" ",e.indent*t)}function isWhitespace(e){return e===CHAR_SPACE||e===CHAR_TAB}function isPrintable(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function isPlainSafe(e,t){return isPrintable(e)&&65279!==e&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET&&e!==CHAR_COLON&&(e!==CHAR_SHARP||t&&function(e){return isPrintable(e)&&!isWhitespace(e)&&65279!==e&&e!==CHAR_CARRIAGE_RETURN&&e!==CHAR_LINE_FEED}(t))}function needIndentIndicator(e){return/^\n* /.test(e)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(e,t,r,n,o){var a,s,i,u,c=!1,l=!1,p=-1!==n,f=-1,_=isPrintable(u=e.charCodeAt(0))&&65279!==u&&!isWhitespace(u)&&u!==CHAR_MINUS&&u!==CHAR_QUESTION&&u!==CHAR_COLON&&u!==CHAR_COMMA&&u!==CHAR_LEFT_SQUARE_BRACKET&&u!==CHAR_RIGHT_SQUARE_BRACKET&&u!==CHAR_LEFT_CURLY_BRACKET&&u!==CHAR_RIGHT_CURLY_BRACKET&&u!==CHAR_SHARP&&u!==CHAR_AMPERSAND&&u!==CHAR_ASTERISK&&u!==CHAR_EXCLAMATION&&u!==CHAR_VERTICAL_LINE&&u!==CHAR_EQUALS&&u!==CHAR_GREATER_THAN&&u!==CHAR_SINGLE_QUOTE&&u!==CHAR_DOUBLE_QUOTE&&u!==CHAR_PERCENT&&u!==CHAR_COMMERCIAL_AT&&u!==CHAR_GRAVE_ACCENT&&!isWhitespace(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(!isPrintable(s=e.charCodeAt(a)))return STYLE_DOUBLE;i=a>0?e.charCodeAt(a-1):null,_=_&&isPlainSafe(s,i)}else{for(a=0;a<e.length;a++){if((s=e.charCodeAt(a))===CHAR_LINE_FEED)c=!0,p&&(l=l||a-f-1>n&&" "!==e[f+1],f=a);else if(!isPrintable(s))return STYLE_DOUBLE;i=a>0?e.charCodeAt(a-1):null,_=_&&isPlainSafe(s,i)}l=l||p&&a-f-1>n&&" "!==e[f+1]}return c||l?r>9&&needIndentIndicator(e)?STYLE_DOUBLE:l?STYLE_FOLDED:STYLE_LITERAL:_&&!o(e)?STYLE_PLAIN:STYLE_SINGLE}function writeScalar(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==DEPRECATED_BOOLEANS_SYNTAX.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,r),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=n||e.flowLevel>-1&&r>=e.flowLevel;switch(chooseScalarStyle(t,s,e.indent,a,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case STYLE_PLAIN:return t;case STYLE_SINGLE:return"'"+t.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(t,e.indent)+dropEndingNewline(indentString(t,o));case STYLE_FOLDED:return">"+blockHeader(t,e.indent)+dropEndingNewline(indentString(function(e,t){for(var r,n,o,a=/(\n+)([^\n]*)/g,s=(o=-1!==(o=e.indexOf("\n"))?o:e.length,a.lastIndex=o,foldLine(e.slice(0,o),t)),i="\n"===e[0]||" "===e[0];n=a.exec(e);){var u=n[1],c=n[2];r=" "===c[0],s+=u+(i||r||""===c?"":"\n")+foldLine(c,t),i=r}return s}(t,a),o));case STYLE_DOUBLE:return'"'+function(e){for(var t,r,n,o="",a=0;a<e.length;a++)(t=e.charCodeAt(a))>=55296&&t<=56319&&(r=e.charCodeAt(a+1))>=56320&&r<=57343?(o+=encodeHex(1024*(t-55296)+r-56320+65536),a++):o+=!(n=ESCAPE_SEQUENCES[t])&&isPrintable(t)?e[a]:n||encodeHex(t);return o}(t)+'"';default:throw new _$exception_9("impossible error: invalid scalar style")}}()}function blockHeader(e,t){var r=needIndentIndicator(e)?String(t):"",n="\n"===e[e.length-1];return r+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function dropEndingNewline(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function foldLine(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,a=0,s=0,i=0,u="";r=o.exec(e);)(i=r.index)-a>t&&(n=s>a?s:i,u+="\n"+e.slice(a,n),a=n+1),s=i;return u+="\n",e.length-a>t&&s>a?u+=e.slice(a,s)+"\n"+e.slice(s+1):u+=e.slice(a),u.slice(1)}function detectType(e,t,r){var n,o,a,s,i,u;for(a=0,s=(o=r?e.explicitTypes:e.implicitTypes).length;a<s;a+=1)if(((i=o[a]).instanceOf||i.predicate)&&(!i.instanceOf||"object"==typeof t&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(e.tag=r?i.tag:"?",i.represent){if(u=e.styleMap[i.tag]||i.defaultStyle,"[object Function]"===___toString_8.call(i.represent))n=i.represent(t,u);else{if(!___hasOwnProperty_8.call(i.represent,u))throw new _$exception_9("!<"+i.tag+'> tag resolver accepts not "'+u+'" style');n=i.represent[u](t,u)}e.dump=n}return!0}return!1}function writeNode(e,t,r,n,o,a){e.tag=null,e.dump=r,detectType(e,r,!1)||detectType(e,r,!0);var s=___toString_8.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var i,u,c="[object Object]"===s||"[object Array]"===s;if(c&&(u=-1!==(i=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(o=!1),u&&e.usedDuplicates[i])e.dump="*ref_"+i;else{if(c&&u&&!e.usedDuplicates[i]&&(e.usedDuplicates[i]=!0),"[object Object]"===s)n&&0!==Object.keys(e.dump).length?(function(e,t,r,n){var o,a,s,i,u,c,l="",p=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new _$exception_9("sortKeys must be a boolean or a function");for(o=0,a=f.length;o<a;o+=1)c="",n&&0===o||(c+=generateNextLine(e,t)),i=r[s=f[o]],writeNode(e,t+1,s,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,u&&(c+=generateNextLine(e,t)),writeNode(e,t+1,i,!0,u)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+=":":c+=": ",l+=c+=e.dump));e.tag=p,e.dump=l||"{}"}(e,t,e.dump,o),u&&(e.dump="&ref_"+i+e.dump)):(function(e,t,r){var n,o,a,s,i,u="",c=e.tag,l=Object.keys(r);for(n=0,o=l.length;n<o;n+=1)i="",0!==n&&(i+=", "),e.condenseFlow&&(i+='"'),s=r[a=l[n]],writeNode(e,t,a,!1,!1)&&(e.dump.length>1024&&(i+="? "),i+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),writeNode(e,t,s,!1,!1)&&(u+=i+=e.dump));e.tag=c,e.dump="{"+u+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+i+" "+e.dump));else if("[object Array]"===s){var l=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(function(e,t,r,n){var o,a,s="",i=e.tag;for(o=0,a=r.length;o<a;o+=1)writeNode(e,t+1,r[o],!0,!0)&&(n&&0===o||(s+=generateNextLine(e,t)),e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=i,e.dump=s||"[]"}(e,l,e.dump,o),u&&(e.dump="&ref_"+i+e.dump)):(function(e,t,r){var n,o,a="",s=e.tag;for(n=0,o=r.length;n<o;n+=1)writeNode(e,t,r[n],!1,!1)&&(0!==n&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}(e,l,e.dump),u&&(e.dump="&ref_"+i+" "+e.dump))}else{if("[object String]"!==s){if(e.skipInvalid)return!1;throw new _$exception_9("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&writeScalar(e,e.dump,t,a)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function getDuplicateReferences(e,t){var r,n,o=[],a=[];for(function e(t,r,n){var o,a,s;if(null!==t&&"object"==typeof t)if(-1!==(a=r.indexOf(t)))-1===n.indexOf(a)&&n.push(a);else if(r.push(t),Array.isArray(t))for(a=0,s=t.length;a<s;a+=1)e(t[a],r,n);else for(a=0,s=(o=Object.keys(t)).length;a<s;a+=1)e(t[o[a]],r,n)}(e,o,a),r=0,n=a.length;r<n;r+=1)t.duplicates.push(o[a[r]]);t.usedDuplicates=new Array(n)}function dump(e,t){var r=new __State_8(t=t||{});return r.noRefs||getDuplicateReferences(e,r),writeNode(r,0,e,!0,!0)?r.dump+"\n":""}_$dumper_8.dump=dump,_$dumper_8.safeDump=function(e,t){return dump(e,_$common_7.extend({schema:_$default_safe_15},t))};var _$jsYaml_6={};function deprecated(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}_$jsYaml_6.Type=_$type_18,_$jsYaml_6.Schema=_$schema_12,_$jsYaml_6.FAILSAFE_SCHEMA=_$failsafe_16,_$jsYaml_6.JSON_SCHEMA=_$json_17,_$jsYaml_6.CORE_SCHEMA=_$core_13,_$jsYaml_6.DEFAULT_SAFE_SCHEMA=_$default_safe_15,_$jsYaml_6.DEFAULT_FULL_SCHEMA=_$default_full_14,_$jsYaml_6.load=_$loader_10.load,_$jsYaml_6.loadAll=_$loader_10.loadAll,_$jsYaml_6.safeLoad=_$loader_10.safeLoad,_$jsYaml_6.safeLoadAll=_$loader_10.safeLoadAll,_$jsYaml_6.dump=_$dumper_8.dump,_$jsYaml_6.safeDump=_$dumper_8.safeDump,_$jsYaml_6.YAMLException=_$exception_9,_$jsYaml_6.MINIMAL_SCHEMA=_$failsafe_16,_$jsYaml_6.SAFE_SCHEMA=_$default_safe_15,_$jsYaml_6.DEFAULT_SCHEMA=_$default_full_14,_$jsYaml_6.scan=deprecated("scan"),_$jsYaml_6.parse=deprecated("parse"),_$jsYaml_6.compose=deprecated("compose"),_$jsYaml_6.addConstructor=deprecated("addConstructor");var _$yaml_5=_$jsYaml_6,_$staticJsYaml_65={safeLoad:_$yaml_5.safeLoad,load:_$yaml_5.load,safeDump:_$yaml_5.safeDump,dump:_$yaml_5.dump},_$yaml_119={};Object.defineProperty(_$yaml_119,"__esModule",{value:!0}),_$yaml_119.default=void 0,_$yaml_119.dump=__dump_119,_$yaml_119.load=__load_119,_$yaml_119.safeDump=safeDump,_$yaml_119.safeLoad=safeLoad;var __obj_119,_staticJsYaml=(__obj_119=_$staticJsYaml_65)&&__obj_119.__esModule?__obj_119:{default:__obj_119};function retry(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];try{return t.apply(void 0,[r].concat(o))}catch(e){return t.apply(void 0,[__dump_119(t.apply(void 0,[r.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__")].concat(o))).replace(/__SubStoreJSYAMLString__/g,"")].concat(o))}}function safeLoad(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return retry.apply(void 0,[_staticJsYaml.default.safeLoad,e].concat(r))}function __load_119(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return retry.apply(void 0,[_staticJsYaml.default.load,e].concat(r))}function safeDump(){return _staticJsYaml.default.safeDump.apply(_staticJsYaml.default,arguments)}function __dump_119(){return _staticJsYaml.default.dump.apply(_staticJsYaml.default,arguments)}var ___default_119={safeLoad:safeLoad,load:__load_119,safeDump:safeDump,dump:__dump_119};_$yaml_119.default=___default_119;var _$logical_115={};function ___arrayLikeToArray_115(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(_$logical_115,"__esModule",{value:!0}),_$logical_115.AND=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.map((function(e,r){return t[r]&&e}))}))},_$logical_115.FULL=function(e,t){return(r=Array(e).keys(),function(e){if(Array.isArray(e))return ___arrayLikeToArray_115(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_115(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_115(e,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return t}));var r},_$logical_115.NOT=function(e){return e.map((function(e){return!e}))},_$logical_115.OR=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.map((function(e,r){return t[r]||e}))}))};var _$geo_111={};Object.defineProperty(_$geo_111,"__esModule",{value:!0}),_$geo_111.getFlag=getFlag,_$geo_111.getISO=function(e){var t;return null===(t=ISOFlags[getFlag(e)])||void 0===t?void 0:t[0]};var ISOFlags={"\ud83c\udff3\ufe0f\u200d\ud83c\udf08":["EXP","BAND"],"\ud83c\uddf8\ud83c\uddf1":["TEST","SOS"],"\ud83c\udde6\ud83c\udde9":["AD","AND"],"\ud83c\udde6\ud83c\uddea":["AE","ARE"],"\ud83c\udde6\ud83c\uddeb":["AF","AFG"],"\ud83c\udde6\ud83c\uddf1":["AL","ALB"],"\ud83c\udde6\ud83c\uddf2":["AM","ARM"],"\ud83c\udde6\ud83c\uddf7":["AR","ARG"],"\ud83c\udde6\ud83c\uddf9":["AT","AUT"],"\ud83c\udde6\ud83c\uddfa":["AU","AUS"],"\ud83c\udde6\ud83c\uddff":["AZ","AZE"],"\ud83c\udde7\ud83c\udde6":["BA","BIH"],"\ud83c\udde7\ud83c\udde9":["BD","BGD"],"\ud83c\udde7\ud83c\uddea":["BE","BEL"],"\ud83c\udde7\ud83c\uddec":["BG","BGR"],"\ud83c\udde7\ud83c\udded":["BH","BHR"],"\ud83c\udde7\ud83c\uddf7":["BR","BRA"],"\ud83c\udde7\ud83c\uddfe":["BY","BLR"],"\ud83c\udde8\ud83c\udde6":["CA","CAN"],"\ud83c\udde8\ud83c\udded":["CH","CHE"],"\ud83c\udde8\ud83c\uddf1":["CL","CHL"],"\ud83c\udde8\ud83c\uddf4":["CO","COL"],"\ud83c\udde8\ud83c\uddf7":["CR","CRI"],"\ud83c\udde8\ud83c\uddfe":["CY","CYP"],"\ud83c\udde8\ud83c\uddff":["CZ","CZE"],"\ud83c\udde9\ud83c\uddea":["DE","DEU"],"\ud83c\udde9\ud83c\uddf0":["DK","DNK"],"\ud83c\uddea\ud83c\udde8":["EC","ECU"],"\ud83c\uddea\ud83c\uddea":["EE","EST"],"\ud83c\uddea\ud83c\uddec":["EG","EGY"],"\ud83c\uddea\ud83c\uddf8":["ES","ESP"],"\ud83c\uddea\ud83c\uddfa":["EU"],"\ud83c\uddeb\ud83c\uddee":["FI","FIN"],"\ud83c\uddeb\ud83c\uddf7":["FR","FRA"],"\ud83c\uddec\ud83c\udde7":["GB","GBR","UK"],"\ud83c\uddec\ud83c\uddea":["GE","GEO"],"\ud83c\uddec\ud83c\uddf7":["GR","GRC"],"\ud83c\udded\ud83c\uddf0":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\ud83c\udded\ud83c\uddf7":["HR","HRV"],"\ud83c\udded\ud83c\uddfa":["HU","HUN"],"\ud83c\uddef\ud83c\uddf4":["JO","JOR"],"\ud83c\uddef\ud83c\uddf5":["JP","JPN","TYO"],"\ud83c\uddf0\ud83c\uddea":["KE","KEN"],"\ud83c\uddf0\ud83c\uddec":["KG","KGZ"],"\ud83c\uddf0\ud83c\udded":["KH","KGZ"],"\ud83c\uddf0\ud83c\uddf5":["KP","PRK"],"\ud83c\uddf0\ud83c\uddf7":["KR","KOR","SEL"],"\ud83c\uddf0\ud83c\uddff":["KZ","KAZ"],"\ud83c\uddee\ud83c\udde9":["ID","IDN"],"\ud83c\uddee\ud83c\uddea":["IE","IRL"],"\ud83c\uddee\ud83c\uddf1":["IL","ISR"],"\ud83c\uddee\ud83c\uddf2":["IM","IMN"],"\ud83c\uddee\ud83c\uddf3":["IN","IND"],"\ud83c\uddee\ud83c\uddf7":["IR","IRN"],"\ud83c\uddee\ud83c\uddf8":["IS","ISL"],"\ud83c\uddee\ud83c\uddf9":["IT","ITA"],"\ud83c\uddf1\ud83c\uddf9":["LT","LTU"],"\ud83c\uddf1\ud83c\uddfa":["LU","LUX"],"\ud83c\uddf1\ud83c\uddfb":["LV","LVA"],"\ud83c\uddf2\ud83c\udde6":["MA","MAR"],"\ud83c\uddf2\ud83c\udde9":["MD","MDA"],"\ud83c\uddf3\ud83c\uddec":["NG","NGA"],"\ud83c\uddf2\ud83c\uddf0":["MK","MKD"],"\ud83c\uddf2\ud83c\uddf3":["MN","MNG"],"\ud83c\uddf2\ud83c\uddf4":["MO","MAC","CTM"],"\ud83c\uddf2\ud83c\uddf9":["MT","MLT"],"\ud83c\uddf2\ud83c\uddfd":["MX","MEX"],"\ud83c\uddf2\ud83c\uddfe":["MY","MYS"],"\ud83c\uddf3\ud83c\uddf1":["NL","NLD","AMS"],"\ud83c\uddf3\ud83c\uddf4":["NO","NOR"],"\ud83c\uddf3\ud83c\uddf5":["NP","NPL"],"\ud83c\uddf3\ud83c\uddff":["NZ","NZL"],"\ud83c\uddf5\ud83c\udde6":["PA","PAN"],"\ud83c\uddf5\ud83c\uddea":["PE","PER"],"\ud83c\uddf5\ud83c\udded":["PH","PHL"],"\ud83c\uddf5\ud83c\uddf0":["PK","PAK"],"\ud83c\uddf5\ud83c\uddf1":["PL","POL"],"\ud83c\uddf5\ud83c\uddf7":["PR","PRI"],"\ud83c\uddf5\ud83c\uddf9":["PT","PRT"],"\ud83c\uddf5\ud83c\uddfe":["PY","PRY"],"\ud83c\uddf7\ud83c\uddf4":["RO","ROU"],"\ud83c\uddf7\ud83c\uddf8":["RS","SRB"],"\ud83c\uddf7\ud83c\uddea":["RE","REU"],"\ud83c\uddf7\ud83c\uddfa":["RU","RUS"],"\ud83c\uddf8\ud83c\udde6":["SA","SAU"],"\ud83c\uddf8\ud83c\uddea":["SE","SWE"],"\ud83c\uddf8\ud83c\uddec":["SG","SGP"],"\ud83c\uddf8\ud83c\uddee":["SI","SVN"],"\ud83c\uddf8\ud83c\uddf0":["SK","SVK"],"\ud83c\uddf9\ud83c\udded":["TH","THA"],"\ud83c\uddf9\ud83c\uddf3":["TN","TUN"],"\ud83c\uddf9\ud83c\uddf7":["TR","TUR"],"\ud83c\uddf9\ud83c\uddfc":["TW","TWN","CHT","HINET","ROC"],"\ud83c\uddfa\ud83c\udde6":["UA","UKR"],"\ud83c\uddfa\ud83c\uddf8":["US","USA","LAX","SFO","SJC"],"\ud83c\uddfa\ud83c\uddfe":["UY","URY"],"\ud83c\uddfb\ud83c\uddea":["VE","VEN"],"\ud83c\uddfb\ud83c\uddf3":["VN","VNM"],"\ud83c\uddff\ud83c\udde6":["ZA","ZAF","JNB"],"\ud83c\udde8\ud83c\uddf3":["CN","CHN","BACK"]};function getFlag(e){for(var t,r={"\ud83c\udff3\ufe0f\u200d\ud83c\udf08":["\u6d41\u91cf","\u65f6\u95f4","\u8fc7\u671f","Bandwidth","Expire"],"\ud83c\uddf8\ud83c\uddf1":["\u5e94\u6025","\u6d4b\u8bd5\u8282\u70b9"],"\ud83c\udde6\ud83c\udde9":["Andorra","\u5b89\u9053\u5c14"],"\ud83c\udde6\ud83c\uddea":["United Arab Emirates","\u963f\u8054\u914b","\u8fea\u62dc"],"\ud83c\udde6\ud83c\uddeb":["Afghanistan","\u963f\u5bcc\u6c57"],"\ud83c\udde6\ud83c\uddf1":["Albania","\u963f\u5c14\u5df4\u5c3c\u4e9a","\u963f\u723e\u5df4\u5c3c\u4e9e"],"\ud83c\udde6\ud83c\uddf2":["Armenia","\u4e9a\u7f8e\u5c3c\u4e9a"],"\ud83c\udde6\ud83c\uddf7":["Argentina","\u963f\u6839\u5ef7"],"\ud83c\udde6\ud83c\uddf9":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7ef4\u4e5f\u7eb3"],"\ud83c\udde6\ud83c\uddfa":["Australia","\u6fb3\u5927\u5229\u4e9a","\u6fb3\u6d32","\u58a8\u5c14\u672c","\u6089\u5c3c","\u571f\u6fb3","\u4eac\u6fb3","\u5ee3\u6fb3","\u6eec\u6fb3","\u6caa\u6fb3","\u5e7f\u6fb3","Sydney"],"\ud83c\udde6\ud83c\uddff":["Azerbaijan","\u963f\u585e\u62dc\u7586"],"\ud83c\udde7\ud83c\udde6":["Bosnia and Herzegovina","\u6ce2\u9ed1\u5171\u548c\u56fd","\u6ce2\u9ed1"],"\ud83c\udde7\ud83c\udde9":["Bangladesh","\u5b5f\u52a0\u62c9\u56fd","\u5b5f\u52a0\u62c9"],"\ud83c\udde7\ud83c\uddea":["Belgium","\u6bd4\u5229\u65f6","\u6bd4\u5229\u6642"],"\ud83c\udde7\ud83c\uddec":["Bulgaria","\u4fdd\u52a0\u5229\u4e9a","\u4fdd\u52a0\u5229\u4e9e"],"\ud83c\udde7\ud83c\udded":["Bahrain","\u5df4\u6797"],"\ud83c\udde7\ud83c\uddf7":["Brazil","\u5df4\u897f","\u5723\u4fdd\u7f57"],"\ud83c\udde7\ud83c\uddfe":["Belarus","\u767d\u4fc4\u7f57\u65af","\u767d\u4fc4"],"\ud83c\udde8\ud83c\udde6":["Canada","\u52a0\u62ff\u5927","\u8499\u7279\u5229\u5c14","\u6e29\u54e5\u534e","\u6953\u8449","\u67ab\u53f6","\u6ed1\u94c1\u5362","\u591a\u4f26\u591a","Waterloo"],"\ud83c\udde8\ud83c\udded":["Switzerland","\u745e\u58eb","\u82cf\u9ece\u4e16","Zurich"],"\ud83c\udde8\ud83c\uddf1":["Chile","\u667a\u5229"],"\ud83c\udde8\ud83c\uddf4":["Colombia","\u54e5\u4f26\u6bd4\u4e9a"],"\ud83c\udde8\ud83c\uddf7":["Costa Rica","\u54e5\u65af\u8fbe\u9ece\u52a0"],"\ud83c\udde8\ud83c\uddfe":["Cyprus","\u585e\u6d66\u8def\u65af"],"\ud83c\udde8\ud83c\uddff":["Czechia","\u6377\u514b"],"\ud83c\udde9\ud83c\uddea":["German","\u5fb7\u56fd","\u5fb7\u570b","\u4eac\u5fb7","\u6eec\u5fb7","\u5ee3\u5fb7","\u6caa\u5fb7","\u5e7f\u5fb7","\u6cd5\u5170\u514b\u798f","Frankfurt","\u5fb7\u610f\u5fd7"],"\ud83c\udde9\ud83c\uddf0":["Denmark","\u4e39\u9ea6","\u4e39\u9ea5"],"\ud83c\uddea\ud83c\udde8":["Ecuador","\u5384\u74dc\u591a\u5c14"],"\ud83c\uddea\ud83c\uddea":["Estonia","\u7231\u6c99\u5c3c\u4e9a"],"\ud83c\uddea\ud83c\uddec":["Egypt","\u57c3\u53ca"],"\ud83c\uddea\ud83c\uddf8":["Spain","\u897f\u73ed\u7259"],"\ud83c\uddea\ud83c\uddfa":["European Union","\u6b27\u76df","\u6b27\u7f57\u5df4"],"\ud83c\uddeb\ud83c\uddee":["Finland","\u82ac\u5170","\u82ac\u862d","\u8d6b\u5c14\u8f9b\u57fa"],"\ud83c\uddeb\ud83c\uddf7":["France","\u6cd5\u56fd","\u6cd5\u570b","\u5df4\u9ece"],"\ud83c\uddec\ud83c\udde7":["Great Britain","\u82f1\u56fd","England","United Kingdom","\u4f26\u6566","\u82f1","London"],"\ud83c\uddec\ud83c\uddea":["Georgia","\u683c\u9c81\u5409\u4e9a","\u683c\u9b6f\u5409\u4e9e"],"\ud83c\uddec\ud83c\uddf7":["Greece","\u5e0c\u814a","\u5e0c\u81d8"],"\ud83c\udded\ud83c\uddf0":["Hongkong","\u9999\u6e2f","Hong Kong","HongKong","HONG KONG","\u6df1\u6e2f","\u6caa\u6e2f","\u547c\u6e2f","\u7a57\u6e2f","\u4eac\u6e2f","\u6e2f"],"\ud83c\udded\ud83c\uddf7":["Croatia","\u514b\u7f57\u5730\u4e9a","\u514b\u7f85\u5730\u4e9e"],"\ud83c\udded\ud83c\uddfa":["Hungary","\u5308\u7259\u5229"],"\ud83c\uddef\ud83c\uddf4":["Jordan","\u7ea6\u65e6"],"\ud83c\uddef\ud83c\uddf5":["Japan","\u65e5\u672c","\u4e1c\u4eac","\u5927\u962a","\u57fc\u7389","\u6caa\u65e5","\u7a57\u65e5","\u5ddd\u65e5","\u4e2d\u65e5","\u6cc9\u65e5","\u676d\u65e5","\u6df1\u65e5","\u8fbd\u65e5","\u5e7f\u65e5","\u5927\u5742","Osaka","Tokyo"],"\ud83c\uddf0\ud83c\uddea":["Kenya","\u80af\u5c3c\u4e9a"],"\ud83c\uddf0\ud83c\uddec":["Kyrgyzstan","\u5409\u5c14\u5409\u65af\u65af\u5766"],"\ud83c\uddf0\ud83c\udded":["Cambodia","\u67ec\u57d4\u5be8"],"\ud83c\uddf0\ud83c\uddf5":["North Korea","\u671d\u9c9c"],"\ud83c\uddf0\ud83c\uddf7":["Korea","\u97e9\u56fd","\u97d3\u570b","\u97e9","\u97d3","\u9996\u5c14","\u6625\u5ddd","Chuncheon","Seoul"],"\ud83c\uddf0\ud83c\uddff":["Kazakhstan","\u54c8\u8428\u514b\u65af\u5766","\u54c8\u8428\u514b"],"\ud83c\uddee\ud83c\udde9":["Indonesia","\u5370\u5c3c","\u5370\u5ea6\u5c3c\u897f\u4e9a","\u96c5\u52a0\u8fbe"],"\ud83c\uddee\ud83c\uddea":["Ireland","\u7231\u5c14\u5170","\u611b\u723e\u862d","\u90fd\u67cf\u6797"],"\ud83c\uddee\ud83c\uddf1":["Israel","\u4ee5\u8272\u5217"],"\ud83c\uddee\ud83c\uddf2":["Isle of Man","\u9a6c\u6069\u5c9b","\u99ac\u6069\u5cf6"],"\ud83c\uddee\ud83c\uddf3":["India","\u5370\u5ea6","\u5b5f\u4e70","MFumbai"],"\ud83c\uddee\ud83c\uddf7":["Iran","\u4f0a\u6717"],"\ud83c\uddee\ud83c\uddf8":["Iceland","\u51b0\u5c9b","\u51b0\u5cf6"],"\ud83c\uddee\ud83c\uddf9":["Italy","\u610f\u5927\u5229","\u7fa9\u5927\u5229","\u7c73\u5170","Nachash"],"\ud83c\uddf1\ud83c\uddf9":["Lithuania","\u7acb\u9676\u5b9b"],"\ud83c\uddf1\ud83c\uddfa":["Luxembourg","\u5362\u68ee\u5821"],"\ud83c\uddf1\ud83c\uddfb":["Latvia","\u62c9\u8131\u7ef4\u4e9a","Latvija"],"\ud83c\uddf2\ud83c\udde6":["Morocco","\u6469\u6d1b\u54e5"],"\ud83c\uddf2\ud83c\udde9":["Moldova","\u6469\u5c14\u591a\u74e6","\u6469\u723e\u591a\u74e6"],"\ud83c\uddf3\ud83c\uddec":["Nigeria","\u5c3c\u65e5\u5229\u4e9a","\u5c3c\u65e5\u5229\u4e9e"],"\ud83c\uddf2\ud83c\uddf0":["Macedonia","\u9a6c\u5176\u987f","\u99ac\u5176\u9813"],"\ud83c\uddf2\ud83c\uddf3":["Mongolia","\u8499\u53e4"],"\ud83c\uddf2\ud83c\uddf4":["Macao","\u6fb3\u95e8","\u6fb3\u9580","CTM"],"\ud83c\uddf2\ud83c\uddf9":["Malta","\u9a6c\u8033\u4ed6"],"\ud83c\uddf2\ud83c\uddfd":["Mexico","\u58a8\u897f\u54e5"],"\ud83c\uddf2\ud83c\uddfe":["Malaysia","\u9a6c\u6765","\u99ac\u4f86","\u5409\u9686\u5761","\u5927\u99ac"],"\ud83c\uddf3\ud83c\uddf1":["Netherlands","\u8377\u5170","\u8377\u862d","\u5c3c\u5fb7\u862d","\u963f\u59c6\u65af\u7279\u4e39"],"\ud83c\uddf3\ud83c\uddf4":["Norway","\u632a\u5a01"],"\ud83c\uddf3\ud83c\uddf5":["Nepal","\u5c3c\u6cca\u5c14"],"\ud83c\uddf3\ud83c\uddff":["New Zealand","\u65b0\u897f\u5170","\u65b0\u897f\u862d"],"\ud83c\uddf5\ud83c\udde6":["Panama","\u5df4\u62ff\u9a6c"],"\ud83c\uddf5\ud83c\uddea":["Peru","\u79d8\u9c81","\u7955\u9b6f"],"\ud83c\uddf5\ud83c\udded":["Philippines","\u83f2\u5f8b\u5bbe","\u83f2\u5f8b\u8cd3"],"\ud83c\uddf5\ud83c\uddf0":["Pakistan","\u5df4\u57fa\u65af\u5766"],"\ud83c\uddf5\ud83c\uddf1":["Poland","\u6ce2\u5170","\u6ce2\u862d"],"\ud83c\uddf5\ud83c\uddf7":["Puerto Rico","\u6ce2\u591a\u9ece\u5404"],"\ud83c\uddf5\ud83c\uddf9":["Portugal","\u8461\u8404\u7259"],"\ud83c\uddf5\ud83c\uddfe":["Paraguay","\u5df4\u62c9\u572d"],"\ud83c\uddf7\ud83c\uddf4":["Romania","\u7f57\u9a6c\u5c3c\u4e9a"],"\ud83c\uddf7\ud83c\uddf8":["Serbia","\u585e\u5c14\u7ef4\u4e9a"],"\ud83c\uddf7\ud83c\uddea":["R\xe9union","\u7559\u5c3c\u6c6a","\u6cd5\u5c5e\u7559\u5c3c\u6c6a"],"\ud83c\uddf7\ud83c\uddfa":["Russia","\u4fc4\u7f57\u65af","\u4fc4\u56fd","\u4fc4\u7f85\u65af","\u4f2f\u529b","\u83ab\u65af\u79d1","\u5723\u5f7c\u5f97\u5821","\u897f\u4f2f\u5229\u4e9a","\u4eac\u4fc4","\u676d\u4fc4","\u5ee3\u4fc4","\u6eec\u4fc4","\u5e7f\u4fc4","\u6caa\u4fc4","Moscow"],"\ud83c\uddf8\ud83c\udde6":["Saudi","\u6c99\u7279\u963f\u62c9\u4f2f","\u6c99\u7279"],"\ud83c\uddf8\ud83c\uddea":["Sweden","\u745e\u5178"],"\ud83c\uddf8\ud83c\uddec":["Singapore","\u65b0\u52a0\u5761","\u72ee\u57ce","\u6caa\u65b0","\u4eac\u65b0","\u4e2d\u65b0","\u6cc9\u65b0","\u7a57\u65b0","\u6df1\u65b0","\u676d\u65b0","\u5e7f\u65b0","\u5ee3\u65b0","\u6eec\u65b0"],"\ud83c\uddf8\ud83c\uddee":["Slovenia","\u65af\u6d1b\u6587\u5c3c\u4e9a"],"\ud83c\uddf8\ud83c\uddf0":["Slovakia","\u65af\u6d1b\u4f10\u514b"],"\ud83c\uddf9\ud83c\udded":["Thailand","\u6cf0\u56fd","\u6cf0\u570b","\u66fc\u8c37"],"\ud83c\uddf9\ud83c\uddf3":["Tunisia","\u7a81\u5c3c\u65af"],"\ud83c\uddf9\ud83c\uddf7":["Turkey","\u571f\u8033\u5176","\u4f0a\u65af\u5766\u5e03\u5c14"],"\ud83c\uddf9\ud83c\uddfc":["Taiwan","\u53f0\u6e7e","\u81fa\u7063","\u53f0\u7063","\u4e2d\u83ef\u6c11\u570b","\u4e2d\u534e\u6c11\u56fd","\u53f0\u5317","\u53f0\u4e2d","\u65b0\u5317","\u5f70\u5316","\u53f0","\u81fa","Taipei"],"\ud83c\uddfa\ud83c\udde6":["Ukraine","\u4e4c\u514b\u5170","\u70cf\u514b\u862d"],"\ud83c\uddfa\ud83c\uddf8":["United States","\u7f8e\u56fd","America","\u7f8e","\u4eac\u7f8e","\u6ce2\u7279\u5170","\u8fbe\u62c9\u65af","\u4fc4\u52d2\u5188","\u51e4\u51f0\u57ce","\u8d39\u5229\u8499","\u7845\u8c37","\u77fd\u8c37","\u62c9\u65af\u7ef4\u52a0\u65af","\u6d1b\u6749\u77f6","\u5723\u4f55\u585e","\u5723\u514b\u62c9\u62c9","\u897f\u96c5\u56fe","\u829d\u52a0\u54e5","\u6caa\u7f8e","\u54e5\u4f26\u5e03","\u7ebd\u7ea6","Los Angeles","San Jose","Sillicon Valley","Michigan"],"\ud83c\uddfa\ud83c\uddfe":["Uruguay","\u4e4c\u62c9\u572d"],"\ud83c\uddfb\ud83c\uddea":["Venezuela","\u59d4\u5185\u745e\u62c9"],"\ud83c\uddfb\ud83c\uddf3":["Vietnam","\u8d8a\u5357","\u80e1\u5fd7\u660e"],"\ud83c\uddff\ud83c\udde6":["South Africa","\u5357\u975e"],"\ud83c\udde8\ud83c\uddf3":["China","\u4e2d\u56fd","\u4e2d\u570b","\u56de\u56fd","\u56de\u570b","\u56fd\u5185","\u570b\u5167","\u534e\u4e1c","\u534e\u897f","\u534e\u5357","\u534e\u5317","\u534e\u4e2d","\u6c5f\u82cf","\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733","\u676d\u5dde","\u5f90\u5dde","\u9752\u5c9b","\u5b81\u6ce2","\u9547\u6c5f"]},n=(null===(t=e.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/))||void 0===t?void 0:t[0])||"\ud83c\udff4\u200d\u2620\ufe0f",o=0,a=Object.keys(r);o<a.length;o++){var s=a[o];if(r[s].some((function(t){return RegExp("".concat(t),"i").test(e)})))return/\u5185\u8499\u53e4/.test(e)&&["\ud83c\uddf2\ud83c\uddf3"].includes(s)?"\ud83c\udde8\ud83c\uddf3":s}for(var i=0,u=Object.keys(ISOFlags);i<u.length;i++){var c=u[i];if(ISOFlags[c].some((function(t){return RegExp("(^|[^a-zA-Z])".concat(t,"([^a-zA-Z]|$)")).test(e)})))return c}return n}var _$lodash_35={exports:{}};(function(t){(function(){(function(){var r="Expected a function",n="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",s="[object Array]",i="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",p="[object GeneratorFunction]",f="[object Map]",_="[object Number]",d="[object Object]",h="[object RegExp]",y="[object Set]",v="[object String]",m="[object Symbol]",g="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",A="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",$="[object Int32Array]",C="[object Uint8Array]",k="[object Uint16Array]",P="[object Uint32Array]",O=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,T=/[&<>"']/g,F=RegExp(j.source),L=RegExp(T.source),D=/<%-([\s\S]+?)%>/g,N=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,G=RegExp(H.source),Y=/^\s+/,K=/\s/,z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,W=/\{\n\/\* \[wrapped with (.+)\] \*/,V=/,? & /,X=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/[()=,{}\[\]\/\s]/,Q=/\\(\\)?/g,Z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ee=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,ne=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ie=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",le="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+le+"]",fe="["+ce+"]",_e="\\d+",de="[a-z\\xdf-\\xf6\\xf8-\\xff]",he="[^\\ud800-\\udfff"+le+_e+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ye="\\ud83c[\\udffb-\\udfff]",ve="[^\\ud800-\\udfff]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",be="[A-Z\\xc0-\\xd6\\xd8-\\xde]",we="(?:"+de+"|"+he+")",Ae="(?:"+be+"|"+he+")",Ee="(?:"+fe+"|"+ye+")?",xe="[\\ufe0e\\ufe0f]?"+Ee+"(?:\\u200d(?:"+[ve,me,ge].join("|")+")[\\ufe0e\\ufe0f]?"+Ee+")*",Se="(?:"+["[\\u2700-\\u27bf]",me,ge].join("|")+")"+xe,$e="(?:"+[ve+fe+"?",fe,me,ge,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['\u2019]","g"),ke=RegExp(fe,"g"),Pe=RegExp(ye+"(?="+ye+")|"+$e+xe,"g"),Oe=RegExp([be+"?"+de+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pe,be,"$"].join("|")+")",Ae+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pe,be+we,"$"].join("|")+")",be+"?"+we+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",be+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_e,Se].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff"+ce+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,je=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,Fe={};Fe[A]=Fe[E]=Fe[x]=Fe[S]=Fe[$]=Fe[C]=Fe["[object Uint8ClampedArray]"]=Fe[k]=Fe[P]=!0,Fe[a]=Fe[s]=Fe[b]=Fe[i]=Fe[w]=Fe[u]=Fe[c]=Fe[l]=Fe[f]=Fe[_]=Fe[d]=Fe[h]=Fe[y]=Fe[v]=Fe[g]=!1;var Le={};Le[a]=Le[s]=Le[b]=Le[w]=Le[i]=Le[u]=Le[A]=Le[E]=Le[x]=Le[S]=Le[$]=Le[f]=Le[_]=Le[d]=Le[h]=Le[y]=Le[v]=Le[m]=Le[C]=Le["[object Uint8ClampedArray]"]=Le[k]=Le[P]=!0,Le[c]=Le[l]=Le[g]=!1;var De={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ne=parseFloat,Be=parseInt,Ue="object"==typeof t&&t&&t.Object===Object&&t,Me="object"==typeof self&&self&&self.Object===Object&&self,qe=Ue||Me||Function("return this")(),He="object"==typeof _$lodash_35.exports&&_$lodash_35.exports&&!_$lodash_35.exports.nodeType&&_$lodash_35.exports,Ge=He&&_$lodash_35&&!_$lodash_35.nodeType&&_$lodash_35,Ye=Ge&&Ge.exports===He,Ke=Ye&&Ue.process,ze=function(){try{return Ge&&Ge.require&&Ge.require("util").types||Ke&&Ke.binding&&Ke.binding("util")}catch(e){}}(),We=ze&&ze.isArrayBuffer,Ve=ze&&ze.isDate,Xe=ze&&ze.isMap,Je=ze&&ze.isRegExp,Qe=ze&&ze.isSet,Ze=ze&&ze.isTypedArray;function et(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function tt(e,t,r,n){for(var o=-1,a=null==e?0:e.length;++o<a;){var s=e[o];t(n,s,r(s),e)}return n}function rt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function nt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function at(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[o++]=s)}return a}function st(e,t){return!(null==e||!e.length)&&yt(e,t,0)>-1}function it(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function ut(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function ct(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function lt(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}function pt(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}function ft(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _t=bt("length");function dt(e,t,r){var n;return r(e,(function(e,r,o){if(t(e,r,o))return n=r,!1})),n}function ht(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function yt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):ht(e,mt,r)}function vt(e,t,r,n){for(var o=r-1,a=e.length;++o<a;)if(n(e[o],t))return o;return-1}function mt(e){return e!=e}function gt(e,t){var r=null==e?0:e.length;return r?Et(e,t)/r:NaN}function bt(e){return function(t){return null==t?void 0:t[e]}}function wt(e){return function(t){return null==e?void 0:e[t]}}function At(e,t,r,n,o){return o(e,(function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)})),r}function Et(e,t){for(var r,n=-1,o=e.length;++n<o;){var a=t(e[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r}function xt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function St(e){return e?e.slice(0,qt(e)+1).replace(Y,""):e}function $t(e){return function(t){return e(t)}}function Ct(e,t){return ut(t,(function(t){return e[t]}))}function kt(e,t){return e.has(t)}function Pt(e,t){for(var r=-1,n=e.length;++r<n&&yt(t,e[r],0)>-1;);return r}function Ot(e,t){for(var r=e.length;r--&&yt(t,e[r],0)>-1;);return r}var It=wt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Rt=wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jt(e){return"\\"+De[e]}function Tt(e){return Ie.test(e)}function Ft(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function Lt(e,t){return function(r){return e(t(r))}}function Dt(e,t){for(var r=-1,o=e.length,a=0,s=[];++r<o;){var i=e[r];i!==t&&i!==n||(e[r]=n,s[a++]=r)}return s}function Nt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function Bt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function Ut(e){return Tt(e)?function(e){for(var t=Pe.lastIndex=0;Pe.test(e);)++t;return t}(e):_t(e)}function Mt(e){return Tt(e)?function(e){return e.match(Pe)||[]}(e):function(e){return e.split("")}(e)}function qt(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Ht=wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Gt=function t(K){var ce,le=(K=null==K?qe:Gt.defaults(qe.Object(),K,Gt.pick(qe,je))).Array,pe=K.Date,fe=K.Error,_e=K.Function,de=K.Math,he=K.Object,ye=K.RegExp,ve=K.String,me=K.TypeError,ge=le.prototype,be=_e.prototype,we=he.prototype,Ae=K["__core-js_shared__"],Ee=be.toString,xe=we.hasOwnProperty,Se=0,$e=(ce=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"",Pe=we.toString,Ie=Ee.call(he),De=qe._,Ue=ye("^"+Ee.call(xe).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=Ye?K.Buffer:void 0,He=K.Symbol,Ge=K.Uint8Array,Ke=Me?Me.allocUnsafe:void 0,ze=Lt(he.getPrototypeOf,he),_t=he.create,wt=we.propertyIsEnumerable,Yt=ge.splice,Kt=He?He.isConcatSpreadable:void 0,zt=He?He.iterator:void 0,Wt=He?He.toStringTag:void 0,Vt=function(){try{var t=ea(he,"defineProperty");return t({},"",{}),t}catch(e){}}(),Xt=K.clearTimeout!==qe.clearTimeout&&K.clearTimeout,Jt=pe&&pe.now!==qe.Date.now&&pe.now,Qt=K.setTimeout!==qe.setTimeout&&K.setTimeout,Zt=de.ceil,er=de.floor,tr=he.getOwnPropertySymbols,rr=Me?Me.isBuffer:void 0,nr=K.isFinite,or=ge.join,ar=Lt(he.keys,he),sr=de.max,ir=de.min,ur=pe.now,cr=K.parseInt,lr=de.random,pr=ge.reverse,fr=ea(K,"DataView"),_r=ea(K,"Map"),dr=ea(K,"Promise"),hr=ea(K,"Set"),yr=ea(K,"WeakMap"),vr=ea(he,"create"),mr=yr&&new yr,gr={},br=$a(fr),wr=$a(_r),Ar=$a(dr),Er=$a(hr),xr=$a(yr),Sr=He?He.prototype:void 0,$r=Sr?Sr.valueOf:void 0,Cr=Sr?Sr.toString:void 0;function kr(e){if(Hs(e)&&!Rs(e)&&!(e instanceof Rr)){if(e instanceof Ir)return e;if(xe.call(e,"__wrapped__"))return Ca(e)}return new Ir(e)}var Pr=function(){function e(){}return function(t){if(!qs(t))return{};if(_t)return _t(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Or(){}function Ir(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Rr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Lr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Fr;++t<r;)this.add(e[t])}function Dr(e){var t=this.__data__=new Tr(e);this.size=t.size}function Nr(e,t){var r=Rs(e),n=!r&&Is(e),o=!r&&!n&&Ls(e),a=!r&&!n&&!o&&Js(e),s=r||n||o||a,i=s?xt(e.length,ve):[],u=i.length;for(var c in e)!t&&!xe.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ia(c,u))||i.push(c);return i}function Br(e){var t=e.length;return t?e[Ln(0,t-1)]:void 0}function Ur(e,t){return Ea(mo(e),Vr(t,0,e.length))}function Mr(e){return Ea(mo(e))}function qr(e,t,r){(void 0===r||ks(e[t],r))&&(void 0!==r||t in e)||zr(e,t,r)}function Hr(e,t,r){var n=e[t];xe.call(e,t)&&ks(n,r)&&(void 0!==r||t in e)||zr(e,t,r)}function Gr(e,t){for(var r=e.length;r--;)if(ks(e[r][0],t))return r;return-1}function Yr(e,t,r,n){return en(e,(function(e,o,a){t(n,e,r(e),a)})),n}function Kr(e,t){return e&&go(t,gi(t),e)}function zr(e,t,r){"__proto__"==t&&Vt?Vt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Wr(e,t){for(var r=-1,n=t.length,o=le(n),a=null==e;++r<n;)o[r]=a?void 0:di(e,t[r]);return o}function Vr(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function Xr(e,t,r,n,o,s){var c,g=1&t,O=2&t,I=4&t;if(r&&(c=o?r(e,n,o,s):r(e)),void 0!==c)return c;if(!qs(e))return e;var R=Rs(e);if(R){if(c=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&xe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!g)return mo(e,c)}else{var j=na(e),T=j==l||j==p;if(Ls(e))return po(e,g);if(j==d||j==a||T&&!o){if(c=O||T?{}:aa(e),!g)return O?function(e,t){return go(e,ra(e),t)}(e,function(e,t){return e&&go(t,bi(t),e)}(c,e)):function(e,t){return go(e,ta(e),t)}(e,Kr(c,e))}else{if(!Le[j])return o?e:{};c=function(e,t,r){var n,o,a,s=e.constructor;switch(t){case b:return fo(e);case i:case u:return new s(+e);case w:return function(e,t){var r=t?fo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case A:case E:case x:case S:case $:case C:case"[object Uint8ClampedArray]":case k:case P:return _o(e,r);case f:return new s;case _:case v:return new s(e);case h:return(a=new(o=e).constructor(o.source,ee.exec(o))).lastIndex=o.lastIndex,a;case y:return new s;case m:return n=e,$r?he($r.call(n)):{}}}(e,j,g)}}s||(s=new Dr);var F=s.get(e);if(F)return F;s.set(e,c),Ws(e)?e.forEach((function(n){c.add(Xr(n,t,r,n,e,s))})):Gs(e)&&e.forEach((function(n,o){c.set(o,Xr(n,t,r,o,e,s))}));var L=R?void 0:(I?O?zo:Ko:O?bi:gi)(e);return rt(L||e,(function(n,o){L&&(n=e[o=n]),Hr(c,o,Xr(n,t,r,o,e,s))})),c}function Jr(e,t,r){var n=r.length;if(null==e)return!n;for(e=he(e);n--;){var o=r[n],a=t[o],s=e[o];if(void 0===s&&!(o in e)||!a(s))return!1}return!0}function Qr(e,t,n){if("function"!=typeof e)throw new me(r);return ga((function(){e.apply(void 0,n)}),t)}function Zr(e,t,r,n){var o=-1,a=st,s=!0,i=e.length,u=[],c=t.length;if(!i)return u;r&&(t=ut(t,$t(r))),n?(a=it,s=!1):t.length>=200&&(a=kt,s=!1,t=new Lr(t));e:for(;++o<i;){var l=e[o],p=null==r?l:r(l);if(l=n||0!==l?l:0,s&&p==p){for(var f=c;f--;)if(t[f]===p)continue e;u.push(l)}else a(t,p,n)||u.push(l)}return u}kr.templateSettings={escape:D,evaluate:N,interpolate:B,variable:"",imports:{_:kr}},kr.prototype=Or.prototype,kr.prototype.constructor=kr,Ir.prototype=Pr(Or.prototype),Ir.prototype.constructor=Ir,Rr.prototype=Pr(Or.prototype),Rr.prototype.constructor=Rr,jr.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},jr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jr.prototype.get=function(e){var t=this.__data__;if(vr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return xe.call(t,e)?t[e]:void 0},jr.prototype.has=function(e){var t=this.__data__;return vr?void 0!==t[e]:xe.call(t,e)},jr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=vr&&void 0===t?"__lodash_hash_undefined__":t,this},Tr.prototype.clear=function(){this.__data__=[],this.size=0},Tr.prototype.delete=function(e){var t=this.__data__,r=Gr(t,e);return!(r<0||(r==t.length-1?t.pop():Yt.call(t,r,1),--this.size,0))},Tr.prototype.get=function(e){var t=this.__data__,r=Gr(t,e);return r<0?void 0:t[r][1]},Tr.prototype.has=function(e){return Gr(this.__data__,e)>-1},Tr.prototype.set=function(e,t){var r=this.__data__,n=Gr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Fr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(_r||Tr),string:new jr}},Fr.prototype.delete=function(e){var t=Qo(this,e).delete(e);return this.size-=t?1:0,t},Fr.prototype.get=function(e){return Qo(this,e).get(e)},Fr.prototype.has=function(e){return Qo(this,e).has(e)},Fr.prototype.set=function(e,t){var r=Qo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Lr.prototype.add=Lr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Lr.prototype.has=function(e){return this.__data__.has(e)},Dr.prototype.clear=function(){this.__data__=new Tr,this.size=0},Dr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Dr.prototype.get=function(e){return this.__data__.get(e)},Dr.prototype.has=function(e){return this.__data__.has(e)},Dr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Tr){var n=r.__data__;if(!_r||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fr(n)}return r.set(e,t),this.size=r.size,this};var en=Ao(cn),tn=Ao(ln,!0);function rn(e,t){var r=!0;return en(e,(function(e,n,o){return r=!!t(e,n,o)})),r}function nn(e,t,r){for(var n=-1,o=e.length;++n<o;){var a=e[n],s=t(a);if(null!=s&&(void 0===i?s==s&&!Xs(s):r(s,i)))var i=s,u=a}return u}function on(e,t){var r=[];return en(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function an(e,t,r,n,o){var a=-1,s=e.length;for(r||(r=sa),o||(o=[]);++a<s;){var i=e[a];t>0&&r(i)?t>1?an(i,t-1,r,n,o):ct(o,i):n||(o[o.length]=i)}return o}var sn=Eo(),un=Eo(!0);function cn(e,t){return e&&sn(e,t,gi)}function ln(e,t){return e&&un(e,t,gi)}function pn(e,t){return at(t,(function(t){return Bs(e[t])}))}function fn(e,t){for(var r=0,n=(t=io(t,e)).length;null!=e&&r<n;)e=e[Sa(t[r++])];return r&&r==n?e:void 0}function _n(e,t,r){var n=t(e);return Rs(e)?n:ct(n,r(e))}function dn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Wt&&Wt in he(t)?function(t){var r=xe.call(t,Wt),n=t[Wt];try{t[Wt]=void 0;var o=!0}catch(e){}var a=Pe.call(t);return o&&(r?t[Wt]=n:delete t[Wt]),a}(t):function(e){return Pe.call(e)}(t)}function hn(e,t){return e>t}function yn(e,t){return null!=e&&xe.call(e,t)}function vn(e,t){return null!=e&&t in he(e)}function mn(e,t,r){for(var n=r?it:st,o=e[0].length,a=e.length,s=a,i=le(a),u=1/0,c=[];s--;){var l=e[s];s&&t&&(l=ut(l,$t(t))),u=ir(l.length,u),i[s]=!r&&(t||o>=120&&l.length>=120)?new Lr(s&&l):void 0}l=e[0];var p=-1,f=i[0];e:for(;++p<o&&c.length<u;){var _=l[p],d=t?t(_):_;if(_=r||0!==_?_:0,!(f?kt(f,d):n(c,d,r))){for(s=a;--s;){var h=i[s];if(!(h?kt(h,d):n(e[s],d,r)))continue e}f&&f.push(d),c.push(_)}}return c}function gn(e,t,r){var n=null==(e=ya(e,t=io(t,e)))?e:e[Sa(Na(t))];return null==n?void 0:et(n,e,r)}function bn(e){return Hs(e)&&dn(e)==a}function wn(e,t,r,n,o){return e===t||(null==e||null==t||!Hs(e)&&!Hs(t)?e!=e&&t!=t:function(e,t,r,n,o,l){var p=Rs(e),g=Rs(t),A=p?s:na(e),E=g?s:na(t),x=(A=A==a?d:A)==d,S=(E=E==a?d:E)==d,$=A==E;if($&&Ls(e)){if(!Ls(t))return!1;p=!0,x=!1}if($&&!x)return l||(l=new Dr),p||Js(e)?Go(e,t,r,n,o,l):function(e,t,r,n,o,a,s){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!a(new Ge(e),new Ge(t)));case i:case u:case _:return ks(+e,+t);case c:return e.name==t.name&&e.message==t.message;case h:case v:return e==t+"";case f:var l=Ft;case y:var p=1&n;if(l||(l=Nt),e.size!=t.size&&!p)return!1;var d=s.get(e);if(d)return d==t;n|=2,s.set(e,t);var g=Go(l(e),l(t),n,o,a,s);return s.delete(e),g;case m:if($r)return $r.call(e)==$r.call(t)}return!1}(e,t,A,r,n,o,l);if(!(1&r)){var C=x&&xe.call(e,"__wrapped__"),k=S&&xe.call(t,"__wrapped__");if(C||k){var P=C?e.value():e,O=k?t.value():t;return l||(l=new Dr),o(P,O,r,n,l)}}return!!$&&(l||(l=new Dr),function(e,t,r,n,o,a){var s=1&r,i=Ko(e),u=i.length;if(u!=Ko(t).length&&!s)return!1;for(var c=u;c--;){var l=i[c];if(!(s?l in t:xe.call(t,l)))return!1}var p=a.get(e),f=a.get(t);if(p&&f)return p==t&&f==e;var _=!0;a.set(e,t),a.set(t,e);for(var d=s;++c<u;){var h=e[l=i[c]],y=t[l];if(n)var v=s?n(y,h,l,t,e,a):n(h,y,l,e,t,a);if(!(void 0===v?h===y||o(h,y,r,n,a):v)){_=!1;break}d||(d="constructor"==l)}if(_&&!d){var m=e.constructor,g=t.constructor;m!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g)&&(_=!1)}return a.delete(e),a.delete(t),_}(e,t,r,n,o,l))}(e,t,r,n,wn,o))}function An(e,t,r,n){var o=r.length,a=o,s=!n;if(null==e)return!a;for(e=he(e);o--;){var i=r[o];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++o<a;){var u=(i=r[o])[0],c=e[u],l=i[1];if(s&&i[2]){if(void 0===c&&!(u in e))return!1}else{var p=new Dr;if(n)var f=n(c,l,u,e,t,p);if(!(void 0===f?wn(l,c,3,n,p):f))return!1}}return!0}function En(e){return!(!qs(e)||(t=e,$e&&$e in t))&&(Bs(e)?Ue:ne).test($a(e));var t}function xn(e){return"function"==typeof e?e:null==e?Yi:"object"==typeof e?Rs(e)?Pn(e[0],e[1]):kn(e):eu(e)}function Sn(e){if(!fa(e))return ar(e);var t=[];for(var r in he(e))xe.call(e,r)&&"constructor"!=r&&t.push(r);return t}function $n(e,t){return e<t}function Cn(e,t){var r=-1,n=Ts(e)?le(e.length):[];return en(e,(function(e,o,a){n[++r]=t(e,o,a)})),n}function kn(e){var t=Zo(e);return 1==t.length&&t[0][2]?da(t[0][0],t[0][1]):function(r){return r===e||An(r,e,t)}}function Pn(e,t){return ca(e)&&_a(t)?da(Sa(e),t):function(r){var n=di(r,e);return void 0===n&&n===t?hi(r,e):wn(t,n,3)}}function On(e,t,r,n,o){e!==t&&sn(t,(function(a,s){if(o||(o=new Dr),qs(a))!function(e,t,r,n,o,a,s){var i=va(e,r),u=va(t,r),c=s.get(u);if(c)qr(e,r,c);else{var l=a?a(i,u,r+"",e,t,s):void 0,p=void 0===l;if(p){var f=Rs(u),_=!f&&Ls(u),d=!f&&!_&&Js(u);l=u,f||_||d?Rs(i)?l=i:Fs(i)?l=mo(i):_?(p=!1,l=po(u,!0)):d?(p=!1,l=_o(u,!0)):l=[]:Ks(u)||Is(u)?(l=i,Is(i)?l=ai(i):qs(i)&&!Bs(i)||(l=aa(u))):p=!1}p&&(s.set(u,l),o(l,u,n,a,s),s.delete(u)),qr(e,r,l)}}(e,t,s,r,On,n,o);else{var i=n?n(va(e,s),a,s+"",e,t,o):void 0;void 0===i&&(i=a),qr(e,s,i)}}),bi)}function In(e,t){var r=e.length;if(r)return ia(t+=t<0?r:0,r)?e[t]:void 0}function Rn(e,t,r){t=t.length?ut(t,(function(e){return Rs(e)?function(t){return fn(t,1===e.length?e[0]:e)}:e})):[Yi];var n=-1;return t=ut(t,$t(Jo())),function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,s=o.length,i=r.length;++n<s;){var u=ho(o[n],a[n]);if(u)return n>=i?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));n--;)e[n]=e[n].value;return e}(Cn(e,(function(e,r,o){return{criteria:ut(t,(function(t){return t(e)})),index:++n,value:e}})))}function jn(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var s=t[n],i=fn(e,s);r(i,s)&&Mn(a,io(s,e),i)}return a}function Tn(e,t,r,n){var o=n?vt:yt,a=-1,s=t.length,i=e;for(e===t&&(t=mo(t)),r&&(i=ut(e,$t(r)));++a<s;)for(var u=0,c=t[a],l=r?r(c):c;(u=o(i,l,u,n))>-1;)i!==e&&Yt.call(i,u,1),Yt.call(e,u,1);return e}function Fn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==a){var a=o;ia(o)?Yt.call(e,o,1):Zn(e,o)}}return e}function Ln(e,t){return e+er(lr()*(t-e+1))}function Dn(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=er(t/2))&&(e+=e)}while(t);return r}function Nn(e,t){return ba(ha(e,t,Yi),e+"")}function Bn(e){return Br(ki(e))}function Un(e,t){var r=ki(e);return Ea(r,Vr(t,0,r.length))}function Mn(e,t,r,n){if(!qs(e))return e;for(var o=-1,a=(t=io(t,e)).length,s=a-1,i=e;null!=i&&++o<a;){var u=Sa(t[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var l=i[u];void 0===(c=n?n(l,u,i):void 0)&&(c=qs(l)?l:ia(t[o+1])?[]:{})}Hr(i,u,c),i=i[u]}return e}var qn=mr?function(e,t){return mr.set(e,t),e}:Yi,Hn=Vt?function(e,t){return Vt(e,"toString",{configurable:!0,enumerable:!1,value:qi(t),writable:!0})}:Yi;function Gn(e){return Ea(ki(e))}function Yn(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=le(o);++n<o;)a[n]=e[n+t];return a}function Kn(e,t){var r;return en(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}function zn(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var a=n+o>>>1,s=e[a];null!==s&&!Xs(s)&&(r?s<=t:s<t)?n=a+1:o=a}return o}return Wn(e,t,Yi,r)}function Wn(e,t,r,n){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,i=null===t,u=Xs(t),c=void 0===t;o<a;){var l=er((o+a)/2),p=r(e[l]),f=void 0!==p,_=null===p,d=p==p,h=Xs(p);if(s)var y=n||d;else y=c?d&&(n||f):i?d&&f&&(n||!_):u?d&&f&&!_&&(n||!h):!_&&!h&&(n?p<=t:p<t);y?o=l+1:a=l}return ir(a,4294967294)}function Vn(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var s=e[r],i=t?t(s):s;if(!r||!ks(i,u)){var u=i;a[o++]=0===s?0:s}}return a}function Xn(e){return"number"==typeof e?e:Xs(e)?NaN:+e}function Jn(e){if("string"==typeof e)return e;if(Rs(e))return ut(e,Jn)+"";if(Xs(e))return Cr?Cr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qn(e,t,r){var n=-1,o=st,a=e.length,s=!0,i=[],u=i;if(r)s=!1,o=it;else if(a>=200){var c=t?null:No(e);if(c)return Nt(c);s=!1,o=kt,u=new Lr}else u=t?[]:i;e:for(;++n<a;){var l=e[n],p=t?t(l):l;if(l=r||0!==l?l:0,s&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),i.push(l)}else o(u,p,r)||(u!==i&&u.push(p),i.push(l))}return i}function Zn(e,t){return null==(e=ya(e,t=io(t,e)))||delete e[Sa(Na(t))]}function eo(e,t,r,n){return Mn(e,t,r(fn(e,t)),n)}function to(e,t,r,n){for(var o=e.length,a=n?o:-1;(n?a--:++a<o)&&t(e[a],a,e););return r?Yn(e,n?0:a,n?a+1:o):Yn(e,n?a+1:0,n?o:a)}function ro(e,t){var r=e;return r instanceof Rr&&(r=r.value()),lt(t,(function(e,t){return t.func.apply(t.thisArg,ct([e],t.args))}),r)}function no(e,t,r){var n=e.length;if(n<2)return n?Qn(e[0]):[];for(var o=-1,a=le(n);++o<n;)for(var s=e[o],i=-1;++i<n;)i!=o&&(a[o]=Zr(a[o]||s,e[i],t,r));return Qn(an(a,1),t,r)}function oo(e,t,r){for(var n=-1,o=e.length,a=t.length,s={};++n<o;){var i=n<a?t[n]:void 0;r(s,e[n],i)}return s}function ao(e){return Fs(e)?e:[]}function so(e){return"function"==typeof e?e:Yi}function io(e,t){return Rs(e)?e:ca(e,t)?[e]:xa(si(e))}var uo=Nn;function co(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Yn(e,t,r)}var lo=Xt||function(e){return qe.clearTimeout(e)};function po(e,t){if(t)return e.slice();var r=e.length,n=Ke?Ke(r):new e.constructor(r);return e.copy(n),n}function fo(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function _o(e,t){var r=t?fo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ho(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,a=Xs(e),s=void 0!==t,i=null===t,u=t==t,c=Xs(t);if(!i&&!c&&!a&&e>t||a&&s&&u&&!i&&!c||n&&s&&u||!r&&u||!o)return 1;if(!n&&!a&&!c&&e<t||c&&r&&o&&!n&&!a||i&&r&&o||!s&&o||!u)return-1}return 0}function yo(e,t,r,n){for(var o=-1,a=e.length,s=r.length,i=-1,u=t.length,c=sr(a-s,0),l=le(u+c),p=!n;++i<u;)l[i]=t[i];for(;++o<s;)(p||o<a)&&(l[r[o]]=e[o]);for(;c--;)l[i++]=e[o++];return l}function vo(e,t,r,n){for(var o=-1,a=e.length,s=-1,i=r.length,u=-1,c=t.length,l=sr(a-i,0),p=le(l+c),f=!n;++o<l;)p[o]=e[o];for(var _=o;++u<c;)p[_+u]=t[u];for(;++s<i;)(f||o<a)&&(p[_+r[s]]=e[o++]);return p}function mo(e,t){var r=-1,n=e.length;for(t||(t=le(n));++r<n;)t[r]=e[r];return t}function go(e,t,r,n){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var i=t[a],u=n?n(r[i],e[i],i,r,e):void 0;void 0===u&&(u=e[i]),o?zr(r,i,u):Hr(r,i,u)}return r}function bo(e,t){return function(r,n){var o=Rs(r)?tt:Yr,a=t?t():{};return o(r,e,Jo(n,2),a)}}function wo(e){return Nn((function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&ua(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=he(t);++n<o;){var i=r[n];i&&e(t,i,n,a)}return t}))}function Ao(e,t){return function(r,n){if(null==r)return r;if(!Ts(r))return e(r,n);for(var o=r.length,a=t?o:-1,s=he(r);(t?a--:++a<o)&&!1!==n(s[a],a,s););return r}}function Eo(e){return function(t,r,n){for(var o=-1,a=he(t),s=n(t),i=s.length;i--;){var u=s[e?i:++o];if(!1===r(a[u],u,a))break}return t}}function xo(e){return function(t){var r=Tt(t=si(t))?Mt(t):void 0,n=r?r[0]:t.charAt(0),o=r?co(r,1).join(""):t.slice(1);return n[e]()+o}}function So(e){return function(t){return lt(Bi(Ii(t).replace(Ce,"")),e,"")}}function $o(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Pr(e.prototype),n=e.apply(r,t);return qs(n)?n:r}}function Co(e){return function(t,r,n){var o=he(t);if(!Ts(t)){var a=Jo(r,3);t=gi(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,n);return s>-1?o[a?t[s]:s]:void 0}}function ko(e){return Yo((function(t){var n=t.length,o=n,a=Ir.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new me(r);if(a&&!i&&"wrapper"==Vo(s))var i=new Ir([],!0)}for(o=i?o:n;++o<n;){var u=Vo(s=t[o]),c="wrapper"==u?Wo(s):void 0;i=c&&la(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?i[Vo(c[0])].apply(i,c[3]):1==s.length&&la(s)?i[u]():i.thru(s)}return function(){var e=arguments,r=e[0];if(i&&1==e.length&&Rs(r))return i.plant(r).value();for(var o=0,a=n?t[o].apply(this,e):r;++o<n;)a=t[o].call(this,a);return a}}))}function Po(e,t,r,n,o,a,s,i,u,c){var l=128&t,p=1&t,f=2&t,_=24&t,d=512&t,h=f?void 0:$o(e);return function y(){for(var v=arguments.length,m=le(v),g=v;g--;)m[g]=arguments[g];if(_)var b=Xo(y),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(m,b);if(n&&(m=yo(m,n,o,_)),a&&(m=vo(m,a,s,_)),v-=w,_&&v<c){var A=Dt(m,b);return Lo(e,t,Po,y.placeholder,r,m,A,i,u,c-v)}var E=p?r:this,x=f?E[e]:e;return v=m.length,i?m=function(e,t){for(var r=e.length,n=ir(t.length,r),o=mo(e);n--;){var a=t[n];e[n]=ia(a,r)?o[a]:void 0}return e}(m,i):d&&v>1&&m.reverse(),l&&u<v&&(m.length=u),this&&this!==qe&&this instanceof y&&(x=h||$o(x)),x.apply(E,m)}}function Oo(e,t){return function(r,n){return function(e,t,r,n){return cn(e,(function(e,o,a){t(n,r(e),o,a)})),n}(r,e,t(n),{})}}function Io(e,t){return function(r,n){var o;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(o=r),void 0!==n){if(void 0===o)return n;"string"==typeof r||"string"==typeof n?(r=Jn(r),n=Jn(n)):(r=Xn(r),n=Xn(n)),o=e(r,n)}return o}}function Ro(e){return Yo((function(t){return t=ut(t,$t(Jo())),Nn((function(r){var n=this;return e(t,(function(e){return et(e,n,r)}))}))}))}function jo(e,t){var r=(t=void 0===t?" ":Jn(t)).length;if(r<2)return r?Dn(t,e):t;var n=Dn(t,Zt(e/Ut(t)));return Tt(t)?co(Mt(n),0,e).join(""):n.slice(0,e)}function To(e){return function(t,r,n){return n&&"number"!=typeof n&&ua(t,r,n)&&(r=n=void 0),t=ti(t),void 0===r?(r=t,t=0):r=ti(r),function(e,t,r,n){for(var o=-1,a=sr(Zt((t-e)/(r||1)),0),s=le(a);a--;)s[n?a:++o]=e,e+=r;return s}(t,r,n=void 0===n?t<r?1:-1:ti(n),e)}}function Fo(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=oi(t),r=oi(r)),e(t,r)}}function Lo(e,t,r,n,o,a,s,i,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var p=[e,t,o,l?a:void 0,l?s:void 0,l?void 0:a,l?void 0:s,i,u,c],f=r.apply(void 0,p);return la(e)&&ma(f,p),f.placeholder=n,wa(f,e,t)}function Do(e){var t=de[e];return function(e,r){if(e=oi(e),(r=null==r?0:ir(ri(r),292))&&nr(e)){var n=(si(e)+"e").split("e");return+((n=(si(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var No=hr&&1/Nt(new hr([,-0]))[1]==1/0?function(e){return new hr(e)}:Xi;function Bo(e){return function(t){var r=na(t);return r==f?Ft(t):r==y?Bt(t):function(e,t){return ut(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Uo(e,t,o,a,s,i,u,c){var l=2&t;if(!l&&"function"!=typeof e)throw new me(r);var p=a?a.length:0;if(p||(t&=-97,a=s=void 0),u=void 0===u?u:sr(ri(u),0),c=void 0===c?c:ri(c),p-=s?s.length:0,64&t){var f=a,_=s;a=s=void 0}var d=l?void 0:Wo(e),h=[e,t,o,a,s,f,_,i,u,c];if(d&&function(e,t){var r=e[1],o=t[1],a=r|o,s=a<131,i=128==o&&8==r||128==o&&256==r&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==r;if(!s&&!i)return e;1&o&&(e[2]=t[2],a|=1&r?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?yo(c,u,t[4]):u,e[4]=c?Dt(e[3],n):t[4]}(u=t[5])&&(c=e[5],e[5]=c?vo(c,u,t[6]):u,e[6]=c?Dt(e[5],n):t[6]),(u=t[7])&&(e[7]=u),128&o&&(e[8]=null==e[8]?t[8]:ir(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(h,d),e=h[0],t=h[1],o=h[2],a=h[3],s=h[4],!(c=h[9]=void 0===h[9]?l?0:e.length:sr(h[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,r){var n=$o(e);return function o(){for(var a=arguments.length,s=le(a),i=a,u=Xo(o);i--;)s[i]=arguments[i];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:Dt(s,u);return(a-=c.length)<r?Lo(e,t,Po,o.placeholder,void 0,s,c,void 0,void 0,r-a):et(this&&this!==qe&&this instanceof o?n:e,this,s)}}(e,t,c):32!=t&&33!=t||s.length?Po.apply(void 0,h):function(e,t,r,n){var o=1&t,a=$o(e);return function t(){for(var s=-1,i=arguments.length,u=-1,c=n.length,l=le(c+i),p=this&&this!==qe&&this instanceof t?a:e;++u<c;)l[u]=n[u];for(;i--;)l[u++]=arguments[++s];return et(p,o?r:this,l)}}(e,t,o,a);else var y=function(e,t,r){var n=1&t,o=$o(e);return function t(){return(this&&this!==qe&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,o);return wa((d?qn:ma)(y,h),e,t)}function Mo(e,t,r,n){return void 0===e||ks(e,we[r])&&!xe.call(n,r)?t:e}function qo(e,t,r,n,o,a){return qs(e)&&qs(t)&&(a.set(t,e),On(e,t,void 0,qo,a),a.delete(t)),e}function Ho(e){return Ks(e)?void 0:e}function Go(e,t,r,n,o,a){var s=1&r,i=e.length,u=t.length;if(i!=u&&!(s&&u>i))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var p=-1,f=!0,_=2&r?new Lr:void 0;for(a.set(e,t),a.set(t,e);++p<i;){var d=e[p],h=t[p];if(n)var y=s?n(h,d,p,t,e,a):n(d,h,p,e,t,a);if(void 0!==y){if(y)continue;f=!1;break}if(_){if(!ft(t,(function(e,t){if(!kt(_,t)&&(d===e||o(d,e,r,n,a)))return _.push(t)}))){f=!1;break}}else if(d!==h&&!o(d,h,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Yo(e){return ba(ha(e,void 0,ja),e+"")}function Ko(e){return _n(e,gi,ta)}function zo(e){return _n(e,bi,ra)}var Wo=mr?function(e){return mr.get(e)}:Xi;function Vo(e){for(var t=e.name+"",r=gr[t],n=xe.call(gr,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t}function Xo(e){return(xe.call(kr,"placeholder")?kr:e).placeholder}function Jo(){var e=kr.iteratee||Ki;return e=e===Ki?xn:e,arguments.length?e(arguments[0],arguments[1]):e}function Qo(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Zo(e){for(var t=gi(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,_a(o)]}return t}function ea(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return En(r)?r:void 0}var ta=tr?function(e){return null==e?[]:(e=he(e),at(tr(e),(function(t){return wt.call(e,t)})))}:nu,ra=tr?function(e){for(var t=[];e;)ct(t,ta(e)),e=ze(e);return t}:nu,na=dn;function oa(e,t,r){for(var n=-1,o=(t=io(t,e)).length,a=!1;++n<o;){var s=Sa(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&Ms(o)&&ia(s,o)&&(Rs(e)||Is(e))}function aa(e){return"function"!=typeof e.constructor||fa(e)?{}:Pr(ze(e))}function sa(e){return Rs(e)||Is(e)||!!(Kt&&e&&e[Kt])}function ia(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ua(e,t,r){if(!qs(r))return!1;var n=typeof t;return!!("number"==n?Ts(r)&&ia(t,r.length):"string"==n&&t in r)&&ks(r[t],e)}function ca(e,t){if(Rs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Xs(e))||M.test(e)||!U.test(e)||null!=t&&e in he(t)}function la(e){var t=Vo(e),r=kr[t];if("function"!=typeof r||!(t in Rr.prototype))return!1;if(e===r)return!0;var n=Wo(r);return!!n&&e===n[0]}(fr&&na(new fr(new ArrayBuffer(1)))!=w||_r&&na(new _r)!=f||dr&&"[object Promise]"!=na(dr.resolve())||hr&&na(new hr)!=y||yr&&na(new yr)!=g)&&(na=function(e){var t=dn(e),r=t==d?e.constructor:void 0,n=r?$a(r):"";if(n)switch(n){case br:return w;case wr:return f;case Ar:return"[object Promise]";case Er:return y;case xr:return g}return t});var pa=Ae?Bs:ou;function fa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function _a(e){return e==e&&!qs(e)}function da(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in he(r))}}function ha(e,t,r){return t=sr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=sr(n.length-t,0),s=le(a);++o<a;)s[o]=n[t+o];o=-1;for(var i=le(t+1);++o<t;)i[o]=n[o];return i[t]=r(s),et(e,this,i)}}function ya(e,t){return t.length<2?e:fn(e,Yn(t,0,-1))}function va(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ma=Aa(qn),ga=Qt||function(e,t){return qe.setTimeout(e,t)},ba=Aa(Hn);function wa(e,t,r){var n=t+"";return ba(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(z,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return rt(o,(function(r){var n="_."+r[0];t&r[1]&&!st(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(W);return t?t[1].split(V):[]}(n),r)))}function Aa(e){var t=0,r=0;return function(){var n=ur(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ea(e,t){var r=-1,n=e.length,o=n-1;for(t=void 0===t?n:t;++r<t;){var a=Ln(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var xa=function(e){var t=As((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(q,(function(e,r,n,o){t.push(n?o.replace(Q,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}();function Sa(e){if("string"==typeof e||Xs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $a(t){if(null!=t){try{return Ee.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ca(e){if(e instanceof Rr)return e.clone();var t=new Ir(e.__wrapped__,e.__chain__);return t.__actions__=mo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ka=Nn((function(e,t){return Fs(e)?Zr(e,an(t,1,Fs,!0)):[]})),Pa=Nn((function(e,t){var r=Na(t);return Fs(r)&&(r=void 0),Fs(e)?Zr(e,an(t,1,Fs,!0),Jo(r,2)):[]})),Oa=Nn((function(e,t){var r=Na(t);return Fs(r)&&(r=void 0),Fs(e)?Zr(e,an(t,1,Fs,!0),void 0,r):[]}));function Ia(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:ri(r);return o<0&&(o=sr(n+o,0)),ht(e,Jo(t,3),o)}function Ra(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return void 0!==r&&(o=ri(r),o=r<0?sr(n+o,0):ir(o,n-1)),ht(e,Jo(t,3),o,!0)}function ja(e){return null!=e&&e.length?an(e,1):[]}function Ta(e){return e&&e.length?e[0]:void 0}var Fa=Nn((function(e){var t=ut(e,ao);return t.length&&t[0]===e[0]?mn(t):[]})),La=Nn((function(e){var t=Na(e),r=ut(e,ao);return t===Na(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?mn(r,Jo(t,2)):[]})),Da=Nn((function(e){var t=Na(e),r=ut(e,ao);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?mn(r,void 0,t):[]}));function Na(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ba=Nn(Ua);function Ua(e,t){return e&&e.length&&t&&t.length?Tn(e,t):e}var Ma=Yo((function(e,t){var r=null==e?0:e.length,n=Wr(e,t);return Fn(e,ut(t,(function(e){return ia(e,r)?+e:e})).sort(ho)),n}));function qa(e){return null==e?e:pr.call(e)}var Ha=Nn((function(e){return Qn(an(e,1,Fs,!0))})),Ga=Nn((function(e){var t=Na(e);return Fs(t)&&(t=void 0),Qn(an(e,1,Fs,!0),Jo(t,2))})),Ya=Nn((function(e){var t=Na(e);return t="function"==typeof t?t:void 0,Qn(an(e,1,Fs,!0),void 0,t)}));function Ka(e){if(!e||!e.length)return[];var t=0;return e=at(e,(function(e){if(Fs(e))return t=sr(e.length,t),!0})),xt(t,(function(t){return ut(e,bt(t))}))}function za(e,t){if(!e||!e.length)return[];var r=Ka(e);return null==t?r:ut(r,(function(e){return et(t,void 0,e)}))}var Wa=Nn((function(e,t){return Fs(e)?Zr(e,t):[]})),Va=Nn((function(e){return no(at(e,Fs))})),Xa=Nn((function(e){var t=Na(e);return Fs(t)&&(t=void 0),no(at(e,Fs),Jo(t,2))})),Ja=Nn((function(e){var t=Na(e);return t="function"==typeof t?t:void 0,no(at(e,Fs),void 0,t)})),Qa=Nn(Ka),Za=Nn((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,za(e,r)}));function es(e){var t=kr(e);return t.__chain__=!0,t}function ts(e,t){return t(e)}var rs=Yo((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return Wr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Rr&&ia(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ts,args:[o],thisArg:void 0}),new Ir(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)})),ns=bo((function(e,t,r){xe.call(e,r)?++e[r]:zr(e,r,1)})),os=Co(Ia),as=Co(Ra);function ss(e,t){return(Rs(e)?rt:en)(e,Jo(t,3))}function is(e,t){return(Rs(e)?nt:tn)(e,Jo(t,3))}var us=bo((function(e,t,r){xe.call(e,r)?e[r].push(t):zr(e,r,[t])})),cs=Nn((function(e,t,r){var n=-1,o="function"==typeof t,a=Ts(e)?le(e.length):[];return en(e,(function(e){a[++n]=o?et(t,e,r):gn(e,t,r)})),a})),ls=bo((function(e,t,r){zr(e,r,t)}));function ps(e,t){return(Rs(e)?ut:Cn)(e,Jo(t,3))}var fs=bo((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),_s=Nn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ua(e,t[0],t[1])?t=[]:r>2&&ua(t[0],t[1],t[2])&&(t=[t[0]]),Rn(e,an(t,1),[])})),ds=Jt||function(){return qe.Date.now()};function hs(e,t,r){return t=r?void 0:t,Uo(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ys(e,t){var n;if("function"!=typeof t)throw new me(r);return e=ri(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var vs=Nn((function(e,t,r){var n=1;if(r.length){var o=Dt(r,Xo(vs));n|=32}return Uo(e,n,t,r,o)})),ms=Nn((function(e,t,r){var n=3;if(r.length){var o=Dt(r,Xo(ms));n|=32}return Uo(t,n,e,r,o)}));function gs(e,t,n){var o,a,s,i,u,c,l=0,p=!1,f=!1,_=!0;if("function"!=typeof e)throw new me(r);function d(t){var r=o,n=a;return o=a=void 0,l=t,i=e.apply(n,r)}function h(e){var r=e-c;return void 0===c||r>=t||r<0||f&&e-l>=s}function y(){var e=ds();if(h(e))return v(e);u=ga(y,function(e){var r=t-(e-c);return f?ir(r,s-(e-l)):r}(e))}function v(e){return u=void 0,_&&o?d(e):(o=a=void 0,i)}function m(){var e=ds(),r=h(e);if(o=arguments,a=this,c=e,r){if(void 0===u)return function(e){return l=e,u=ga(y,t),p?d(e):i}(c);if(f)return lo(u),u=ga(y,t),d(c)}return void 0===u&&(u=ga(y,t)),i}return t=oi(t)||0,qs(n)&&(p=!!n.leading,s=(f="maxWait"in n)?sr(oi(n.maxWait)||0,t):s,_="trailing"in n?!!n.trailing:_),m.cancel=function(){void 0!==u&&lo(u),l=0,o=c=a=u=void 0},m.flush=function(){return void 0===u?i:v(ds())},m}var bs=Nn((function(e,t){return Qr(e,1,t)})),ws=Nn((function(e,t,r){return Qr(e,oi(t)||0,r)}));function As(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new me(r);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(As.Cache||Fr),n}function Es(e){if("function"!=typeof e)throw new me(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}As.Cache=Fr;var xs=uo((function(e,t){var r=(t=1==t.length&&Rs(t[0])?ut(t[0],$t(Jo())):ut(an(t,1),$t(Jo()))).length;return Nn((function(n){for(var o=-1,a=ir(n.length,r);++o<a;)n[o]=t[o].call(this,n[o]);return et(e,this,n)}))})),Ss=Nn((function(e,t){return Uo(e,32,void 0,t,Dt(t,Xo(Ss)))})),$s=Nn((function(e,t){return Uo(e,64,void 0,t,Dt(t,Xo($s)))})),Cs=Yo((function(e,t){return Uo(e,256,void 0,void 0,void 0,t)}));function ks(e,t){return e===t||e!=e&&t!=t}var Ps=Fo(hn),Os=Fo((function(e,t){return e>=t})),Is=bn(function(){return arguments}())?bn:function(e){return Hs(e)&&xe.call(e,"callee")&&!wt.call(e,"callee")},Rs=le.isArray,js=We?$t(We):function(e){return Hs(e)&&dn(e)==b};function Ts(e){return null!=e&&Ms(e.length)&&!Bs(e)}function Fs(e){return Hs(e)&&Ts(e)}var Ls=rr||ou,Ds=Ve?$t(Ve):function(e){return Hs(e)&&dn(e)==u};function Ns(e){if(!Hs(e))return!1;var t=dn(e);return t==c||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ks(e)}function Bs(e){if(!qs(e))return!1;var t=dn(e);return t==l||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Us(e){return"number"==typeof e&&e==ri(e)}function Ms(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Hs(e){return null!=e&&"object"==typeof e}var Gs=Xe?$t(Xe):function(e){return Hs(e)&&na(e)==f};function Ys(e){return"number"==typeof e||Hs(e)&&dn(e)==_}function Ks(e){if(!Hs(e)||dn(e)!=d)return!1;var t=ze(e);if(null===t)return!0;var r=xe.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ee.call(r)==Ie}var zs=Je?$t(Je):function(e){return Hs(e)&&dn(e)==h},Ws=Qe?$t(Qe):function(e){return Hs(e)&&na(e)==y};function Vs(e){return"string"==typeof e||!Rs(e)&&Hs(e)&&dn(e)==v}function Xs(e){return"symbol"==typeof e||Hs(e)&&dn(e)==m}var Js=Ze?$t(Ze):function(e){return Hs(e)&&Ms(e.length)&&!!Fe[dn(e)]},Qs=Fo($n),Zs=Fo((function(e,t){return e<=t}));function ei(e){if(!e)return[];if(Ts(e))return Vs(e)?Mt(e):mo(e);if(zt&&e[zt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[zt]());var t=na(e);return(t==f?Ft:t==y?Nt:ki)(e)}function ti(e){return e?(e=oi(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ri(e){var t=ti(e),r=t%1;return t==t?r?t-r:t:0}function ni(e){return e?Vr(ri(e),0,4294967295):0}function oi(e){if("number"==typeof e)return e;if(Xs(e))return NaN;if(qs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=St(e);var r=re.test(e);return r||oe.test(e)?Be(e.slice(2),r?2:8):te.test(e)?NaN:+e}function ai(e){return go(e,bi(e))}function si(e){return null==e?"":Jn(e)}var ii=wo((function(e,t){if(fa(t)||Ts(t))go(t,gi(t),e);else for(var r in t)xe.call(t,r)&&Hr(e,r,t[r])})),ui=wo((function(e,t){go(t,bi(t),e)})),ci=wo((function(e,t,r,n){go(t,bi(t),e,n)})),li=wo((function(e,t,r,n){go(t,gi(t),e,n)})),pi=Yo(Wr),fi=Nn((function(e,t){e=he(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&ua(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],s=bi(a),i=-1,u=s.length;++i<u;){var c=s[i],l=e[c];(void 0===l||ks(l,we[c])&&!xe.call(e,c))&&(e[c]=a[c])}return e})),_i=Nn((function(e){return e.push(void 0,qo),et(Ai,void 0,e)}));function di(e,t,r){var n=null==e?void 0:fn(e,t);return void 0===n?r:n}function hi(e,t){return null!=e&&oa(e,t,vn)}var yi=Oo((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),e[t]=r}),qi(Yi)),vi=Oo((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),xe.call(e,t)?e[t].push(r):e[t]=[r]}),Jo),mi=Nn(gn);function gi(e){return Ts(e)?Nr(e):Sn(e)}function bi(e){return Ts(e)?Nr(e,!0):function(e){if(!qs(e))return function(e){var t=[];if(null!=e)for(var r in he(e))t.push(r);return t}(e);var t=fa(e),r=[];for(var n in e)("constructor"!=n||!t&&xe.call(e,n))&&r.push(n);return r}(e)}var wi=wo((function(e,t,r){On(e,t,r)})),Ai=wo((function(e,t,r,n){On(e,t,r,n)})),Ei=Yo((function(e,t){var r={};if(null==e)return r;var n=!1;t=ut(t,(function(t){return t=io(t,e),n||(n=t.length>1),t})),go(e,zo(e),r),n&&(r=Xr(r,7,Ho));for(var o=t.length;o--;)Zn(r,t[o]);return r})),xi=Yo((function(e,t){return null==e?{}:function(e,t){return jn(e,t,(function(t,r){return hi(e,r)}))}(e,t)}));function Si(e,t){if(null==e)return{};var r=ut(zo(e),(function(e){return[e]}));return t=Jo(t),jn(e,r,(function(e,r){return t(e,r[0])}))}var $i=Bo(gi),Ci=Bo(bi);function ki(e){return null==e?[]:Ct(e,gi(e))}var Pi=So((function(e,t,r){return t=t.toLowerCase(),e+(r?Oi(t):t)}));function Oi(e){return Ni(si(e).toLowerCase())}function Ii(e){return(e=si(e))&&e.replace(se,It).replace(ke,"")}var Ri=So((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),ji=So((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ti=xo("toLowerCase"),Fi=So((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Li=So((function(e,t,r){return e+(r?" ":"")+Ni(t)})),Di=So((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ni=xo("toUpperCase");function Bi(e,t,r){return e=si(e),void 0===(t=r?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(Oe)||[]}(e):function(e){return e.match(X)||[]}(e):e.match(t)||[]}var Ui=Nn((function(t,r){try{return et(t,void 0,r)}catch(e){return Ns(e)?e:new fe(e)}})),Mi=Yo((function(e,t){return rt(t,(function(t){t=Sa(t),zr(e,t,vs(e[t],e))})),e}));function qi(e){return function(){return e}}var Hi=ko(),Gi=ko(!0);function Yi(e){return e}function Ki(e){return xn("function"==typeof e?e:Xr(e,1))}var zi=Nn((function(e,t){return function(r){return gn(r,e,t)}})),Wi=Nn((function(e,t){return function(r){return gn(e,r,t)}}));function Vi(e,t,r){var n=gi(t),o=pn(t,n);null!=r||qs(t)&&(o.length||!n.length)||(r=t,t=e,e=this,o=pn(t,gi(t)));var a=!(qs(r)&&"chain"in r&&!r.chain),s=Bs(e);return rt(o,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=mo(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,ct([this.value()],arguments))})})),e}function Xi(){}var Ji=Ro(ut),Qi=Ro(ot),Zi=Ro(ft);function eu(e){return ca(e)?bt(Sa(e)):function(e){return function(t){return fn(t,e)}}(e)}var tu=To(),ru=To(!0);function nu(){return[]}function ou(){return!1}var au,su=Io((function(e,t){return e+t}),0),iu=Do("ceil"),uu=Io((function(e,t){return e/t}),1),cu=Do("floor"),lu=Io((function(e,t){return e*t}),1),pu=Do("round"),fu=Io((function(e,t){return e-t}),0);return kr.after=function(e,t){if("function"!=typeof t)throw new me(r);return e=ri(e),function(){if(--e<1)return t.apply(this,arguments)}},kr.ary=hs,kr.assign=ii,kr.assignIn=ui,kr.assignInWith=ci,kr.assignWith=li,kr.at=pi,kr.before=ys,kr.bind=vs,kr.bindAll=Mi,kr.bindKey=ms,kr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Rs(e)?e:[e]},kr.chain=es,kr.chunk=function(e,t,r){t=(r?ua(e,t,r):void 0===t)?1:sr(ri(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,a=0,s=le(Zt(n/t));o<n;)s[a++]=Yn(e,o,o+=t);return s},kr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var a=e[t];a&&(o[n++]=a)}return o},kr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=le(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return ct(Rs(r)?mo(r):[r],an(t,1))},kr.cond=function(e){var t=null==e?0:e.length,n=Jo();return e=t?ut(e,(function(e){if("function"!=typeof e[1])throw new me(r);return[n(e[0]),e[1]]})):[],Nn((function(r){for(var n=-1;++n<t;){var o=e[n];if(et(o[0],this,r))return et(o[1],this,r)}}))},kr.conforms=function(e){return function(e){var t=gi(e);return function(r){return Jr(r,e,t)}}(Xr(e,1))},kr.constant=qi,kr.countBy=ns,kr.create=function(e,t){var r=Pr(e);return null==t?r:Kr(r,t)},kr.curry=function e(t,r,n){var o=Uo(t,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return o.placeholder=e.placeholder,o},kr.curryRight=function e(t,r,n){var o=Uo(t,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return o.placeholder=e.placeholder,o},kr.debounce=gs,kr.defaults=fi,kr.defaultsDeep=_i,kr.defer=bs,kr.delay=ws,kr.difference=ka,kr.differenceBy=Pa,kr.differenceWith=Oa,kr.drop=function(e,t,r){var n=null==e?0:e.length;return n?Yn(e,(t=r||void 0===t?1:ri(t))<0?0:t,n):[]},kr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?Yn(e,0,(t=n-(t=r||void 0===t?1:ri(t)))<0?0:t):[]},kr.dropRightWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!0,!0):[]},kr.dropWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!0):[]},kr.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&ua(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=ri(r))<0&&(r=-r>o?0:o+r),(n=void 0===n||n>o?o:ri(n))<0&&(n+=o),n=r>n?0:ni(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},kr.filter=function(e,t){return(Rs(e)?at:on)(e,Jo(t,3))},kr.flatMap=function(e,t){return an(ps(e,t),1)},kr.flatMapDeep=function(e,t){return an(ps(e,t),1/0)},kr.flatMapDepth=function(e,t,r){return r=void 0===r?1:ri(r),an(ps(e,t),r)},kr.flatten=ja,kr.flattenDeep=function(e){return null!=e&&e.length?an(e,1/0):[]},kr.flattenDepth=function(e,t){return null!=e&&e.length?an(e,t=void 0===t?1:ri(t)):[]},kr.flip=function(e){return Uo(e,512)},kr.flow=Hi,kr.flowRight=Gi,kr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},kr.functions=function(e){return null==e?[]:pn(e,gi(e))},kr.functionsIn=function(e){return null==e?[]:pn(e,bi(e))},kr.groupBy=us,kr.initial=function(e){return null!=e&&e.length?Yn(e,0,-1):[]},kr.intersection=Fa,kr.intersectionBy=La,kr.intersectionWith=Da,kr.invert=yi,kr.invertBy=vi,kr.invokeMap=cs,kr.iteratee=Ki,kr.keyBy=ls,kr.keys=gi,kr.keysIn=bi,kr.map=ps,kr.mapKeys=function(e,t){var r={};return t=Jo(t,3),cn(e,(function(e,n,o){zr(r,t(e,n,o),e)})),r},kr.mapValues=function(e,t){var r={};return t=Jo(t,3),cn(e,(function(e,n,o){zr(r,n,t(e,n,o))})),r},kr.matches=function(e){return kn(Xr(e,1))},kr.matchesProperty=function(e,t){return Pn(e,Xr(t,1))},kr.memoize=As,kr.merge=wi,kr.mergeWith=Ai,kr.method=zi,kr.methodOf=Wi,kr.mixin=Vi,kr.negate=Es,kr.nthArg=function(e){return e=ri(e),Nn((function(t){return In(t,e)}))},kr.omit=Ei,kr.omitBy=function(e,t){return Si(e,Es(Jo(t)))},kr.once=function(e){return ys(2,e)},kr.orderBy=function(e,t,r,n){return null==e?[]:(Rs(t)||(t=null==t?[]:[t]),Rs(r=n?void 0:r)||(r=null==r?[]:[r]),Rn(e,t,r))},kr.over=Ji,kr.overArgs=xs,kr.overEvery=Qi,kr.overSome=Zi,kr.partial=Ss,kr.partialRight=$s,kr.partition=fs,kr.pick=xi,kr.pickBy=Si,kr.property=eu,kr.propertyOf=function(e){return function(t){return null==e?void 0:fn(e,t)}},kr.pull=Ba,kr.pullAll=Ua,kr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Tn(e,t,Jo(r,2)):e},kr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Tn(e,t,void 0,r):e},kr.pullAt=Ma,kr.range=tu,kr.rangeRight=ru,kr.rearg=Cs,kr.reject=function(e,t){return(Rs(e)?at:on)(e,Es(Jo(t,3)))},kr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],a=e.length;for(t=Jo(t,3);++n<a;){var s=e[n];t(s,n,e)&&(r.push(s),o.push(n))}return Fn(e,o),r},kr.rest=function(e,t){if("function"!=typeof e)throw new me(r);return Nn(e,t=void 0===t?t:ri(t))},kr.reverse=qa,kr.sampleSize=function(e,t,r){return t=(r?ua(e,t,r):void 0===t)?1:ri(t),(Rs(e)?Ur:Un)(e,t)},kr.set=function(e,t,r){return null==e?e:Mn(e,t,r)},kr.setWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Mn(e,t,r,n)},kr.shuffle=function(e){return(Rs(e)?Mr:Gn)(e)},kr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&ua(e,t,r)?(t=0,r=n):(t=null==t?0:ri(t),r=void 0===r?n:ri(r)),Yn(e,t,r)):[]},kr.sortBy=_s,kr.sortedUniq=function(e){return e&&e.length?Vn(e):[]},kr.sortedUniqBy=function(e,t){return e&&e.length?Vn(e,Jo(t,2)):[]},kr.split=function(e,t,r){return r&&"number"!=typeof r&&ua(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=si(e))&&("string"==typeof t||null!=t&&!zs(t))&&!(t=Jn(t))&&Tt(e)?co(Mt(e),0,r):e.split(t,r):[]},kr.spread=function(e,t){if("function"!=typeof e)throw new me(r);return t=null==t?0:sr(ri(t),0),Nn((function(r){var n=r[t],o=co(r,0,t);return n&&ct(o,n),et(e,this,o)}))},kr.tail=function(e){var t=null==e?0:e.length;return t?Yn(e,1,t):[]},kr.take=function(e,t,r){return e&&e.length?Yn(e,0,(t=r||void 0===t?1:ri(t))<0?0:t):[]},kr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?Yn(e,(t=n-(t=r||void 0===t?1:ri(t)))<0?0:t,n):[]},kr.takeRightWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!1,!0):[]},kr.takeWhile=function(e,t){return e&&e.length?to(e,Jo(t,3)):[]},kr.tap=function(e,t){return t(e),e},kr.throttle=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new me(r);return qs(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),gs(e,t,{leading:o,maxWait:t,trailing:a})},kr.thru=ts,kr.toArray=ei,kr.toPairs=$i,kr.toPairsIn=Ci,kr.toPath=function(e){return Rs(e)?ut(e,Sa):Xs(e)?[e]:mo(xa(si(e)))},kr.toPlainObject=ai,kr.transform=function(e,t,r){var n=Rs(e),o=n||Ls(e)||Js(e);if(t=Jo(t,4),null==r){var a=e&&e.constructor;r=o?n?new a:[]:qs(e)&&Bs(a)?Pr(ze(e)):{}}return(o?rt:cn)(e,(function(e,n,o){return t(r,e,n,o)})),r},kr.unary=function(e){return hs(e,1)},kr.union=Ha,kr.unionBy=Ga,kr.unionWith=Ya,kr.uniq=function(e){return e&&e.length?Qn(e):[]},kr.uniqBy=function(e,t){return e&&e.length?Qn(e,Jo(t,2)):[]},kr.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qn(e,void 0,t):[]},kr.unset=function(e,t){return null==e||Zn(e,t)},kr.unzip=Ka,kr.unzipWith=za,kr.update=function(e,t,r){return null==e?e:eo(e,t,so(r))},kr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:eo(e,t,so(r),n)},kr.values=ki,kr.valuesIn=function(e){return null==e?[]:Ct(e,bi(e))},kr.without=Wa,kr.words=Bi,kr.wrap=function(e,t){return Ss(so(t),e)},kr.xor=Va,kr.xorBy=Xa,kr.xorWith=Ja,kr.zip=Qa,kr.zipObject=function(e,t){return oo(e||[],t||[],Hr)},kr.zipObjectDeep=function(e,t){return oo(e||[],t||[],Mn)},kr.zipWith=Za,kr.entries=$i,kr.entriesIn=Ci,kr.extend=ui,kr.extendWith=ci,Vi(kr,kr),kr.add=su,kr.attempt=Ui,kr.camelCase=Pi,kr.capitalize=Oi,kr.ceil=iu,kr.clamp=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=oi(r))==r?r:0),void 0!==t&&(t=(t=oi(t))==t?t:0),Vr(oi(e),t,r)},kr.clone=function(e){return Xr(e,4)},kr.cloneDeep=function(e){return Xr(e,5)},kr.cloneDeepWith=function(e,t){return Xr(e,5,t="function"==typeof t?t:void 0)},kr.cloneWith=function(e,t){return Xr(e,4,t="function"==typeof t?t:void 0)},kr.conformsTo=function(e,t){return null==t||Jr(e,t,gi(t))},kr.deburr=Ii,kr.defaultTo=function(e,t){return null==e||e!=e?t:e},kr.divide=uu,kr.endsWith=function(e,t,r){e=si(e),t=Jn(t);var n=e.length,o=r=void 0===r?n:Vr(ri(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},kr.eq=ks,kr.escape=function(e){return(e=si(e))&&L.test(e)?e.replace(T,Rt):e},kr.escapeRegExp=function(e){return(e=si(e))&&G.test(e)?e.replace(H,"\\$&"):e},kr.every=function(e,t,r){var n=Rs(e)?ot:rn;return r&&ua(e,t,r)&&(t=void 0),n(e,Jo(t,3))},kr.find=os,kr.findIndex=Ia,kr.findKey=function(e,t){return dt(e,Jo(t,3),cn)},kr.findLast=as,kr.findLastIndex=Ra,kr.findLastKey=function(e,t){return dt(e,Jo(t,3),ln)},kr.floor=cu,kr.forEach=ss,kr.forEachRight=is,kr.forIn=function(e,t){return null==e?e:sn(e,Jo(t,3),bi)},kr.forInRight=function(e,t){return null==e?e:un(e,Jo(t,3),bi)},kr.forOwn=function(e,t){return e&&cn(e,Jo(t,3))},kr.forOwnRight=function(e,t){return e&&ln(e,Jo(t,3))},kr.get=di,kr.gt=Ps,kr.gte=Os,kr.has=function(e,t){return null!=e&&oa(e,t,yn)},kr.hasIn=hi,kr.head=Ta,kr.identity=Yi,kr.includes=function(e,t,r,n){e=Ts(e)?e:ki(e),r=r&&!n?ri(r):0;var o=e.length;return r<0&&(r=sr(o+r,0)),Vs(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&yt(e,t,r)>-1},kr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:ri(r);return o<0&&(o=sr(n+o,0)),yt(e,t,o)},kr.inRange=function(e,t,r){return t=ti(t),void 0===r?(r=t,t=0):r=ti(r),function(e,t,r){return e>=ir(t,r)&&e<sr(t,r)}(e=oi(e),t,r)},kr.invoke=mi,kr.isArguments=Is,kr.isArray=Rs,kr.isArrayBuffer=js,kr.isArrayLike=Ts,kr.isArrayLikeObject=Fs,kr.isBoolean=function(e){return!0===e||!1===e||Hs(e)&&dn(e)==i},kr.isBuffer=Ls,kr.isDate=Ds,kr.isElement=function(e){return Hs(e)&&1===e.nodeType&&!Ks(e)},kr.isEmpty=function(e){if(null==e)return!0;if(Ts(e)&&(Rs(e)||"string"==typeof e||"function"==typeof e.splice||Ls(e)||Js(e)||Is(e)))return!e.length;var t=na(e);if(t==f||t==y)return!e.size;if(fa(e))return!Sn(e).length;for(var r in e)if(xe.call(e,r))return!1;return!0},kr.isEqual=function(e,t){return wn(e,t)},kr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?wn(e,t,void 0,r):!!n},kr.isError=Ns,kr.isFinite=function(e){return"number"==typeof e&&nr(e)},kr.isFunction=Bs,kr.isInteger=Us,kr.isLength=Ms,kr.isMap=Gs,kr.isMatch=function(e,t){return e===t||An(e,t,Zo(t))},kr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:void 0,An(e,t,Zo(t),r)},kr.isNaN=function(e){return Ys(e)&&e!=+e},kr.isNative=function(e){if(pa(e))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return En(e)},kr.isNil=function(e){return null==e},kr.isNull=function(e){return null===e},kr.isNumber=Ys,kr.isObject=qs,kr.isObjectLike=Hs,kr.isPlainObject=Ks,kr.isRegExp=zs,kr.isSafeInteger=function(e){return Us(e)&&e>=-9007199254740991&&e<=9007199254740991},kr.isSet=Ws,kr.isString=Vs,kr.isSymbol=Xs,kr.isTypedArray=Js,kr.isUndefined=function(e){return void 0===e},kr.isWeakMap=function(e){return Hs(e)&&na(e)==g},kr.isWeakSet=function(e){return Hs(e)&&"[object WeakSet]"==dn(e)},kr.join=function(e,t){return null==e?"":or.call(e,t)},kr.kebabCase=Ri,kr.last=Na,kr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return void 0!==r&&(o=(o=ri(r))<0?sr(n+o,0):ir(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):ht(e,mt,o,!0)},kr.lowerCase=ji,kr.lowerFirst=Ti,kr.lt=Qs,kr.lte=Zs,kr.max=function(e){return e&&e.length?nn(e,Yi,hn):void 0},kr.maxBy=function(e,t){return e&&e.length?nn(e,Jo(t,2),hn):void 0},kr.mean=function(e){return gt(e,Yi)},kr.meanBy=function(e,t){return gt(e,Jo(t,2))},kr.min=function(e){return e&&e.length?nn(e,Yi,$n):void 0},kr.minBy=function(e,t){return e&&e.length?nn(e,Jo(t,2),$n):void 0},kr.stubArray=nu,kr.stubFalse=ou,kr.stubObject=function(){return{}},kr.stubString=function(){return""},kr.stubTrue=function(){return!0},kr.multiply=lu,kr.nth=function(e,t){return e&&e.length?In(e,ri(t)):void 0},kr.noConflict=function(){return qe._===this&&(qe._=De),this},kr.noop=Xi,kr.now=ds,kr.pad=function(e,t,r){e=si(e);var n=(t=ri(t))?Ut(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return jo(er(o),r)+e+jo(Zt(o),r)},kr.padEnd=function(e,t,r){e=si(e);var n=(t=ri(t))?Ut(e):0;return t&&n<t?e+jo(t-n,r):e},kr.padStart=function(e,t,r){e=si(e);var n=(t=ri(t))?Ut(e):0;return t&&n<t?jo(t-n,r)+e:e},kr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),cr(si(e).replace(Y,""),t||0)},kr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&ua(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ti(e),void 0===t?(t=e,e=0):t=ti(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=lr();return ir(e+o*(t-e+Ne("1e-"+((o+"").length-1))),t)}return Ln(e,t)},kr.reduce=function(e,t,r){var n=Rs(e)?lt:At,o=arguments.length<3;return n(e,Jo(t,4),r,o,en)},kr.reduceRight=function(e,t,r){var n=Rs(e)?pt:At,o=arguments.length<3;return n(e,Jo(t,4),r,o,tn)},kr.repeat=function(e,t,r){return t=(r?ua(e,t,r):void 0===t)?1:ri(t),Dn(si(e),t)},kr.replace=function(){var e=arguments,t=si(e[0]);return e.length<3?t:t.replace(e[1],e[2])},kr.result=function(e,t,r){var n=-1,o=(t=io(t,e)).length;for(o||(o=1,e=void 0);++n<o;){var a=null==e?void 0:e[Sa(t[n])];void 0===a&&(n=o,a=r),e=Bs(a)?a.call(e):a}return e},kr.round=pu,kr.runInContext=t,kr.sample=function(e){return(Rs(e)?Br:Bn)(e)},kr.size=function(e){if(null==e)return 0;if(Ts(e))return Vs(e)?Ut(e):e.length;var t=na(e);return t==f||t==y?e.size:Sn(e).length},kr.snakeCase=Fi,kr.some=function(e,t,r){var n=Rs(e)?ft:Kn;return r&&ua(e,t,r)&&(t=void 0),n(e,Jo(t,3))},kr.sortedIndex=function(e,t){return zn(e,t)},kr.sortedIndexBy=function(e,t,r){return Wn(e,t,Jo(r,2))},kr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=zn(e,t);if(n<r&&ks(e[n],t))return n}return-1},kr.sortedLastIndex=function(e,t){return zn(e,t,!0)},kr.sortedLastIndexBy=function(e,t,r){return Wn(e,t,Jo(r,2),!0)},kr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=zn(e,t,!0)-1;if(ks(e[r],t))return r}return-1},kr.startCase=Li,kr.startsWith=function(e,t,r){return e=si(e),r=null==r?0:Vr(ri(r),0,e.length),t=Jn(t),e.slice(r,r+t.length)==t},kr.subtract=fu,kr.sum=function(e){return e&&e.length?Et(e,Yi):0},kr.sumBy=function(e,t){return e&&e.length?Et(e,Jo(t,2)):0},kr.template=function(e,t,r){var n=kr.templateSettings;r&&ua(e,t,r)&&(t=void 0),e=si(e),t=ci({},t,n,Mo);var o,a,s=ci({},t.imports,n.imports,Mo),i=gi(s),u=Ct(s,i),c=0,l=t.interpolate||ie,p="__p += '",f=ye((t.escape||ie).source+"|"+l.source+"|"+(l===B?Z:ie).source+"|"+(t.evaluate||ie).source+"|$","g"),_="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Te+"]")+"\n";e.replace(f,(function(t,r,n,s,i,u){return n||(n=s),p+=e.slice(c,u).replace(ue,jt),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),i&&(a=!0,p+="';\n"+i+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),p+="';\n";var d=xe.call(t,"variable")&&t.variable;if(d){if(J.test(d))throw new fe("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(O,""):p).replace(I,"$1").replace(R,"$1;"),p="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var h=Ui((function(){return _e(i,_+"return "+p).apply(void 0,u)}));if(h.source=p,Ns(h))throw h;return h},kr.times=function(e,t){if((e=ri(e))<1||e>9007199254740991)return[];var r=4294967295,n=ir(e,4294967295);e-=4294967295;for(var o=xt(n,t=Jo(t));++r<e;)t(r);return o},kr.toFinite=ti,kr.toInteger=ri,kr.toLength=ni,kr.toLower=function(e){return si(e).toLowerCase()},kr.toNumber=oi,kr.toSafeInteger=function(e){return e?Vr(ri(e),-9007199254740991,9007199254740991):0===e?e:0},kr.toString=si,kr.toUpper=function(e){return si(e).toUpperCase()},kr.trim=function(e,t,r){if((e=si(e))&&(r||void 0===t))return St(e);if(!e||!(t=Jn(t)))return e;var n=Mt(e),o=Mt(t);return co(n,Pt(n,o),Ot(n,o)+1).join("")},kr.trimEnd=function(e,t,r){if((e=si(e))&&(r||void 0===t))return e.slice(0,qt(e)+1);if(!e||!(t=Jn(t)))return e;var n=Mt(e);return co(n,0,Ot(n,Mt(t))+1).join("")},kr.trimStart=function(e,t,r){if((e=si(e))&&(r||void 0===t))return e.replace(Y,"");if(!e||!(t=Jn(t)))return e;var n=Mt(e);return co(n,Pt(n,Mt(t))).join("")},kr.truncate=function(e,t){var r=30,n="...";if(qs(t)){var o="separator"in t?t.separator:o;r="length"in t?ri(t.length):r,n="omission"in t?Jn(t.omission):n}var a=(e=si(e)).length;if(Tt(e)){var s=Mt(e);a=s.length}if(r>=a)return e;var i=r-Ut(n);if(i<1)return n;var u=s?co(s,0,i).join(""):e.slice(0,i);if(void 0===o)return u+n;if(s&&(i+=u.length-i),zs(o)){if(e.slice(i).search(o)){var c,l=u;for(o.global||(o=ye(o.source,si(ee.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var p=c.index;u=u.slice(0,void 0===p?i:p)}}else if(e.indexOf(Jn(o),i)!=i){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+n},kr.unescape=function(e){return(e=si(e))&&F.test(e)?e.replace(j,Ht):e},kr.uniqueId=function(e){var t=++Se;return si(e)+t},kr.upperCase=Di,kr.upperFirst=Ni,kr.each=ss,kr.eachRight=is,kr.first=Ta,Vi(kr,(au={},cn(kr,(function(e,t){xe.call(kr.prototype,t)||(au[t]=e)})),au),{chain:!1}),kr.VERSION="4.17.21",rt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){kr[e].placeholder=kr})),rt(["drop","take"],(function(e,t){Rr.prototype[e]=function(r){r=void 0===r?1:sr(ri(r),0);var n=this.__filtered__&&!t?new Rr(this):this.clone();return n.__filtered__?n.__takeCount__=ir(r,n.__takeCount__):n.__views__.push({size:ir(r,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Rr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),rt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Rr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Jo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),rt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Rr.prototype[e]=function(){return this[r](1).value()[0]}})),rt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Rr.prototype[e]=function(){return this.__filtered__?new Rr(this):this[r](1)}})),Rr.prototype.compact=function(){return this.filter(Yi)},Rr.prototype.find=function(e){return this.filter(e).head()},Rr.prototype.findLast=function(e){return this.reverse().find(e)},Rr.prototype.invokeMap=Nn((function(e,t){return"function"==typeof e?new Rr(this):this.map((function(r){return gn(r,e,t)}))})),Rr.prototype.reject=function(e){return this.filter(Es(Jo(e)))},Rr.prototype.slice=function(e,t){e=ri(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Rr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=ri(t))<0?r.dropRight(-t):r.take(t-e)),r)},Rr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rr.prototype.toArray=function(){return this.take(4294967295)},cn(Rr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=kr[n?"take"+("last"==t?"Right":""):t],a=n||/^find/.test(t);o&&(kr.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,i=t instanceof Rr,u=s[0],c=i||Rs(t),l=function(e){var t=o.apply(kr,ct([e],s));return n&&p?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(i=c=!1);var p=this.__chain__,f=!!this.__actions__.length,_=a&&!p,d=i&&!f;if(!a&&c){t=d?t:new Rr(this);var h=e.apply(t,s);return h.__actions__.push({func:ts,args:[l],thisArg:void 0}),new Ir(h,p)}return _&&d?e.apply(this,s):(h=this.thru(l),_?n?h.value()[0]:h.value():h)})})),rt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ge[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(Rs(o)?o:[],e)}return this[r]((function(r){return t.apply(Rs(r)?r:[],e)}))}})),cn(Rr.prototype,(function(e,t){var r=kr[t];if(r){var n=r.name+"";xe.call(gr,n)||(gr[n]=[]),gr[n].push({name:t,func:r})}})),gr[Po(void 0,2).name]=[{name:"wrapper",func:void 0}],Rr.prototype.clone=function(){var e=new Rr(this.__wrapped__);return e.__actions__=mo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mo(this.__views__),e},Rr.prototype.reverse=function(){if(this.__filtered__){var e=new Rr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Rs(e),n=t<0,o=r?e.length:0,a=function(e,t,r){for(var n=-1,o=r.length;++n<o;){var a=r[n],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=ir(t,e+s);break;case"takeRight":e=sr(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=a.start,i=a.end,u=i-s,c=n?i:s-1,l=this.__iteratees__,p=l.length,f=0,_=ir(u,this.__takeCount__);if(!r||!n&&o==u&&_==u)return ro(e,this.__actions__);var d=[];e:for(;u--&&f<_;){for(var h=-1,y=e[c+=t];++h<p;){var v=l[h],m=v.iteratee,g=v.type,b=m(y);if(2==g)y=b;else if(!b){if(1==g)continue e;break e}}d[f++]=y}return d},kr.prototype.at=rs,kr.prototype.chain=function(){return es(this)},kr.prototype.commit=function(){return new Ir(this.value(),this.__chain__)},kr.prototype.next=function(){void 0===this.__values__&&(this.__values__=ei(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},kr.prototype.plant=function(e){for(var t,r=this;r instanceof Or;){var n=Ca(r);n.__index__=0,n.__values__=void 0,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},kr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rr){var t=e;return this.__actions__.length&&(t=new Rr(this)),(t=t.reverse()).__actions__.push({func:ts,args:[qa],thisArg:void 0}),new Ir(t,this.__chain__)}return this.thru(qa)},kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=function(){return ro(this.__wrapped__,this.__actions__)},kr.prototype.first=kr.prototype.head,zt&&(kr.prototype[zt]=function(){return this}),kr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(qe._=Gt,define((function(){return Gt}))):Ge?((Ge.exports=Gt)._=Gt,He._=Gt):qe._=Gt}).call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$lodash_35=_$lodash_35.exports;for(var _$base64Js_1={byteLength:function(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n},toByteArray:function(e){var t,r,n=getLens(e),o=n[0],a=n[1],s=new Arr(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),i=0,u=a>0?o-4:o;for(r=0;r<u;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],s[i++]=t>>16&255,s[i++]=t>>8&255,s[i++]=255&t;return 2===a&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,s[i++]=255&t),1===a&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,s[i++]=t>>8&255,s[i++]=255&t),s},fromByteArray:function(e){for(var t,r=e.length,n=r%3,o=[],a=0,s=r-n;a<s;a+=16383)o.push(encodeChunk(e,a,a+16383>s?s:a+16383));return 1===n?(t=e[r-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",__i_1=0,len=code.length;__i_1<len;++__i_1)lookup[__i_1]=code[__i_1],revLookup[code.charCodeAt(__i_1)]=__i_1;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function encodeChunk(e,t,r){for(var n,o,a=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(lookup[(o=n)>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]);return a.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_3={read:function(e,t,r,n,o){var a,s,i=8*o-n-1,u=(1<<i)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,_=e[t+p];for(p+=f,a=_&(1<<-l)-1,_>>=-l,l+=i;l>0;a=256*a+e[t+p],p+=f,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+e[t+p],p+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,n),a-=c}return(_?-1:1)*s*Math.pow(2,a-n)},write:function(e,t,r,n,o,a){var s,i,u,c=8*a-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:a-1,d=n?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=l?(i=0,s=l):s+p>=1?(i=(t*u-1)*Math.pow(2,o),s+=p):(i=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[r+_]=255&i,_+=d,i/=256,o-=8);for(s=s<<o|i,c+=o;c>0;e[r+_]=255&s,_+=d,s/=256,c-=8);e[r+_-d]|=128*h}},_$base64_4={exports:{}};(function(e,t){(function(){!function(e,t){var r,n;"object"==typeof _$base64_4.exports?_$base64_4.exports=t():"function"==typeof define&&define.amd?define(t):(r=e.Base64,(n=t()).noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this,(function(){"use strict";var e,r="function"==typeof atob,n="function"==typeof btoa,o="function"==typeof t,a="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,i=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),u=(e={},i.forEach((function(t,r){return e[t]=r})),e),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e,t){return void 0===t&&(t=function(e){return e}),new Uint8Array(Array.prototype.slice.call(e,0).map(t))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},_=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},d=function(e){for(var t,r,n,o,a="",s=e.length%3,u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");a+=i[(t=r<<16|n<<8|o)>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}return s?a.slice(0,s-3)+"===".substring(s):a},h=n?function(e){return btoa(e)}:o?function(e){return t.from(e,"binary").toString("base64")}:d,y=o?function(e){return t.from(e).toString("base64")}:function(e){for(var t=[],r=0,n=e.length;r<n;r+=4096)t.push(l.apply(null,e.subarray(r,r+4096)));return h(t.join(""))},v=function(e,t){return void 0===t&&(t=!1),t?f(y(e)):y(e)},m=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},g=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=function(e){return e.replace(g,m)},w=o?function(e){return t.from(e,"utf8").toString("base64")}:s?function(e){return y(s.encode(e))}:function(e){return h(b(e))},A=function(e,t){return void 0===t&&(t=!1),t?f(w(e)):w(e)},E=function(e){return A(e,!0)},x=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,S=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return l(55296+(t>>>10))+l(56320+(1023&t));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},$=function(e){return e.replace(x,S)},C=function(e){if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,o="",a=0;a<e.length;)t=u[e.charAt(a++)]<<18|u[e.charAt(a++)]<<12|(r=u[e.charAt(a++)])<<6|(n=u[e.charAt(a++)]),o+=64===r?l(t>>16&255):64===n?l(t>>16&255,t>>8&255):l(t>>16&255,t>>8&255,255&t);return o},k=r?function(e){return atob(_(e))}:o?function(e){return t.from(e,"base64").toString("binary")}:C,P=o?function(e){return p(t.from(e,"base64"))}:function(e){return p(k(e),(function(e){return e.charCodeAt(0)}))},O=function(e){return P(R(e))},I=o?function(e){return t.from(e,"base64").toString("utf8")}:a?function(e){return a.decode(P(e))}:function(e){return $(k(e))},R=function(e){return _(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},j=function(e){return I(R(e))},T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},F=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,T(t))};e("fromBase64",(function(){return j(this)})),e("toBase64",(function(e){return A(this,e)})),e("toBase64URI",(function(){return A(this,!0)})),e("toBase64URL",(function(){return A(this,!0)})),e("toUint8Array",(function(){return O(this)}))},L=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,T(t))};e("toBase64",(function(e){return v(this,e)})),e("toBase64URI",(function(){return v(this,!0)})),e("toBase64URL",(function(){return v(this,!0)}))},D={version:"3.7.2",VERSION:"3.7.2",atob:k,atobPolyfill:C,btoa:h,btoaPolyfill:d,fromBase64:j,toBase64:A,encode:A,encodeURI:E,encodeURL:E,utob:b,btou:$,decode:j,isValid:function(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:v,toUint8Array:O,extendString:F,extendUint8Array:L,extendBuiltins:function(){F(),L()},Base64:{}};return Object.keys(D).forEach((function(e){return D.Base64[e]=D[e]})),D}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_$buffer_2({}).Buffer),_$base64_4=_$base64_4.exports;var _$preprocessors_75={};Object.defineProperty(_$preprocessors_75,"__esModule",{value:!0}),_$preprocessors_75.default=void 0;var keys,___default_75=[{name:"HTML",test:function(e){return/^<!DOCTYPE html>/.test(e)},parse:function(){return""}},{name:"Clash Pre-processor",test:function(e){if(!/proxies/.test(e))return!1;var t=(0,_$yaml_119.safeLoad)(e);return t.proxies&&Array.isArray(t.proxies)},parse:function(e){var t=(0,_$yaml_119.safeLoad)(e),r=t.proxies,n=t["global-client-fingerprint"];return r.map((function(e){return n&&!e["client-fingerprint"]&&(e["client-fingerprint"]=n),JSON.stringify(e)})).join("\n")}},(keys=["dm1lc3M","c3NyOi8v","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="],{name:"Base64 Pre-processor",test:function(e){return!/^\w+:\/\/\w+/im.test(e)&&keys.some((function(t){return-1!==e.indexOf(t)}))},parse:function(e){return _$base64_4.Base64.decode(e)}}),{name:"SSD Pre-processor",test:function(e){return 0===e.indexOf("ssd://")},parse:function(e){for(var t=[],r=JSON.parse(_$base64_4.Base64.decode(e.split("ssd://")[1])),n=r.port,o=r.encryption,a=r.password,s=r.servers,i=0;i<s.length;i++){var u=s[i];o=u.encryption?u.encryption:o,a=u.password?u.password:a;var c=_$base64_4.Base64.encode(o+":"+a),l=u.server;n=u.port?u.port:n;var p=u.remarks?u.remarks:i,f=u.plugin_options?"/?plugin="+encodeURIComponent(u.plugin+";"+u.plugin_options):"";t[i]="ss://"+c+"@"+l+":"+n+f+"#"+p}return t.join("\n")}},{name:"Full Config Preprocessor",test:function(e){return/^(\[server_local\]|\[Proxy\])/gm.test(e)},parse:function(e){var t;return(null===(t=e.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im))||void 0===t?void 0:t[1])||e}}];_$preprocessors_75.default=___default_75;var _$utils_89={};Object.defineProperty(_$utils_89,"__esModule",{value:!0}),_$utils_89.Result=void 0,_$utils_89.isPresent=__isPresent_89;var __obj_89,___lodash_89=(__obj_89=_$lodash_35)&&__obj_89.__esModule?__obj_89:{default:__obj_89};function ___defineProperties_89(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Result=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.proxy=t,this.output=[]}var t,r;return t=e,(r=[{key:"append",value:function(e){if(void 0===e)throw new Error("required field is missing");this.output.push(e)}},{key:"appendIfPresent",value:function(e,t){__isPresent_89(this.proxy,t)&&this.append(e)}},{key:"toString",value:function(){return this.output.join("")}}])&&___defineProperties_89(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function __isPresent_89(e,t){return null!=___lodash_89.default.get(e,t)}_$utils_89.Result=Result;var _$surge_86={};Object.defineProperty(_$surge_86,"__esModule",{value:!0}),_$surge_86.default=function(){return{produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e.type){case"ss":return function(e){var t=new _$utils_89.Result(e);if(t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),e.cipher||(e.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));t.append(",encrypt-method=".concat(e.cipher)),t.appendIfPresent(",password=".concat(e.password),"password");var r=ipVersions[e["ip-version"]]||e["ip-version"];if(t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),(0,_$utils_89.isPresent)(e,"plugin"))if("obfs"===e.plugin)t.append(",obfs=".concat(e["plugin-opts"].mode)),t.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),t.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error("plugin ".concat(e.plugin," is not supported"));if(t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password"))t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){var n=e["plugin-opts"].password,o=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n&&(t.append(",shadow-tls-password=".concat(n)),o&&t.append(",shadow-tls-sni=".concat(o)),a)){if(a<2)throw new Error("shadow-tls version ".concat(a," is not supported"));t.append(",shadow-tls-version=".concat(a))}}return t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_89.Result(e);t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",password=".concat(e.password),"password");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),handleTransport(t,e),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"vmess":return function(e){var t=new _$utils_89.Result(e);t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",username=".concat(e.uuid),"uuid");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),handleTransport(t,e),(0,_$utils_89.isPresent)(e,"aead")?t.append(",vmess-aead=".concat(e.aead)):t.append(",vmess-aead=".concat(0===e.alterId)),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"http":return function(e){var t=new _$utils_89.Result(e),r=e.tls?"https":"http";t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_89.Result(e),r=e.tls?"socks5-tls":"socks5";t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),e.tfo&&___app_86.default.info("Option tfo is not supported by Surge, thus omitted"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"snell":return function(e){var t,r,n,o=new _$utils_89.Result(e);o.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),o.appendIfPresent(",version=".concat(e.version),"version"),o.appendIfPresent(",psk=".concat(e.psk),"psk");var a=ipVersions[e["ip-version"]]||e["ip-version"];return o.appendIfPresent(",ip-version=".concat(a),"ip-version"),o.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),o.appendIfPresent(",obfs=".concat(null===(t=e["obfs-opts"])||void 0===t?void 0:t.mode),"obfs-opts.mode"),o.appendIfPresent(",obfs-host=".concat(null===(r=e["obfs-opts"])||void 0===r?void 0:r.host),"obfs-opts.host"),o.appendIfPresent(",obfs-uri=".concat(null===(n=e["obfs-opts"])||void 0===n?void 0:n.path),"obfs-opts.path"),o.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),o.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),o.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),o.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),o.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),o.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),o.appendIfPresent(",tos=".concat(e.tos),"tos"),o.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),o.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(o.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),o.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),o.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),o.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),o.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),o.appendIfPresent(",reuse=".concat(e.reuse),"reuse"),o.toString()}(e);case"tuic":return function(e){var t=new _$utils_89.Result(e),r=e.type;e.token&&0!==e.token.length||(r="tuic-v5"),t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",uuid=".concat(e.uuid),"uuid"),t.appendIfPresent(",password=".concat(e.password),"password"),t.appendIfPresent(",token=".concat(e.token),"token"),t.appendIfPresent(",alpn=".concat(Array.isArray(e.alpn)?e.alpn[0]:e.alpn),"alpn");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),(0,_$utils_89.isPresent)(e,"tfo")?t.append(",tfo=".concat(e.tfo)):(0,_$utils_89.isPresent)(e,"fast-open")&&t.append(",tfo=".concat(e["fast-open"])),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),t.toString()}(e);case"wireguard-surge":return function(e){var t=new _$utils_89.Result(e);t.append("".concat(e.name,"=wireguard")),t.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"hysteria2":return function(e){var t;if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");var r=new _$utils_89.Result(e);r.append("".concat(e.name,"=hysteria2,").concat(e.server,",").concat(e.port)),r.appendIfPresent(",password=".concat(e.password),"password");var n=ipVersions[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(",ip-version=".concat(n),"ip-version"),r.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),r.appendIfPresent(",sni=".concat(e.sni),"sni"),r.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),r.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),(0,_$utils_89.isPresent)(e,"tfo")?r.append(",tfo=".concat(e.tfo)):(0,_$utils_89.isPresent)(e,"fast-open")&&r.append(",tfo=".concat(e["fast-open"])),r.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),r.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),r.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),r.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),r.appendIfPresent(",tos=".concat(e.tos),"tos"),r.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),r.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(r.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),r.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),r.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),r.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),r.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),r.appendIfPresent(",download-bandwidth=".concat((null===(t="".concat(e.down).match(/\d+/))||void 0===t?void 0:t[0])||0),"down"),r.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),r.toString()}(e);case"ssh":return function(e){var t=new _$utils_89.Result(e);t.append("".concat(e.name,"=ssh,").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",private-key=".concat(e["keystore-private-key"]),"keystore-private-key"),t.appendIfPresent(",idle-timeout=".concat(e["idle-timeout"]),"idle-timeout"),t.appendIfPresent(',server-fingerprint="'.concat(e["server-fingerprint"],'"'),"server-fingerprint");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e)}if(r["include-unsupported-proxy"]&&"wireguard"===e.type)return function(e){var t;Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);var r=new _$utils_89.Result(e);r.append("# > WireGuard Proxy ".concat(e.name,"\n# ").concat(e.name,"=wireguard")),e["section-name"]=(0,_$utils_114.getIfNotBlank)(e["section-name"],e.name),r.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),r.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert");var n=ipVersions[e["ip-version"]]||e["ip-version"];r.appendIfPresent(",ip-version=".concat(n),"ip-version"),r.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),r.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),r.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),r.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),r.appendIfPresent(",tos=".concat(e.tos),"tos"),r.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),r.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&(r.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),r.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),r.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),r.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),r.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),r.append("\n# > WireGuard Section ".concat(e.name,"\n[WireGuard ").concat(e["section-name"],"]\nprivate-key = ").concat(e["private-key"])),r.appendIfPresent("\nself-ip = ".concat(e.ip),"ip"),r.appendIfPresent("\nself-ip-v6 = ".concat(e.ipv6),"ipv6"),e.dns&&(Array.isArray(e.dns)&&(e.dns=e.dns.join(", ")),r.append("\ndns-server = ".concat(e.dns))),r.appendIfPresent("\nmtu = ".concat(e.mtu),"mtu"),"prefer-v6"===n&&r.append("\nprefer-ipv6 = true");var o=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],a=Array.isArray(e.reserved)?e.reserved.join("/"):e.reserved,s=null!==(t=e["preshared-key"])&&void 0!==t?t:e["pre-shared-key"];s&&(s=',preshared-key="'.concat(s,'"'));var i={"public-key":e["public-key"],"allowed-ips":o?'"'.concat(o,'"'):void 0,endpoint:"".concat(e.server,":").concat(e.port),keepalive:e["persistent-keepalive"]||e.keepalive,"client-id":a,"preshared-key":s};return r.append("\npeer = (".concat(Object.keys(i).filter((function(e){return null!=i[e]})).map((function(e){return"".concat(e," = ").concat(i[e])})).join(", "),")")),r.toString()}(e);throw new Error("Platform ".concat(targetPlatform," does not support proxy type: ").concat(e.type))}}};var __obj_86,___app_86=(__obj_86=_$app_68)&&__obj_86.__esModule?__obj_86:{default:__obj_86},targetPlatform="Surge",ipVersions={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function handleTransport(e,t){if((0,_$utils_89.isPresent)(t,"network")){if("ws"!==t.network)throw new Error("network ".concat(t.network," is unsupported"));if(e.append(",ws=true"),(0,_$utils_89.isPresent)(t,"ws-opts")&&(e.appendIfPresent(",ws-path=".concat(t["ws-opts"].path),"ws-opts.path"),(0,_$utils_89.isPresent)(t,"ws-opts.headers"))){var r=t["ws-opts"].headers,n=Object.keys(r).map((function(e){var t=r[e];return["Host"].includes(e)&&(t='"'.concat(t,'"')),"".concat(e,":").concat(t)})).join("|");(0,_$utils_114.isNotBlank)(n)&&e.append(",ws-headers=".concat(n))}}}var _$surgemac_87={};Object.defineProperty(_$surgemac_87,"__esModule",{value:!0}),_$surgemac_87.default=function(){return{produce:function(e){switch(e.type){case"external":return external(e);case"ssr":return function(e){var t,r,n,o,a=___objectSpread_87(___objectSpread_87({},e),{},{type:"external",exec:e.exec||"/usr/local/bin/ssr-local","local-port":"__SubStoreLocalPort__",args:[],addresses:[],"local-address":null!==(t=null!==(r=e.local_address)&&void 0!==r?r:e["local-address"])&&void 0!==t?t:"127.0.0.1"});n=e.server,(0,_$utils_114.isIPv4)(n)||(0,_$utils_114.isIPv6)(n)?a.addresses.push(e.server):___app_87.default.log("Platform ".concat(__targetPlatform_87,", proxy type ").concat(e.type,": addresses should be an IP address, but got ").concat(e.server));for(var s=0,i=Object.entries({cipher:"-m",obfs:"-o",password:"-k",port:"-p",protocol:"-O","protocol-param":"-G",server:"-s","local-port":"-l","local-address":"-b"});s<i.length;s++){var u=(2,function(e){if(Array.isArray(e))return e}(o=i[s])||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),2!==a.length);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(o)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_87(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_87(e,2):void 0}}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];a.args.push(l),a.args.push(a[c])}return external(a)}(e);default:return surge_Producer.produce(e)}}}};var _surge=___interopRequireDefault_87(_$surge_86),___app_87=___interopRequireDefault_87(_$app_68);function ___interopRequireDefault_87(e){return e&&e.__esModule?e:{default:e}}function ___arrayLikeToArray_87(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __ownKeys_87(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_87(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_87(Object(r),!0).forEach((function(t){___defineProperty_87(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_87(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_87(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var __targetPlatform_87="SurgeMac",surge_Producer=(0,_surge.default)();function external(e){var t=new _$utils_89.Result(e);if(!e.exec||!e["local-port"])throw new Error("".concat(e.type,": exec and local-port are required"));return t.append("".concat(e.name,'=external,exec="').concat(e.exec,'",local-port=').concat(e["local-port"])),Array.isArray(e.args)&&e.args.map((function(e){t.append(',args="'.concat(e,'"'))})),Array.isArray(e.addresses)&&e.addresses.map((function(e){t.append(",addresses=".concat(e))})),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),(0,_$utils_114.isPresent)(e,"tfo")?t.append(",tfo=".concat(e.tfo)):(0,_$utils_114.isPresent)(e,"fast-open")&&t.append(",tfo=".concat(e["fast-open"])),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.toString()}var _$clash_77={};Object.defineProperty(_$clash_77,"__esModule",{value:!0}),_$clash_77.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||!(!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(e.type)||"ss"===e.type&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher)||"snell"===e.type&&"4"===String(e.version)||"vless"===e.type&&(void 0!==e.flow||e["reality-opts"]))})).map((function(e){var t;if("vmess"===e.type)(0,_$utils_89.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_89.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("wireguard"===e.type){var r,n;e.keepalive=null!==(r=e.keepalive)&&void 0!==r?r:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(n=e["preshared-key"])&&void 0!==n?n:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var o,a,s,i=null===(o=e["http-opts"])||void 0===o?void 0:o.path;(0,_$utils_89.isPresent)(e,"http-opts.path")&&!Array.isArray(i)&&(e["http-opts"].path=[i]);var u=null===(a=e["http-opts"])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host;(0,_$utils_89.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(u)&&(e["http-opts"].headers.Host=[u])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var c,l,p,f=null===(c=e["h2-opts"])||void 0===c?void 0:c.path;(0,_$utils_89.isPresent)(e,"h2-opts.path")&&Array.isArray(f)&&(e["h2-opts"].path=f[0]);var _=null===(l=e["h2-opts"])||void 0===l||null===(p=l.headers)||void 0===p?void 0:p.host;(0,_$utils_89.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(_)&&(e["h2-opts"].headers.host=[_])}for(var d in null!==(t=e["plugin-opts"])&&void 0!==t&&t.tls&&(0,_$utils_89.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_89.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,e)(null==e[d]||/^_/i.test(d))&&delete e[d];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$clashmeta_78={};Object.defineProperty(_$clashmeta_78,"__esModule",{value:!0}),_$clashmeta_78.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||"snell"!==e.type||"4"!==String(e.version)})).map((function(e){var t;if("vmess"===e.type)(0,_$utils_89.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_89.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_89.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo),e.token&&0!==e.token.length||(0,_$utils_89.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type)(0,_$utils_89.isPresent)(e,"auth_str")&&!(0,_$utils_89.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_89.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("wireguard"===e.type){var r,n;e.keepalive=null!==(r=e.keepalive)&&void 0!==r?r:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(n=e["preshared-key"])&&void 0!==n?n:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type?(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni):"ss"===e.type&&(0,_$utils_89.isPresent)(e,"shadow-tls-password")&&!(0,_$utils_89.isPresent)(e,"plugin")&&(e.plugin="shadow-tls",e["plugin-opts"]={host:e["shadow-tls-sni"],password:e["shadow-tls-password"],version:e["shadow-tls-version"]});if(["vmess","vless"].includes(e.type)&&"http"===e.network){var o,a,s,i=null===(o=e["http-opts"])||void 0===o?void 0:o.path;(0,_$utils_89.isPresent)(e,"http-opts.path")&&!Array.isArray(i)&&(e["http-opts"].path=[i]);var u=null===(a=e["http-opts"])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host;(0,_$utils_89.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(u)&&(e["http-opts"].headers.Host=[u])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var c,l,p,f=null===(c=e["h2-opts"])||void 0===c?void 0:c.path;(0,_$utils_89.isPresent)(e,"h2-opts.path")&&Array.isArray(f)&&(e["h2-opts"].path=f[0]);var _=null===(l=e["h2-opts"])||void 0===l||null===(p=l.headers)||void 0===p?void 0:p.host;(0,_$utils_89.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(_)&&(e["h2-opts"].headers.host=[_])}for(var d in null!==(t=e["plugin-opts"])&&void 0!==t&&t.tls&&(0,_$utils_89.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_89.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,e)(null==e[d]||/^_/i.test(d))&&delete e[d];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$stash_84={};Object.defineProperty(_$stash_84,"__esModule",{value:!0}),_$stash_84.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||!(!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2"].includes(e.type)||"ss"===e.type&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher)||"snell"===e.type&&"4"===String(e.version)||"vless"===e.type&&e["reality-opts"])})).map((function(e){var t;if("vmess"===e.type)(0,_$utils_89.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_89.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_89.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),e.token&&0!==e.token.length||(0,_$utils_89.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type){var r,n;(0,_$utils_89.isPresent)(e,"auth_str")&&!(0,_$utils_89.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_89.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),(0,_$utils_89.isPresent)(e,"down")&&!(0,_$utils_89.isPresent)(e,"down-speed")&&(e["down-speed"]=e.down,delete e.down),(0,_$utils_89.isPresent)(e,"up")&&!(0,_$utils_89.isPresent)(e,"up-speed")&&(e["up-speed"]=e.up,delete e.up),(0,_$utils_89.isPresent)(e,"down-speed")&&(e["down-speed"]=(null===(r="".concat(e["down-speed"]).match(/\d+/))||void 0===r?void 0:r[0])||0),(0,_$utils_89.isPresent)(e,"up-speed")&&(e["up-speed"]=(null===(n="".concat(e["up-speed"]).match(/\d+/))||void 0===n?void 0:n[0])||0)}else if("hysteria2"===e.type){var o,a;(0,_$utils_89.isPresent)(e,"password")&&!(0,_$utils_89.isPresent)(e,"auth")&&(e.auth=e.password,delete e.password),(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),(0,_$utils_89.isPresent)(e,"down")&&!(0,_$utils_89.isPresent)(e,"down-speed")&&(e["down-speed"]=e.down,delete e.down),(0,_$utils_89.isPresent)(e,"up")&&!(0,_$utils_89.isPresent)(e,"up-speed")&&(e["up-speed"]=e.up,delete e.up),(0,_$utils_89.isPresent)(e,"down-speed")&&(e["down-speed"]=(null===(o="".concat(e["down-speed"]).match(/\d+/))||void 0===o?void 0:o[0])||0),(0,_$utils_89.isPresent)(e,"up-speed")&&(e["up-speed"]=(null===(a="".concat(e["up-speed"]).match(/\d+/))||void 0===a?void 0:a[0])||0)}else if("wireguard"===e.type){var s,i;e.keepalive=null!==(s=e.keepalive)&&void 0!==s?s:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(i=e["preshared-key"])&&void 0!==i?i:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var u,c,l,p=null===(u=e["http-opts"])||void 0===u?void 0:u.path;(0,_$utils_89.isPresent)(e,"http-opts.path")&&!Array.isArray(p)&&(e["http-opts"].path=[p]);var f=null===(c=e["http-opts"])||void 0===c||null===(l=c.headers)||void 0===l?void 0:l.Host;(0,_$utils_89.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(f)&&(e["http-opts"].headers.Host=[f])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var _,d,h,y=null===(_=e["h2-opts"])||void 0===_?void 0:_.path;(0,_$utils_89.isPresent)(e,"h2-opts.path")&&Array.isArray(y)&&(e["h2-opts"].path=y[0]);var v=null===(d=e["h2-opts"])||void 0===d||null===(h=d.headers)||void 0===h?void 0:h.host;(0,_$utils_89.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(v)&&(e["h2-opts"].headers.host=[v])}for(var m in null!==(t=e["plugin-opts"])&&void 0!==t&&t.tls&&(0,_$utils_89.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_89.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,e["test-url"]&&(e["benchmark-url"]=e["test-url"],delete e["test-url"]),e["test-timeout"]&&(e["benchmark-timeout"]=e["test-timeout"],delete e["test-timeout"]),delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,e)(null==e[m]||/^_/i.test(m))&&delete e[m];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$loon_80={};Object.defineProperty(_$loon_80,"__esModule",{value:!0}),_$loon_80.default=function(){return{produce:function(e){switch(e.type){case"ss":return function(e){var t=new _$utils_89.Result(e);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(t.append("".concat(e.name,"=shadowsocks,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.password,'"')),(0,_$utils_89.isPresent)(e,"plugin")){if("obfs"!==e.plugin)throw new Error("plugin ".concat(e.plugin," is not supported"));t.append(",obfs-name=".concat(e["plugin-opts"].mode)),t.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),t.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"ssr":return function(e){var t=new _$utils_89.Result(e);return t.append("".concat(e.name,"=shadowsocksr,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.password,'"')),t.append(",protocol=".concat(e.protocol)),t.appendIfPresent(",protocol-param=".concat(e["protocol-param"]),"protocol-param"),t.appendIfPresent(",obfs=".concat(e.obfs),"obfs"),t.appendIfPresent(",obfs-param=".concat(e["obfs-param"]),"obfs-param"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_89.Result(e);if(t.append("".concat(e.name,"=trojan,").concat(e.server,",").concat(e.port,',"').concat(e.password,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_89.isPresent)(e,"network")){if("ws"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}return t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"vmess":return function(e){var t=new _$utils_89.Result(e);if(t.append("".concat(e.name,"=vmess,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.uuid,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_89.isPresent)(e,"network"))if("ws"===e.network){var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var a,s,i;t.append(",transport=http");var u=null===(a=e["http-opts"])||void 0===a?void 0:a.path,c=null===(s=e["http-opts"])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host;t.appendIfPresent(",path=".concat(Array.isArray(u)?u[0]:u),"http-opts.path"),t.appendIfPresent(",host=".concat(Array.isArray(c)?c[0]:c),"http-opts.headers.Host")}else t.append(",transport=tcp");return t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),(0,_$utils_89.isPresent)(e,"aead")?t.append(",alterId=0"):t.append(",alterId=".concat(e.alterId)),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"vless":return function(e){if(e["reality-opts"])throw new Error("VLESS REALITY is unsupported");var t=new _$utils_89.Result(e);if(t.append("".concat(e.name,"=vless,").concat(e.server,",").concat(e.port,',"').concat(e.uuid,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_89.isPresent)(e,"network"))if("ws"===e.network){var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var a,s,i;t.append(",transport=http");var u=null===(a=e["http-opts"])||void 0===a?void 0:a.path,c=null===(s=e["http-opts"])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host;t.appendIfPresent(",path=".concat(Array.isArray(u)?u[0]:u),"http-opts.path"),t.appendIfPresent(",host=".concat(Array.isArray(c)?c[0]:c),"http-opts.headers.Host")}else t.append(",transport=tcp");return t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"http":return function(e){var t=new _$utils_89.Result(e),r=e.tls?"https":"http";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(',"'.concat(e.password,'"'),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_89.Result(e);return t.append("".concat(e.name,"=socks5,").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(',"'.concat(e.password,'"'),"password"),t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.toString()}(e);case"wireguard":return function(e){var t,r,n;Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);var o=new _$utils_89.Result(e);if(o.append("".concat(e.name,"=wireguard")),o.appendIfPresent(",interface-ip=".concat(e.ip),"ip"),o.appendIfPresent(",interface-ipv6=".concat(e.ipv6),"ipv6"),o.appendIfPresent(',private-key="'.concat(e["private-key"],'"'),"private-key"),o.appendIfPresent(",mtu=".concat(e.mtu),"mtu"),e.dns&&Array.isArray(e.dns)){e.dnsv6=e.dns.find((function(e){return(0,_$utils_114.isIPv6)(e)}));var a=e.dns.find((function(e){return(0,_$utils_114.isIPv4)(e)}));a||(a=e.dns.find((function(e){return!(0,_$utils_114.isIPv4)(e)&&!(0,_$utils_114.isIPv6)(e)}))),e.dns=a}o.appendIfPresent(",dns=".concat(e.dns),"dns"),o.appendIfPresent(",dnsv6=".concat(e.dnsv6),"dnsv6"),o.appendIfPresent(",keepalive=".concat(e["persistent-keepalive"]),"persistent-keepalive"),o.appendIfPresent(",keepalive=".concat(e.keepalive),"keepalive");var s=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],i=Array.isArray(e.reserved)?e.reserved.join(","):e.reserved;i&&(i=",reserved=[".concat(i,"]"));var u=null!==(t=e["preshared-key"])&&void 0!==t?t:e["pre-shared-key"];return u&&(u=',preshared-key="'.concat(u,'"')),o.append(',peers=[{public-key="'.concat(e["public-key"],'",allowed-ips="').concat(null!=s?s:"0.0.0.0/0,::/0",'",endpoint=').concat(e.server,":").concat(e.port).concat(null!==(r=i)&&void 0!==r?r:"").concat(null!==(n=u)&&void 0!==n?n:"","}]")),o.toString()}(e);case"hysteria2":return function(e){var t;if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");var r=new _$utils_89.Result(e);return r.append("".concat(e.name,"=Hysteria2,").concat(e.server,",").concat(e.port)),r.appendIfPresent(',"'.concat(e.password,'"'),"password"),r.appendIfPresent(",tls-name=".concat(e.sni),"sni"),r.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),r.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&r.append(",udp=true"),r.appendIfPresent(",download-bandwidth=".concat((null===(t="".concat(e.down).match(/\d+/))||void 0===t?void 0:t[0])||0),"down"),r.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),r.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_80," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_80="Loon",_$uri_88={};Object.defineProperty(_$uri_88,"__esModule",{value:!0}),_$uri_88.default=function(){return{type:"SINGLE",produce:function(e){var t,r,n,o,a="";for(var s in delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,e)(null==e[s]||/^_/i.test(s))&&delete e[s];switch(["trojan","tuic","hysteria","hysteria2"].includes(e.type)&&delete e.tls,e.server&&(0,_$utils_114.isIPv6)(e.server)&&(e.server="[".concat(e.server,"]")),e.type){case"ss":var i="".concat(e.cipher,":").concat(e.password);if(a="ss://".concat(_$base64_4.Base64.encode(i),"@").concat(e.server,":").concat(e.port,"/"),e.plugin){a+="?plugin=";var u=e["plugin-opts"];switch(e.plugin){case"obfs":a+=encodeURIComponent("simple-obfs;obfs=".concat(u.mode).concat(u.host?";obfs-host="+u.host:""));break;case"v2ray-plugin":a+=encodeURIComponent("v2ray-plugin;obfs=".concat(u.mode).concat(u.host?";obfs-host"+u.host:"").concat(u.tls?";tls":""));break;default:throw new Error("Unsupported plugin option: ".concat(e.plugin))}}e["udp-over-tcp"]&&(a="".concat(a).concat(e.plugin?"&":"?","uot=1")),e.tfo&&(a="".concat(a).concat(e.plugin?"&":"?","tfo=1")),a+="#".concat(encodeURIComponent(e.name));break;case"ssr":a="".concat(e.server,":").concat(e.port,":").concat(e.protocol,":").concat(e.cipher,":").concat(e.obfs,":").concat(_$base64_4.Base64.encode(e.password),"/"),a+="?remarks=".concat(_$base64_4.Base64.encode(e.name)).concat(e["obfs-param"]?"&obfsparam="+_$base64_4.Base64.encode(e["obfs-param"]):"").concat(e["protocol-param"]?"&protocolparam="+_$base64_4.Base64.encode(e["protocol-param"]):""),a="ssr://"+_$base64_4.Base64.encode(a);break;case"vmess":var c="",l=e.network||"tcp";if("http"===e.network&&(l="tcp",c="http"),a={v:"2",ps:e.name,add:e.server,port:e.port,id:e.uuid,type:c,aid:0,net:l,tls:e.tls?"tls":""},e.tls&&e.sni&&(a.sni=e.sni),e.network){var p,f,_,d,h,y=null===(p=e["".concat(e.network,"-opts")])||void 0===p?void 0:p.path,v=null===(f=e["".concat(e.network,"-opts")])||void 0===f||null===(_=f.headers)||void 0===_?void 0:_.Host;y&&(a.path=Array.isArray(y)?y[0]:y),v&&(a.host=Array.isArray(v)?v[0]:v),["grpc"].includes(e.network)&&(a.path=null===(d=e["".concat(e.network,"-opts")])||void 0===d?void 0:d["grpc-service-name"],a.type=(null===(h=e["".concat(e.network,"-opts")])||void 0===h?void 0:h["_grpc-type"])||"gun")}a="vmess://"+_$base64_4.Base64.encode(JSON.stringify(a));break;case"vless":var m="none",g="",b="";if(e["reality-opts"]){var w,A;m="reality";var E=null===(w=e["reality-opts"])||void 0===w?void 0:w["public-key"];E&&(b="&pbk=".concat(encodeURIComponent(E)));var x=null===(A=e["reality-opts"])||void 0===A?void 0:A["short-id"];x&&(g="&sid=".concat(encodeURIComponent(x)))}else e.tls&&(m="tls");var S="";e.alpn&&(S="&alpn=".concat(encodeURIComponent(Array.isArray(e.alpn)?e.alpn:e.alpn.join(","))));var $="";e["skip-cert-verify"]&&($="&allowInsecure=1");var C="";e.sni&&(C="&sni=".concat(encodeURIComponent(e.sni)));var k="";e["client-fingerprint"]&&(k="&fp=".concat(encodeURIComponent(e["client-fingerprint"])));var P="";e.flow&&(P="&flow=".concat(encodeURIComponent(e.flow)));var O,I="&type=".concat(encodeURIComponent(e.network));["grpc"].includes(e.network)&&(I+="&mode=".concat(encodeURIComponent((null===(O=e["".concat(e.network,"-opts")])||void 0===O?void 0:O["_grpc-type"])||"gun")));var R=null===(t=e["".concat(e.network,"-opts")])||void 0===t?void 0:t["".concat(e.network,"-service-name")],j=null===(r=e["".concat(e.network,"-opts")])||void 0===r?void 0:r.path,T=null===(n=e["".concat(e.network,"-opts")])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host;j&&(I+="&path=".concat(encodeURIComponent(Array.isArray(j)?j[0]:j))),T&&(I+="&host=".concat(encodeURIComponent(Array.isArray(T)?T[0]:T))),R&&(I+="&serviceName=".concat(encodeURIComponent(R))),a="vless://".concat(e.uuid,"@").concat(e.server,":").concat(e.port,"?security=").concat(encodeURIComponent(m)).concat(I).concat(S).concat($).concat(C).concat(k).concat(P).concat(g).concat(b,"#").concat(encodeURIComponent(e.name));break;case"trojan":var F="";if(e.network){var L,D,N;if(F="&type=".concat(e.network),["grpc"].includes(e.network)){var B,U,M=null===(B=e["".concat(e.network,"-opts")])||void 0===B?void 0:B["".concat(e.network,"-service-name")];M&&(F+="&serviceName=".concat(encodeURIComponent(M))),F+="&mode=".concat(encodeURIComponent((null===(U=e["".concat(e.network,"-opts")])||void 0===U?void 0:U["_grpc-type"])||"gun"))}var q=null===(L=e["".concat(e.network,"-opts")])||void 0===L?void 0:L.path,H=null===(D=e["".concat(e.network,"-opts")])||void 0===D||null===(N=D.headers)||void 0===N?void 0:N.Host;q&&(F+="&path=".concat(encodeURIComponent(Array.isArray(q)?q[0]:q))),H&&(F+="&host=".concat(encodeURIComponent(Array.isArray(H)?H[0]:H)))}a="trojan://".concat(e.password,"@").concat(e.server,":").concat(e.port,"?sni=").concat(encodeURIComponent(e.sni||e.server)).concat(e["skip-cert-verify"]?"&allowInsecure=1":"").concat(F,"#").concat(encodeURIComponent(e.name));break;case"hysteria2":var G=[];e["skip-cert-verify"]&&G.push("insecure=1"),e.obfs&&(G.push("obfs=".concat(encodeURIComponent(e.obfs))),e["obfs-password"]&&G.push("obfs-password=".concat(encodeURIComponent(e["obfs-password"])))),e.sni&&G.push("sni=".concat(encodeURIComponent(e.sni))),e.ports&&G.push("mport=".concat(e.ports)),e["tls-fingerprint"]&&G.push("pinSHA256=".concat(encodeURIComponent(e["tls-fingerprint"]))),e.tfo&&G.push("fastopen=1"),a="hysteria2://".concat(encodeURIComponent(e.password),"@").concat(e.server,":").concat(e.port,"?").concat(G.join("&"),"#").concat(encodeURIComponent(e.name));break;case"hysteria":var Y=[];Object.keys(e).forEach((function(t){if(!["name","type","server","port"].includes(t)){var r=t.replace(/-/,"_");["alpn"].includes(t)?e[t]&&Y.push("".concat(r,"=").concat(encodeURIComponent(Array.isArray(e[t])?e[t][0]:e[t]))):["skip-cert-verify"].includes(t)?e[t]&&Y.push("insecure=1"):["tfo","fast-open"].includes(t)?e[t]&&!Y.includes("fastopen=1")&&Y.push("fastopen=1"):["ports"].includes(t)?Y.push("mport=".concat(e[t])):["auth-str"].includes(t)?Y.push("auth=".concat(e[t])):["up"].includes(t)?Y.push("upmbps=".concat(e[t])):["down"].includes(t)?Y.push("downmbps=".concat(e[t])):["_obfs"].includes(t)?Y.push("obfs=".concat(e[t])):["obfs"].includes(t)?Y.push("obfsParam=".concat(e[t])):["sni"].includes(t)?Y.push("peer=".concat(e[t])):e[t]&&Y.push("".concat(r,"=").concat(encodeURIComponent(e[t])))}})),a="hysteria://".concat(e.server,":").concat(e.port,"?").concat(Y.join("&"),"#").concat(encodeURIComponent(e.name));break;case"tuic":if(!e.token||0===e.token.length){var K=[];Object.keys(e).forEach((function(t){if(!["name","type","uuid","password","server","port"].includes(t)){var r=t.replace(/-/,"_");["alpn"].includes(t)?e[t]&&K.push("".concat(r,"=").concat(encodeURIComponent(Array.isArray(e[t])?e[t][0]:e[t]))):["skip-cert-verify"].includes(t)?e[t]&&K.push("allow_insecure=1"):["tfo","fast-open"].includes(t)?e[t]&&!K.includes("fast_open=1")&&K.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(t)&&e[t]?K.push("".concat(r,"=1")):e[t]&&K.push("".concat(r,"=").concat(encodeURIComponent(e[t])))}})),a="tuic://".concat(encodeURIComponent(e.uuid),":").concat(encodeURIComponent(e.password),"@").concat(e.server,":").concat(e.port,"?").concat(K.join("&"),"#").concat(encodeURIComponent(e.name))}break;case"wireguard":var z=[];Object.keys(e).forEach((function(t){["name","type","server","port","ip","ipv6","private-key"].includes(t)||(["public-key"].includes(t)?z.push("publickey=".concat(e[t])):["udp"].includes(t)?e[t]&&z.push("".concat(t,"=1")):e[t]&&z.push("".concat(t,"=").concat(encodeURIComponent(e[t]))))})),e.ip&&e.ipv6?z.push("address=".concat(e.ip,"/32,").concat(e.ipv6,"/128")):e.ip?z.push("address=".concat(e.ip,"/32")):e.ipv6&&z.push("address=".concat(e.ipv6,"/128")),a="wireguard://".concat(encodeURIComponent(e["private-key"]),"@").concat(e.server,":").concat(e.port,"/?").concat(z.join("&"),"#").concat(encodeURIComponent(e.name))}return a}}};var _$v2ray_90={},__obj_90;Object.defineProperty(_$v2ray_90,"__esModule",{value:!0}),_$v2ray_90.default=function(){return{type:"ALL",produce:function(e){return _$base64_4.Base64.encode(e.map((function(e){return URI.produce(e)})).join("\n"))}}};var URI=(0,((__obj_90=_$uri_88)&&__obj_90.__esModule?__obj_90:{default:__obj_90}).default)(),_$qx_81={};Object.defineProperty(_$qx_81,"__esModule",{value:!0}),_$qx_81.default=function(){return{produce:function(e,t){switch(e.type){case"ss":return function(e){var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(e.cipher||(e.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(r("shadowsocks=".concat(e.server,":").concat(e.port)),r(",method=".concat(e.cipher)),r(",password=".concat(e.password)),needTls(e)&&(e.tls=!0),(0,_$utils_89.isPresent)(e,"plugin")){if("obfs"===e.plugin){var o=e["plugin-opts"];r(",obfs=".concat(o.mode))}else{if("v2ray-plugin"!==e.plugin||"websocket"!==e["plugin-opts"].mode)throw new Error("plugin is not supported");e["plugin-opts"].tls?r(",obfs=wss"):r(",obfs=ws")}n(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),n(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"ssr":return function(e){var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("shadowsocks=".concat(e.server,":").concat(e.port)),r(",method=".concat(e.cipher)),r(",password=".concat(e.password)),r(",ssr-protocol=".concat(e.protocol)),n(",ssr-protocol-param=".concat(e["protocol-param"]),"protocol-param"),n(",obfs=".concat(e.obfs),"obfs"),n(",obfs-host=".concat(e["obfs-param"]),"obfs-param"),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r("trojan=".concat(e.server,":").concat(e.port)),r(",password=".concat(e.password)),(0,_$utils_89.isPresent)(e,"network")){if("ws"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var o,a,s;needTls(e)?r(",obfs=wss"):r(",obfs=ws"),n(",obfs-uri=".concat(null===(o=e["ws-opts"])||void 0===o?void 0:o.path),"ws-opts.path"),n(",obfs-host=".concat(null===(a=e["ws-opts"])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host),"ws-opts.headers.Host")}return"ws"!==e.network&&needTls(e)&&r(",over-tls=true"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"vmess":return function(e){var t,r=new _$utils_89.Result(e),n=r.append.bind(r),o=r.appendIfPresent.bind(r);if(n("vmess=".concat(e.server,":").concat(e.port)),t="auto"===e.cipher?"chacha20-ietf-poly1305":e.cipher,n(",method=".concat(t)),n(",password=".concat(e.uuid)),needTls(e)&&(e.tls=!0),(0,_$utils_89.isPresent)(e,"network")){var a,s,i;if("ws"===e.network)e.tls?n(",obfs=wss"):n(",obfs=ws");else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));n(",obfs=http")}var u=null===(a=e["".concat(e.network,"-opts")])||void 0===a?void 0:a.path,c=null===(s=e["".concat(e.network,"-opts")])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host;o(",obfs-uri=".concat(Array.isArray(u)?u[0]:u),"".concat(e.network,"-opts.path")),o(",obfs-host=".concat(Array.isArray(c)?c[0]:c),"".concat(e.network,"-opts.headers.Host"))}else e.tls&&n(",obfs=over-tls");return needTls(e)&&(o(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),o(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),o(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),o(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),o(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),o(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),o(",tls-host=".concat(e.sni),"sni")),(0,_$utils_89.isPresent)(e,"aead")?n(",aead=".concat(e.aead)):n(",aead=".concat(0===e.alterId)),o(",fast-open=".concat(e.tfo),"tfo"),o(",udp-relay=".concat(e.udp),"udp"),r.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),n(",tag=".concat(e.name)),r.toString()}(e);case"http":return function(e){var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("http=".concat(e.server,":").concat(e.port)),n(",username=".concat(e.username),"username"),n(",password=".concat(e.password),"password"),needTls(e)&&(e.tls=!0),n(",over-tls=".concat(e.tls),"tls"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("socks5=".concat(e.server,":").concat(e.port)),n(",username=".concat(e.username),"username"),n(",password=".concat(e.password),"password"),needTls(e)&&(e.tls=!0),n(",over-tls=".concat(e.tls),"tls"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"vless":return function(e){if(void 0!==e.flow||e["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");var t=new _$utils_89.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r("vless=".concat(e.server,":").concat(e.port)),r(",method=".concat("none")),r(",password=".concat(e.uuid)),needTls(e)&&(e.tls=!0),(0,_$utils_89.isPresent)(e,"network")){var o,a,s;if("ws"===e.network)e.tls?r(",obfs=wss"):r(",obfs=ws");else if("http"===e.network)r(",obfs=http");else if(!["tcp"].includes(e.network))throw new Error("network ".concat(e.network," is unsupported"));var i=null===(o=e["".concat(e.network,"-opts")])||void 0===o?void 0:o.path,u=null===(a=e["".concat(e.network,"-opts")])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host;n(",obfs-uri=".concat(Array.isArray(i)?i[0]:i),"".concat(e.network,"-opts.path")),n(",obfs-host=".concat(Array.isArray(u)?u[0]:u),"".concat(e.network,"-opts.headers.Host"))}else e.tls&&r(",obfs=over-tls");return needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_81," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_81="QX";function needTls(e){return e.tls}var _$shadowrocket_82={};Object.defineProperty(_$shadowrocket_82,"__esModule",{value:!0}),_$shadowrocket_82.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||"snell"!==e.type||"4"!==String(e.version)})).map((function(e){var t;if("vmess"===e.type)(0,_$utils_89.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_89.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_89.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo),e.token&&0!==e.token.length||(0,_$utils_89.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type)(0,_$utils_89.isPresent)(e,"auth_str")&&!(0,_$utils_89.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_89.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("hysteria2"===e.type)e["obfs-password"]&&"salamander"==e.obfs&&(e.obfs=e["obfs-password"],delete e["obfs-password"]),(0,_$utils_89.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_89.isPresent)(e,"tfo")&&!(0,_$utils_89.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("wireguard"===e.type){var r,n;e.keepalive=null!==(r=e.keepalive)&&void 0!==r?r:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(n=e["preshared-key"])&&void 0!==n?n:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_89.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var o,a,s,i=null===(o=e["http-opts"])||void 0===o?void 0:o.path;(0,_$utils_89.isPresent)(e,"http-opts.path")&&!Array.isArray(i)&&(e["http-opts"].path=[i]);var u=null===(a=e["http-opts"])||void 0===a||null===(s=a.headers)||void 0===s?void 0:s.Host;(0,_$utils_89.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(u)&&(e["http-opts"].headers.Host=[u])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var c,l,p,f=null===(c=e["h2-opts"])||void 0===c?void 0:c.path;(0,_$utils_89.isPresent)(e,"h2-opts.path")&&Array.isArray(f)&&(e["h2-opts"].path=f[0]);var _=null===(l=e["h2-opts"])||void 0===l||null===(p=l.headers)||void 0===p?void 0:p.host;(0,_$utils_89.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(_)&&(e["h2-opts"].headers.host=[_])}for(var d in null!==(t=e["plugin-opts"])&&void 0!==t&&t.tls&&(0,_$utils_89.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_89.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,e)(null==e[d]||/^_/i.test(d))&&delete e[d];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$surfboard_85={};Object.defineProperty(_$surfboard_85,"__esModule",{value:!0}),_$surfboard_85.default=function(){return{produce:function(e){switch(e.name=e.name.replace(/=/g,""),e.type){case"ss":return function(e){var t=new _$utils_89.Result(e);if(t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(t.append(",encrypt-method=".concat(e.cipher)),t.appendIfPresent(",password=".concat(e.password),"password"),(0,_$utils_89.isPresent)(e,"plugin")){if("obfs"!==e.plugin)throw new Error("plugin ".concat(e.plugin," is not supported"));t.append(",obfs=".concat(e["plugin-opts"].mode)),t.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),t.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_89.Result(e);return t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",password=".concat(e.password),"password"),__handleTransport_85(t,e),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"vmess":return function(e){var t=new _$utils_89.Result(e);return t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",username=".concat(e.uuid),"uuid"),__handleTransport_85(t,e),(0,_$utils_89.isPresent)(e,"aead")?t.append(",vmess-aead=".concat(e.aead)):t.append(",vmess-aead=".concat(0===e.alterId)),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"http":return function(e){var t=new _$utils_89.Result(e),r=e.tls?"https":"http";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_89.Result(e),r=e.tls?"socks5-tls":"socks5";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"wireguard-surge":return function(e){var t=new _$utils_89.Result(e);return t.append("".concat(e.name,"=wireguard")),t.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),t.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_85," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_85="Surfboard";function __handleTransport_85(e,t){if((0,_$utils_89.isPresent)(t,"network")){if("ws"!==t.network)throw new Error("network ".concat(t.network," is unsupported"));if(e.append(",ws=true"),(0,_$utils_89.isPresent)(t,"ws-opts")&&(e.appendIfPresent(",ws-path=".concat(t["ws-opts"].path),"ws-opts.path"),(0,_$utils_89.isPresent)(t,"ws-opts.headers"))){var r=t["ws-opts"].headers,n=Object.keys(r).map((function(e){var t=r[e];return["Host"].includes(e)&&(t='"'.concat(t,'"')),"".concat(e,":").concat(t)})).join("|");(0,_$utils_114.isNotBlank)(n)&&e.append(",ws-headers=".concat(n))}}}var _$singBox_83={};Object.defineProperty(_$singBox_83,"__esModule",{value:!0}),_$singBox_83.default=function(){return{type:"ALL",produce:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[];return(0,_clashmeta.default)().produce(t,"internal",{"include-unsupported-proxy":!0}).map((function(t){try{switch(t.type){case"ssh":o.push(sshParser(t));break;case"http":o.push(httpParser(t));break;case"socks5":if(t.tls)throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with tls"));o.push(socks5Parser(t));break;case"ss":if("shadow-tls"===t.plugin){var r=shadowTLSParser(t),a=r.ssPart,s=r.stPart;o.push(a),o.push(s)}else o.push(ssParser(t));break;case"ssr":if(!n["include-unsupported-proxy"])throw new Error("Platform sing-box does not support proxy type: ".concat(t.type));o.push(ssrParser(t));break;case"vmess":if(t.network&&!["ws","grpc","h2","http"].includes(t.network))throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with network ").concat(t.network));o.push(vmessParser(t));break;case"vless":if(t.flow&&!["xtls-rprx-vision"].includes(t.flow))throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with flow ").concat(t.flow));o.push(vlessParser(t));break;case"trojan":if(t.flow)throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with flow ").concat(t.flow));o.push(trojanParser(t));break;case"hysteria":o.push(hysteriaParser(t));break;case"hysteria2":o.push(hysteria2Parser(t));break;case"tuic":if(t.token&&0!==t.token.length)throw new Error("Platform sing-box does not support proxy type: TUIC v4");o.push(tuic5Parser(t));break;case"wireguard":o.push(wireguardParser(t));break;default:throw new Error("Platform sing-box does not support proxy type: ".concat(t.type))}}catch(e){var i;___app_83.default.error(null!==(i=e.message)&&void 0!==i?i:e)}})),"internal"===r?o:JSON.stringify({outbounds:o},null,2)}}};var _clashmeta=___interopRequireDefault_83(_$clashmeta_78),___app_83=___interopRequireDefault_83(_$app_68);function ___interopRequireDefault_83(e){return e&&e.__esModule?e:{default:e}}function ___slicedToArray_83(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||___unsupportedIterableToArray_83(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___createForOfIteratorHelper_83(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_83(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___unsupportedIterableToArray_83(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_83(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_83(e,t):void 0}}function ___arrayLikeToArray_83(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var detourParser=function(e,t){e["dialer-proxy"]&&(t.detour=e["dialer-proxy"])},tfoParser=function(e,t){t.tcp_fast_open=!1,e.tfo&&(t.tcp_fast_open=!0),e.tcp_fast_open&&(t.tcp_fast_open=!0),e["tcp-fast-open"]&&(t.tcp_fast_open=!0),t.tcp_fast_open||delete t.tcp_fast_open},smuxParser=function(e,t){e&&e.enabled&&(t.multiplex={enabled:!0},t.multiplex.protocol=e.protocol,e["max-connections"]&&(t.multiplex.max_connections=parseInt("".concat(e["max-connections"]),10)),e["max-streams"]&&(t.multiplex.max_streams=parseInt("".concat(e["max-streams"]),10)),e["min-streams"]&&(t.multiplex.min_streams=parseInt("".concat(e["min-streams"]),10)),e.padding&&(t.multiplex.padding=!0))},wsParser=function(e,t){var r={type:"ws",headers:{}};if(e["ws-opts"]){var n=e["ws-opts"],o=n.path,a=void 0===o?"":o,s=n.headers,i=void 0===s?{}:s;if(""!==a&&(r.path="".concat(a)),Object.keys(i).length>0){for(var u={},c=0,l=Object.keys(i);c<l.length;c++){var p=l[c],f=i[p];""!==f&&(Array.isArray(f)||(f=["".concat(f)]),f.length>0&&(u[p]=f))}var _=u.Host;if(1===_.length){var d,h=___createForOfIteratorHelper_83("Host:".concat(_[0]).split("\n"));try{for(h.s();!(d=h.n()).done;){var y=___slicedToArray_83(d.value.split(":"),2),v=y[0],m=y[1];""!==m.trim()&&(u[v.trim()]=m.trim().split(","))}}catch(q){h.e(q)}finally{h.f()}}r.headers=u}}if(e["ws-headers"]){for(var g={},b=0,w=Object.keys(e["ws-headers"]);b<w.length;b++){var A=w[b],E=e["ws-headers"][A];""!==E&&(Array.isArray(E)||(E=["".concat(E)]),E.length>0&&(g[A]=E))}var x=g.Host;if(1===x.length){var S,$=___createForOfIteratorHelper_83("Host:".concat(x[0]).split("\n"));try{for($.s();!(S=$.n()).done;){var C=___slicedToArray_83(S.value.split(":"),2),k=C[0],P=C[1];""!==P.trim()&&(g[k.trim()]=P.trim().split(","))}}catch(q){$.e(q)}finally{$.f()}}for(var O=0,I=Object.keys(g);O<I.length;O++){var R=I[O];r.headers[R]=g[R]}}if(e["ws-path"]&&""!==e["ws-path"]&&(r.path="".concat(e["ws-path"])),r.path){var j=___slicedToArray_83(/^(.*?)(?:\?ed=(\d+))?$/.exec(r.path),3),T=(j[0],j[1]),F=void 0===T?"":T,L=j[2],D=void 0===L?"":L;r.path=F,""!==D&&(r.early_data_header_name="Sec-WebSocket-Protocol",r.max_early_data=parseInt(D,10))}t.tls.insecure&&(t.tls.server_name=r.headers.Host[0]),e["ws-opts"]&&e["ws-opts"]["v2ray-http-upgrade"]&&(r.type="httpupgrade",r.headers.Host&&(r.host=r.headers.Host[0],delete r.headers.Host),r.max_early_data&&delete r.max_early_data,r.early_data_header_name&&delete r.early_data_header_name);for(var N=0,B=Object.keys(r.headers);N<B.length;N++){var U=B[N],M=r.headers[U];1===M.length&&(r.headers[U]=M[0])}t.transport=r},grpcParser=function(e,t){var r={type:"grpc"};if(e["grpc-opts"]){var n=e["grpc-opts"]["grpc-service-name"];null!=n&&""!==n&&(r.service_name="".concat(n))}t.transport=r},tlsParser=function(e,t){e.tls&&(t.tls.enabled=!0),e.servername&&""!==e.servername&&(t.tls.server_name=e.servername),e.peer&&""!==e.peer&&(t.tls.server_name=e.peer),e.sni&&""!==e.sni&&(t.tls.server_name=e.sni),e["skip-cert-verify"]&&(t.tls.insecure=!0),e.insecure&&(t.tls.insecure=!0),e["disable-sni"]&&(t.tls.disable_sni=!0),"string"==typeof e.alpn?t.tls.alpn=[e.alpn]:Array.isArray(e.alpn)&&(t.tls.alpn=e.alpn),e.ca&&(t.tls.certificate_path="".concat(e.ca)),e.ca_str&&(t.tls.certificate=e.ca_sStr),e["ca-str"]&&(t.tls.certificate=e["ca-str"]),e["client-fingerprint"]&&""!==e["client-fingerprint"]&&(t.tls.utls={enabled:!0,fingerprint:e["client-fingerprint"]}),e["reality-opts"]&&(t.tls.reality={enabled:!0},e["reality-opts"]["public-key"]&&(t.tls.reality.public_key=e["reality-opts"]["public-key"]),e["reality-opts"]["short-id"]&&(t.tls.reality.short_id=e["reality-opts"]["short-id"])),t.tls.enabled||delete t.tls},sshParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"ssh",server:e.server,server_port:parseInt("".concat(e.port),10)};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.user=e.username),e.password&&(t.password=e.password),e.privateKey&&(t.private_key_path=e.privateKey),e["private-key"]&&(t.private_key_path=e["private-key"]),e["private-key-passphrase"]&&(t.private_key_passphrase=e["private-key-passphrase"]),e["server-fingerprint"]&&(t.host_key=[e["server-fingerprint"]],t.host_key_algorithms=[e["server-fingerprint"].split(" ")[0]]),e["host-key"]&&(t.host_key=e["host-key"]),e["host-key-algorithms"]&&(t.host_key_algorithms=e["host-key-algorithms"]),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),t},httpParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"http",server:e.server,server_port:parseInt("".concat(e.port),10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.headers){t.headers={};for(var r=0,n=Object.keys(e.headers);r<n.length;r++){var o=n[r];t.headers[o]="".concat(e.headers[o])}0===Object.keys(t.headers).length&&delete t.headers}return e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),t},socks5Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"socks",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,version:"5"};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),t},shadowTLSParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocks",method:e.cipher,password:e.password,detour:"".concat(e.name,"_shadowtls")},r={tag:"".concat(e.name,"_shadowtls"),type:"shadowtls",server:e.server,server_port:parseInt("".concat(e.port),10),version:e["plugin-opts"].version,password:e["plugin-opts"].password,tls:{enabled:!0,server_name:e["plugin-opts"].host,utls:{enabled:!0,fingerprint:e["client-fingerprint"]}}};if(r.server_port<0||r.server_port>65535)throw"\u7aef\u53e3\u503c\u975e\u6cd5";return!0===e["fast-open"]&&(r.udp_fragment=!0),tfoParser(e,r),detourParser(e,r),smuxParser(e.smux,t),{type:"ss-with-st",ssPart:t,stPart:r}},ssParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocks",server:e.server,server_port:parseInt("".concat(e.port),10),method:e.cipher,password:e.password};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),e.plugin){var r=[];"obfs"===e.plugin&&(t.plugin="obfs-local",t.plugin_opts="",e["obfs-host"]&&(e["plugin-opts"].host=e["obfs-host"]),Object.keys(e["plugin-opts"]).forEach((function(t){switch(t){case"mode":r.push("obfs=".concat(e["plugin-opts"].mode));break;case"host":r.push("obfs-host=".concat(e["plugin-opts"].host));break;default:r.push("".concat(t,"=").concat(e["plugin-opts"][t]))}}))),"v2ray-plugin"===e.plugin&&(t.plugin="v2ray-plugin",e["ws-host"]&&(e["plugin-opts"].host=e["ws-host"]),e["ws-path"]&&(e["plugin-opts"].path=e["ws-path"]),Object.keys(e["plugin-opts"]).forEach((function(n){switch(n){case"tls":e["plugin-opts"].tls&&r.push("tls");break;case"host":r.push("host=".concat(e["plugin-opts"].host));break;case"path":r.push("path=".concat(e["plugin-opts"].path));break;case"headers":r.push("headers=".concat(JSON.stringify(e["plugin-opts"].headers)));break;case"mux":e["plugin-opts"].mux&&(t.multiplex={enabled:!0});break;default:r.push("".concat(n,"=").concat(e["plugin-opts"][n]))}}))),t.plugin_opts=r.join(";")}return t},ssrParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocksr",server:e.server,server_port:parseInt("".concat(e.port),10),method:e.cipher,password:e.password,obfs:e.obfs,protocol:e.protocol};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["obfs-param"]&&(t.obfs_param=e["obfs-param"]),e["protocol-param"]&&""!==e["protocol-param"]&&(t.protocol_param=e["protocol-param"]),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),t},vmessParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"vmess",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,security:e.cipher,alter_id:parseInt("".concat(e.alterId),10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(-1===["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(t.security)&&(t.security="auto"),t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),"ws"===e.network&&wsParser(e,t),"h2"===e.network&&function(e,t){var r={type:"http"};if(e["h2-opts"]){var n=e["h2-opts"],o=n.host,a=void 0===o?"":o,s=n.path,i=void 0===s?"":s;""!==i&&(r.path="".concat(i)),""!==a&&(Array.isArray(a)||(a="".concat(a).split(",").map((function(e){return e.trim()}))),a.length>0&&(r.host=a))}if(e["h2-host"]&&""!==e["h2-host"]){var u=e["h2-host"];Array.isArray(u)||(u="".concat(u).split(",").map((function(e){return e.trim()}))),u.length>0&&(r.host=u)}e["h2-path"]&&""!==e["h2-path"]&&(r.path="".concat(e["h2-path"])),t.tls.enabled=!0,t.tls.insecure&&(t.tls.server_name=r.host[0]),1===r.host.length&&(r.host=r.host[0]),t.transport=r}(e,t),"http"===e.network&&function(e,t){var r={type:"http",headers:{}};if(e["http-opts"]){var n=e["http-opts"],o=n.method,a=void 0===o?"":o,s=n.path,i=void 0===s?"":s,u=n.headers,c=void 0===u?{}:u;""!==a&&(r.method=a),Array.isArray(i)?r.path="".concat(i[0]):""!==i&&(r.path="".concat(i));for(var l=0,p=Object.keys(c);l<p.length;l++){var f=p[l],_=c[f];if(""!==_)if("host"!==f.toLowerCase())Array.isArray(_)||(_="".concat(_).split(",").map((function(e){return e.trim()}))),_.length>0&&(r.headers[f]=_);else{var d=_;Array.isArray(d)||(d="".concat(d).split(",").map((function(e){return e.trim()}))),d.length>0&&(r.host=d)}}}if(e["http-host"]&&""!==e["http-host"]){var h=e["http-host"];Array.isArray(h)||(h="".concat(h).split(",").map((function(e){return e.trim()}))),h.length>0&&(r.host=h)}if(r.host){if(e["http-path"]&&""!==e["http-path"]){var y=e["http-path"];Array.isArray(y)?r.path="".concat(y[0]):""!==y&&(r.path="".concat(y))}t.tls.insecure&&(t.tls.server_name=r.host[0]),1===r.host.length&&(r.host=r.host[0]);for(var v=0,m=Object.keys(r.headers);v<m.length;v++){var g=m[v],b=r.headers[g];1===b.length&&(r.headers[g]=b[0])}t.transport=r}}(e,t),"grpc"===e.network&&grpcParser(e,t),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},vlessParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"vless",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),"xtls-rprx-vision"===e.flow&&(t.flow=e.flow),"ws"===e.network&&wsParser(e,t),"grpc"===e.network&&grpcParser(e,t),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),tlsParser(e,t),t},trojanParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"trojan",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),"grpc"===e.network&&grpcParser(e,t),"ws"===e.network&&wsParser(e,t),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},hysteriaParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"hysteria",server:e.server,server_port:parseInt("".concat(e.port),10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";e.auth_str&&(t.auth_str="".concat(e.auth_str)),e["auth-str"]&&(t.auth_str="".concat(e["auth-str"])),e["fast-open"]&&(t.udp_fragment=!0);var r=new RegExp("^[0-9]+[ \t]*[KMGT]*[Bb]ps$");return r.test("".concat(e.up))?t.up="".concat(e.up):t.up_mbps=parseInt("".concat(e.up),10),r.test("".concat(e.down))?t.down="".concat(e.down):t.down_mbps=parseInt("".concat(e.down),10),e.obfs&&(t.obfs=e.obfs),e.recv_window_conn&&(t.recv_window_conn=e.recv_window_conn),e["recv-window-conn"]&&(t.recv_window_conn=e["recv-window-conn"]),e.recv_window&&(t.recv_window=e.recv_window),e["recv-window"]&&(t.recv_window=e["recv-window"]),e.disable_mtu_discovery&&("boolean"==typeof e.disable_mtu_discovery?t.disable_mtu_discovery=e.disable_mtu_discovery:1===e.disable_mtu_discovery&&(t.disable_mtu_discovery=!0)),tlsParser(e,t),detourParser(e,t),tfoParser(e,t),smuxParser(e.smux,t),t},hysteria2Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"hysteria2",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,obfs:{},tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.up&&(t.up_mbps=parseInt("".concat(e.up),10)),e.down&&(t.down_mbps=parseInt("".concat(e.down),10)),"salamander"===e.obfs&&(t.obfs.type="salamander"),e["obfs-password"]&&(t.obfs.password=e["obfs-password"]),t.obfs.type||delete t.obfs,tlsParser(e,t),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),t},tuic5Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"tuic",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e["congestion-controller"]&&"cubic"!==e["congestion-controller"]&&(t.congestion_control=e["congestion-controller"]),e["udp-relay-mode"]&&"native"!==e["udp-relay-mode"]&&(t.udp_relay_mode=e["udp-relay-mode"]),e["reduce-rtt"]&&(t.zero_rtt_handshake=!0),e["udp-over-stream"]&&(t.udp_over_stream=!0),e["heartbeat-interval"]&&(t.heartbeat="".concat(e["heartbeat-interval"],"ms")),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},wireguardParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["ip","ipv6"].map((function(t){return e[t]})).map((function(e){return(0,_$utils_114.isIPv4)(e)?"".concat(e,"/32"):(0,_$utils_114.isIPv6)(e)?"".concat(e,"/128"):void 0})).filter((function(e){return e})),r={tag:e.name,type:"wireguard",server:e.server,server_port:parseInt("".concat(e.port),10),local_address:t,private_key:e["private-key"],peer_public_key:e["public-key"],pre_shared_key:e["pre-shared-key"],reserved:[]};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(e["fast-open"]&&(r.udp_fragment=!0),"string"==typeof e.reserved)r.reserved=e.reserved;else if(Array.isArray(e.reserved)){var n,o=___createForOfIteratorHelper_83(e.reserved);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.reserved.push(a)}}catch(_){o.e(_)}finally{o.f()}}else delete r.reserved;if(e.peers&&e.peers.length>0){r.peers=[];var s,i=___createForOfIteratorHelper_83(e.peers);try{for(i.s();!(s=i.n()).done;){var u=s.value,c={server:u.server,server_port:parseInt("".concat(u.port),10),public_key:u["public-key"],allowed_ips:u["allowed-ips"]||u.allowed_ips,reserved:[]};if("string"==typeof u.reserved)c.reserved.push(u.reserved);else if(Array.isArray(u.reserved)){var l,p=___createForOfIteratorHelper_83(u.reserved);try{for(p.s();!(l=p.n()).done;){var f=l.value;c.reserved.push(f)}}catch(_){p.e(_)}finally{p.f()}}else delete c.reserved;u["pre-shared-key"]&&(c.pre_shared_key=u["pre-shared-key"]),r.peers.push(c)}}catch(_){i.e(_)}finally{i.f()}}return tfoParser(e,r),detourParser(e,r),smuxParser(e.smux,r),r},_$producers_79={};Object.defineProperty(_$producers_79,"__esModule",{value:!0}),_$producers_79.default=void 0;var ___surge_79=___interopRequireDefault_79(_$surge_86),_surgemac=___interopRequireDefault_79(_$surgemac_87),_clash=___interopRequireDefault_79(_$clash_77),___clashmeta_79=___interopRequireDefault_79(_$clashmeta_78),_stash=___interopRequireDefault_79(_$stash_84),_loon=___interopRequireDefault_79(_$loon_80),_uri=___interopRequireDefault_79(_$uri_88),_v2ray=___interopRequireDefault_79(_$v2ray_90),_qx=___interopRequireDefault_79(_$qx_81),_shadowrocket=___interopRequireDefault_79(_$shadowrocket_82),_surfboard=___interopRequireDefault_79(_$surfboard_85),_singBox=___interopRequireDefault_79(_$singBox_83);function ___interopRequireDefault_79(e){return e&&e.__esModule?e:{default:e}}var ___default_79={QX:(0,_qx.default)(),QuantumultX:(0,_qx.default)(),Surge:(0,___surge_79.default)(),SurgeMac:(0,_surgemac.default)(),Loon:(0,_loon.default)(),Clash:(0,_clash.default)(),ClashMeta:(0,___clashmeta_79.default)(),URI:(0,_uri.default)(),V2Ray:(0,_v2ray.default)(),JSON:{type:"ALL",produce:function(e,t){return"internal"===t?e:JSON.stringify(e,null,2)}},Stash:(0,_stash.default)(),Shadowrocket:(0,_shadowrocket.default)(),ShadowRocket:(0,_shadowrocket.default)(),Surfboard:(0,_surfboard.default)(),"sing-box":(0,_singBox.default)()};_$producers_79.default=___default_79;const setProtoOf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};class GrammarError extends Error{constructor(e,t,r){super(e),setProtoOf(this,GrammarError.prototype),this.name="GrammarError",this.location=t,void 0===r&&(r=[]),this.diagnostics=r,this.stage=null,this.problems=[["error",e,t,r]]}toString(){let e=super.toString();this.location&&(e+="\n at ",void 0!==this.location.source&&null!==this.location.source&&(e+=this.location.source+":"),e+=`${this.location.start.line}:${this.location.start.column}`);for(const t of this.diagnostics)e+="\n from ",void 0!==t.location.source&&null!==t.location.source&&(e+=t.location.source+":"),e+=`${t.location.start.line}:${t.location.start.column}: ${t.message}`;return e}format(e){const t=e.map(({source:e,text:t})=>({source:e,text:t.split(/\r\n|\n|\r/g)}));function r(e,r,n=""){let o="";const a=t.find(({source:t})=>t===e.source),s=e.start;if(a){const t=e.end,i=a.text[s.line-1],u=(s.line===t.line?t.column:i.length+1)-s.column||1;n&&(o+="\nnote: "+n),o+=`\n --\x3e ${e.source}:${s.line}:${s.column}\n${"".padEnd(r)} |\n${s.line.toString().padStart(r)} | ${i}\n${"".padEnd(r)} | ${"".padEnd(s.column-1)}${"".padEnd(u,"^")}`}else o+=`\n at ${e.source}:${s.line}:${s.column}`,n&&(o+=": "+n);return o}return this.problems.filter(e=>"info"!==e[0]).map(e=>function(e,t,n,o=[]){let a;a=(a=n?o.reduce((e,{location:t})=>Math.max(e,t.start.line),n.start.line):Math.max.apply(null,o.map(e=>e.location.start.line))).toString().length;let s=`${e}: ${t}`;n&&(s+=r(n,a));for(const i of o)s+=r(i.location,a,i.message);return s}(...e)).join("\n\n")}}var _$GrammarError_53=GrammarError;const visitor={build(e){function t(t,...r){return e[t.type](t,...r)}function r(){}function n(e,...r){return t(e.expression,...r)}function o(e){return function(r,...n){r[e].forEach(e=>t(e,...n))}}const a={grammar(e,...r){e.topLevelInitializer&&t(e.topLevelInitializer,...r),e.initializer&&t(e.initializer,...r),e.rules.forEach(e=>t(e,...r))},top_level_initializer:r,initializer:r,rule:n,named:n,choice:o("alternatives"),action:n,sequence:o("elements"),labeled:n,text:n,simple_and:n,simple_not:n,optional:n,zero_or_more:n,one_or_more:n,group:n,semantic_and:r,semantic_not:r,rule_ref:r,literal:r,class:r,any:r};return Object.keys(a).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)||(e[t]=a[t])}),t}};var _$visitor_52=visitor;const asts={findRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return e.rules[r]},indexOfRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return r;return-1},alwaysConsumesOnSuccess(e,t){function r(){return!0}function n(){return!1}const o=_$visitor_52.build({choice:e=>e.alternatives.every(o),sequence:e=>e.elements.some(o),simple_and:n,simple_not:n,optional:n,zero_or_more:n,semantic_and:n,semantic_not:n,rule_ref(t){const r=asts.findRule(e,t.name);return r?o(r):void 0},literal:e=>""!==e.value,class:r,any:r});return o(t)}};var _$asts_36=asts,_$opcodes_38={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29},_$inferenceMatchResult_41={};const ALWAYS_MATCH=1,SOMETIMES_MATCH=0,NEVER_MATCH=-1;function inferenceMatchResult(e){function t(e){return e.match=SOMETIMES_MATCH}function r(e){return a(e.expression),e.match=ALWAYS_MATCH}function n(e){return e.match=a(e.expression)}function o(e,t){const r=e.length;let n=0,o=0;for(let s=0;s<r;++s){const t=a(e[s]);t===ALWAYS_MATCH&&++n,t===NEVER_MATCH&&++o}return n===r?ALWAYS_MATCH:t?o===r?NEVER_MATCH:SOMETIMES_MATCH:o>0?NEVER_MATCH:SOMETIMES_MATCH}const a=_$visitor_52.build({rule(e){let t,r=0;if(void 0===e.match){e.match=SOMETIMES_MATCH;do{if(t=e.match,e.match=a(e.expression),++r>6)throw new _$GrammarError_53("Infinity cycle detected when trying to evaluate node match result",e.location)}while(t!==e.match)}return e.match},named:n,choice:e=>e.match=o(e.alternatives,!0),action:n,sequence:e=>e.match=o(e.elements,!1),labeled:n,text:n,simple_and:n,simple_not:e=>e.match=-a(e.expression),optional:r,zero_or_more:r,one_or_more:n,group:n,semantic_and:t,semantic_not:t,rule_ref(t){const r=_$asts_36.findRule(e,t.name);return t.match=a(r)},literal(e){const t=0===e.value.length?ALWAYS_MATCH:SOMETIMES_MATCH;return e.match=t},class(e){const t=0===e.parts.length?NEVER_MATCH:SOMETIMES_MATCH;return e.match=t},any:t});a(e)}inferenceMatchResult.ALWAYS_MATCH=ALWAYS_MATCH,inferenceMatchResult.SOMETIMES_MATCH=SOMETIMES_MATCH,inferenceMatchResult.NEVER_MATCH=NEVER_MATCH,_$inferenceMatchResult_41=inferenceMatchResult;const{ALWAYS_MATCH:__ALWAYS_MATCH_39,SOMETIMES_MATCH:__SOMETIMES_MATCH_39,NEVER_MATCH:__NEVER_MATCH_39}=_$inferenceMatchResult_41;var _$generateBytecode_39=function(e){const t=[],r=[],n=[],o=[];function a(e){const t=JSON.stringify(e),r=n.findIndex(e=>JSON.stringify(e)===t);return-1===r?n.push(e)-1:r}function s(e,t,r){const n={predicate:e,params:t,body:r.code,location:r.codeLocation},a=JSON.stringify(n),s=o.findIndex(e=>JSON.stringify(e)===a);return-1===s?o.push(n)-1:s}function i(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}function u(e,...t){return e.concat(...t)}function c(e,t,r,n){return e===__ALWAYS_MATCH_39?r:e===__NEVER_MATCH_39?n:t.concat([r.length,n.length],r,n)}function l(e,t,r,n){const o=Object.keys(r).map(e=>n-r[e]);return[_$opcodes_38.CALL,e,t,o.length].concat(o)}function p(e,t,r){const n=0|e.match;return u([_$opcodes_38.PUSH_CURR_POS],[_$opcodes_38.SILENT_FAILS_ON],d(e,{sp:r.sp+1,env:i(r.env),action:null}),[_$opcodes_38.SILENT_FAILS_OFF],c(t?-n:n,[t?_$opcodes_38.IF_ERROR:_$opcodes_38.IF_NOT_ERROR],u([_$opcodes_38.POP],[t?_$opcodes_38.POP:_$opcodes_38.POP_CURR_POS],[_$opcodes_38.PUSH_UNDEFINED]),u([_$opcodes_38.POP],[t?_$opcodes_38.POP_CURR_POS:_$opcodes_38.POP],[_$opcodes_38.PUSH_FAILED])))}function f(e,t,r){const n=s(!0,Object.keys(r.env),e);return u([_$opcodes_38.UPDATE_SAVED_POS],l(n,0,r.env,r.sp),c(0|e.match,[_$opcodes_38.IF],u([_$opcodes_38.POP],t?[_$opcodes_38.PUSH_FAILED]:[_$opcodes_38.PUSH_UNDEFINED]),u([_$opcodes_38.POP],t?[_$opcodes_38.PUSH_UNDEFINED]:[_$opcodes_38.PUSH_FAILED])))}function _(e){return t=[_$opcodes_38.WHILE_NOT_ERROR],r=u([_$opcodes_38.APPEND],e),t.concat([r.length],r);var t,r}const d=_$visitor_52.build({grammar(e){e.rules.forEach(d),e.literals=t,e.classes=r,e.expectations=n,e.functions=o},rule(e){e.bytecode=d(e.expression,{sp:-1,env:{},pluck:[],action:null})},named(e,t){const r=0|e.match,n=r===__NEVER_MATCH_39?null:a({type:"rule",value:e.name});return u([_$opcodes_38.SILENT_FAILS_ON],d(e.expression,t),[_$opcodes_38.SILENT_FAILS_OFF],c(r,[_$opcodes_38.IF_ERROR],[_$opcodes_38.FAIL,n],[]))},choice:(e,t)=>function e(t,r){const n=0|t[0].match,o=d(t[0],{sp:r.sp,env:i(r.env),action:null});return n===__ALWAYS_MATCH_39?o:u(o,t.length>1?c(__SOMETIMES_MATCH_39,[_$opcodes_38.IF_ERROR],u([_$opcodes_38.POP],e(t.slice(1),r)),[]):[])}(e.alternatives,t),action(e,t){const r=i(t.env),n="sequence"!==e.expression.type||0===e.expression.elements.length,o=d(e.expression,{sp:t.sp+(n?1:0),env:r,action:e}),a=0|e.expression.match,p=n&&a!==__NEVER_MATCH_39?s(!1,Object.keys(r),e):null;return n?u([_$opcodes_38.PUSH_CURR_POS],o,c(a,[_$opcodes_38.IF_NOT_ERROR],u([_$opcodes_38.LOAD_SAVED_POS,1],l(p,1,r,t.sp+2)),[]),[_$opcodes_38.NIP]):o},sequence:(e,t)=>u([_$opcodes_38.PUSH_CURR_POS],function t(r,n){if(r.length>0){const o=e.elements.length-r.length+1;return u(d(r[0],{sp:n.sp,env:n.env,pluck:n.pluck,action:null}),c(0|r[0].match,[_$opcodes_38.IF_NOT_ERROR],t(r.slice(1),{sp:n.sp+1,env:n.env,pluck:n.pluck,action:n.action}),u(o>1?[_$opcodes_38.POP_N,o]:[_$opcodes_38.POP],[_$opcodes_38.POP_CURR_POS],[_$opcodes_38.PUSH_FAILED])))}if(n.pluck.length>0)return u([_$opcodes_38.PLUCK,e.elements.length+1,n.pluck.length],n.pluck.map(e=>n.sp-e));if(n.action){const t=s(!1,Object.keys(n.env),n.action);return u([_$opcodes_38.LOAD_SAVED_POS,e.elements.length],l(t,e.elements.length+1,n.env,n.sp))}return u([_$opcodes_38.WRAP,e.elements.length],[_$opcodes_38.NIP])}(e.elements,{sp:t.sp+1,env:t.env,pluck:[],action:t.action})),labeled(e,t){let r=t.env;const n=e.label,o=t.sp+1;return n&&(r=i(t.env),t.env[e.label]=o),e.pick&&t.pluck.push(o),d(e.expression,{sp:t.sp,env:r,action:null})},text:(e,t)=>u([_$opcodes_38.PUSH_CURR_POS],d(e.expression,{sp:t.sp+1,env:i(t.env),action:null}),c(0|e.match,[_$opcodes_38.IF_NOT_ERROR],u([_$opcodes_38.POP],[_$opcodes_38.TEXT]),[_$opcodes_38.NIP])),simple_and:(e,t)=>p(e.expression,!1,t),simple_not:(e,t)=>p(e.expression,!0,t),optional:(e,t)=>u(d(e.expression,{sp:t.sp,env:i(t.env),action:null}),c(-(0|e.expression.match),[_$opcodes_38.IF_ERROR],u([_$opcodes_38.POP],[_$opcodes_38.PUSH_NULL]),[])),zero_or_more(e,t){const r=d(e.expression,{sp:t.sp+1,env:i(t.env),action:null});return u([_$opcodes_38.PUSH_EMPTY_ARRAY],r,_(r),[_$opcodes_38.POP])},one_or_more(e,t){const r=d(e.expression,{sp:t.sp+1,env:i(t.env),action:null});return u([_$opcodes_38.PUSH_EMPTY_ARRAY],r,c(0|e.expression.match,[_$opcodes_38.IF_NOT_ERROR],u(_(r),[_$opcodes_38.POP]),u([_$opcodes_38.POP],[_$opcodes_38.POP],[_$opcodes_38.PUSH_FAILED])))},group:(e,t)=>d(e.expression,{sp:t.sp,env:i(t.env),action:null}),semantic_and:(e,t)=>f(e,!1,t),semantic_not:(e,t)=>f(e,!0,t),rule_ref:t=>[_$opcodes_38.RULE,_$asts_36.indexOfRule(e,t.name)],literal(e){if(e.value.length>0){const r=0|e.match,n=r===__SOMETIMES_MATCH_39||r===__ALWAYS_MATCH_39&&!e.ignoreCase?function(e){const r=t.indexOf(e);return-1===r?t.push(e)-1:r}(e.ignoreCase?e.value.toLowerCase():e.value):null,o=r!==__ALWAYS_MATCH_39?a({type:"literal",value:e.value,ignoreCase:e.ignoreCase}):null;return c(r,e.ignoreCase?[_$opcodes_38.MATCH_STRING_IC,n]:[_$opcodes_38.MATCH_STRING,n],e.ignoreCase?[_$opcodes_38.ACCEPT_N,e.value.length]:[_$opcodes_38.ACCEPT_STRING,n],[_$opcodes_38.FAIL,o])}return[_$opcodes_38.PUSH_EMPTY_STRING]},class(e){const t=0|e.match,n=t===__SOMETIMES_MATCH_39?function(e){const t={value:e.parts,inverted:e.inverted,ignoreCase:e.ignoreCase},n=JSON.stringify(t),o=r.findIndex(e=>JSON.stringify(e)===n);return-1===o?r.push(t)-1:o}(e):null,o=t!==__ALWAYS_MATCH_39?a({type:"class",value:e.parts,inverted:e.inverted,ignoreCase:e.ignoreCase}):null;return c(t,[_$opcodes_38.MATCH_CHAR_CLASS,n],[_$opcodes_38.ACCEPT_N,1],[_$opcodes_38.FAIL,o])},any(e){const t=0|e.match,r=t!==__ALWAYS_MATCH_39?a({type:"any"}):null;return c(t,[_$opcodes_38.MATCH_ANY],[_$opcodes_38.ACCEPT_N,1],[_$opcodes_38.FAIL,r])}});d(e)},_$stack_50=class{constructor(e,t,r){this.sp=-1,this.maxSp=-1,this.varName=t,this.ruleName=e,this.type=r}name(e){if(e<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${e}`);return this.varName+e}push(e){const t=this.name(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t}pop(e){return void 0!==e?(this.sp-=e,Array.from({length:e},(e,t)=>this.name(this.sp+1+t))):this.name(this.sp--)}top(){return this.name(this.sp)}index(e){if(e<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${e}`);return this.name(this.sp-e)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(e,t)=>this.name(t)).join(", ")+";"}checkedIf(e,t,r){const n=this.sp;if(t(),r){const t=this.sp;if(this.sp=n,r(),t!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+e+": Branches of a condition can't move the stack pointer differently (before: "+n+", after then: "+t+", after else: "+this.sp+").")}}checkedLoop(e,t){const r=this.sp;if(t(),r!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+e+": Body of a loop can't move the stack pointer (before: "+r+", after: "+this.sp+").")}},_$version_56="2.0.1",_$utils_51={};function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}_$utils_51.hex=hex,_$utils_51.stringEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+hex(e)).replace(/[\x10-\x1F\x7F-\xFF]/g,e=>"\\x"+hex(e)).replace(/[\u0100-\u0FFF]/g,e=>"\\u0"+hex(e)).replace(/[\u1000-\uFFFF]/g,e=>"\\u"+hex(e))},_$utils_51.regexpClassEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+hex(e)).replace(/[\x10-\x1F\x7F-\xFF]/g,e=>"\\x"+hex(e)).replace(/[\u0100-\u0FFF]/g,e=>"\\u0"+hex(e)).replace(/[\u1000-\uFFFF]/g,e=>"\\u"+hex(e))};var _$base64_59={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_$base64_59.encode=function(e){if(0<=e&&e<intToCharMap.length)return intToCharMap[e];throw new TypeError("Must be between 0 and 63: "+e)};var _$base64Vlq_58={encode:function(e){let t,r="",n=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&n,(n>>>=5)>0&&(t|=32),r+=_$base64_59.encode(t)}while(n>0);return r}},_$util_63={getArg:function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')}};const supportsNullProto=!("__proto__"in Object.create(null));function identity(e){return e}function isProtoString(e){if(!e)return!1;const t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function strcmp(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}_$util_63.toSetString=supportsNullProto?identity:function(e){return isProtoString(e)?"$"+e:e},_$util_63.fromSetString=supportsNullProto?identity:function(e){return isProtoString(e)?e.slice(1):e},_$util_63.compareByGeneratedPositionsInflated=function(e,t){let r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)};const PROTOCOL="http:",PROTOCOL_AND_HOST=PROTOCOL+"//host";function createSafeHandler(e){return t=>{const r=getURLType(t),n=buildSafeBase(t),o=new URL(t,n);e(o);const a=o.toString();return"absolute"===r?a:"scheme-relative"===r?a.slice(PROTOCOL.length):"path-absolute"===r?a.slice(PROTOCOL_AND_HOST.length):computeRelativeURL(n,a)}}function withBase(e,t){return new URL(e,t).toString()}function buildSafeBase(e){const t=e.split("..").length-1,r=function(e,t){let r=0;for(;;){const e="p"+r++;if(-1===t.indexOf(e))return e}}(0,e);let n=PROTOCOL_AND_HOST+"/";for(let o=0;o<t;o++)n+=r+"/";return n}const ABSOLUTE_SCHEME=/^[A-Za-z0-9\+\-\.]+:/;function getURLType(e){return"/"===e[0]?"/"===e[1]?"scheme-relative":"path-absolute":ABSOLUTE_SCHEME.test(e)?"absolute":"path-relative"}function computeRelativeURL(e,t){"string"==typeof e&&(e=new URL(e)),"string"==typeof t&&(t=new URL(t));const r=t.pathname.split("/"),n=e.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();r.length>0&&n.length>0&&r[0]===n[0];)r.shift(),n.shift();return n.map(()=>"..").concat(r).join("/")+t.search+t.hash}const ensureDirectory=createSafeHandler(e=>{e.pathname=e.pathname.replace(/\/?$/,"/")}),normalize=createSafeHandler(e=>{});_$util_63.normalize=normalize,_$util_63.join=function(e,t){const r=getURLType(t),n=getURLType(e);if(e=ensureDirectory(e),"absolute"===r)return withBase(t,void 0);if("absolute"===n)return withBase(t,e);if("scheme-relative"===r)return normalize(t);if("scheme-relative"===n)return withBase(t,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL.length);if("path-absolute"===r)return normalize(t);if("path-absolute"===n)return withBase(t,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL_AND_HOST.length);const o=buildSafeBase(t+e);return computeRelativeURL(o,withBase(t,withBase(e,o)))},_$util_63.relative=function(e,t){const r=function(e,t){if(getURLType(e)!==getURLType(t))return null;const r=buildSafeBase(e+t),n=new URL(e,r),o=new URL(t,r);try{new URL("",o.toString())}catch(a){return null}return o.protocol!==n.protocol||o.user!==n.user||o.password!==n.password||o.hostname!==n.hostname||o.port!==n.port?null:computeRelativeURL(n,o)}(e,t);return"string"==typeof r?r:normalize(t)};var _$arraySet_57={};class ArraySet{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){const r=new ArraySet;for(let n=0,o=e.length;n<o;n++)r.add(e[n],t);return r}size(){return this._set.size}add(e,t){const r=this.has(e),n=this._array.length;r&&!t||this._array.push(e),r||this._set.set(e,n)}has(e){return this._set.has(e)}indexOf(e){const t=this._set.get(e);if(t>=0)return t;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}}_$arraySet_57.ArraySet=ArraySet;var _$mappingList_60={MappingList:class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){!function(e,t){const r=e.generatedLine,n=t.generatedLine,o=e.generatedColumn,a=t.generatedColumn;return n>r||n==r&&a>=o||_$util_63.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?(this._sorted=!1,this._array.push(e)):(this._last=e,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(_$util_63.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}},_$sourceMapGenerator_61={};const __ArraySet_61=_$arraySet_57.ArraySet,MappingList=_$mappingList_60.MappingList;class SourceMapGenerator{constructor(e){e||(e={}),this._file=_$util_63.getArg(e,"file",null),this._sourceRoot=_$util_63.getArg(e,"sourceRoot",null),this._skipValidation=_$util_63.getArg(e,"skipValidation",!1),this._sources=new __ArraySet_61,this._names=new __ArraySet_61,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap(e){const t=e.sourceRoot,r=new SourceMapGenerator({file:e.file,sourceRoot:t});return e.eachMapping((function(e){const n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=_$util_63.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(n){let o=n;null!=t&&(o=_$util_63.relative(t,n)),r._sources.has(o)||r._sources.add(o);const a=e.sourceContentFor(n);null!=a&&r.setSourceContent(n,a)})),r}addMapping(e){const t=_$util_63.getArg(e,"generated"),r=_$util_63.getArg(e,"original",null);let n=_$util_63.getArg(e,"source",null),o=_$util_63.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:r&&r.line,originalColumn:r&&r.column,source:n,name:o})}setSourceContent(e,t){let r=e;null!=this._sourceRoot&&(r=_$util_63.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[_$util_63.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[_$util_63.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,r){let n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}const o=this._sourceRoot;null!=o&&(n=_$util_63.relative(o,n));const a=this._mappings.toArray().length>0?new __ArraySet_61:this._sources,s=new __ArraySet_61;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){const n=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=n.source&&(t.source=n.source,null!=r&&(t.source=_$util_63.join(r,t.source)),null!=o&&(t.source=_$util_63.relative(o,t.source)),t.originalLine=n.line,t.originalColumn=n.column,null!=n.name&&(t.name=n.name))}const i=t.source;null==i||a.has(i)||a.add(i);const u=t.name;null==u||s.has(u)||s.add(u)}),this),this._sources=a,this._names=s,e.sources.forEach((function(t){const n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=_$util_63.join(r,t)),null!=o&&(t=_$util_63.relative(o,t)),this.setSourceContent(t,n))}),this)}_validateMapping(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!n);else if(!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))}_serializeMappings(){let e,t,r,n,o=0,a=1,s=0,i=0,u=0,c=0,l="";const p=this._mappings.toArray();for(let f=0,_=p.length;f<_;f++){if(e="",(t=p[f]).generatedLine!==a)for(o=0;t.generatedLine!==a;)e+=";",a++;else if(f>0){if(!_$util_63.compareByGeneratedPositionsInflated(t,p[f-1]))continue;e+=","}e+=_$base64Vlq_58.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=_$base64Vlq_58.encode(n-c),c=n,e+=_$base64Vlq_58.encode(t.originalLine-1-i),i=t.originalLine-1,e+=_$base64Vlq_58.encode(t.originalColumn-s),s=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=_$base64Vlq_58.encode(r-u),u=r)),l+=e}return l}_generateSourcesContent(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=_$util_63.relative(t,e));const r=_$util_63.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}SourceMapGenerator.prototype._version=3,_$sourceMapGenerator_61.SourceMapGenerator=SourceMapGenerator;var _$sourceNode_62={};const __SourceMapGenerator_62=_$sourceMapGenerator_61.SourceMapGenerator,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";class SourceNode{constructor(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[isSourceNode]=!0,null!=n&&this.add(n)}static fromStringWithSourceMap(e,t,r){const n=new SourceNode,o=e.split(REGEX_NEWLINE);let a=0;const s=function(){return e()+(e()||"");function e(){return a<o.length?o[a++]:void 0}};let i,u=1,c=0,l=null;return t.eachMapping((function(e){if(null!==l){if(!(u<e.generatedLine)){const t=(i=o[a]||"").substr(0,e.generatedColumn-c);return o[a]=i.substr(e.generatedColumn-c),c=e.generatedColumn,p(l,t),void(l=e)}p(l,s()),u++,c=0}for(;u<e.generatedLine;)n.add(s()),u++;c<e.generatedColumn&&(i=o[a]||"",n.add(i.substr(0,e.generatedColumn)),o[a]=i.substr(e.generatedColumn),c=e.generatedColumn),l=e}),this),a<o.length&&(l&&p(l,s()),n.add(o.splice(a).join(""))),t.sources.forEach((function(e){const o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=_$util_63.join(r,e)),n.setSourceContent(e,o))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{const o=r?_$util_63.join(r,e.source):e.source;n.add(new SourceNode(e.originalLine,e.originalColumn,o,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this}walk(e){let t;for(let r=0,n=this.children.length;r<n;r++)(t=this.children[r])[isSourceNode]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,r;const n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this}replaceRight(e,t){const r=this.children[this.children.length-1];return r[isSourceNode]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[_$util_63.toSetString(e)]=t}walkSourceContents(e){for(let r=0,n=this.children.length;r<n;r++)this.children[r][isSourceNode]&&this.children[r].walkSourceContents(e);const t=Object.keys(this.sourceContents);for(let r=0,n=t.length;r<n;r++)e(_$util_63.fromSetString(t[r]),this.sourceContents[t[r]])}toString(){let e="";return this.walk((function(t){e+=t})),e}toStringWithSourceMap(e){const t={code:"",line:1,column:0},r=new __SourceMapGenerator_62(e);let n=!1,o=null,a=null,s=null,i=null;return this.walk((function(e,u){t.code+=e,null!==u.source&&null!==u.line&&null!==u.column?(o===u.source&&a===u.line&&s===u.column&&i===u.name||r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name}),o=u.source,a=u.line,s=u.column,i=u.name,n=!0):n&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,n=!1);for(let a=0,s=e.length;a<s;a++)e.charCodeAt(a)===NEWLINE_CODE?(t.line++,t.column=0,a+1===s?(o=null,n=!1):n&&r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}}}_$sourceNode_62.SourceNode=SourceNode;var _$sourceMap_64={};_$sourceMap_64.SourceMapGenerator=_$sourceMapGenerator_61.SourceMapGenerator,_$sourceMap_64.SourceNode=_$sourceNode_62.SourceNode;const{stringEscape:stringEscape,regexpClassEscape:regexpClassEscape}=_$utils_51,{SourceNode:__SourceNode_40}=_$sourceMap_64;function toSourceNode(e,t,r){const n=t.start.line,o=t.start.column-1,a=e.split("\n");return 1===a.length?new __SourceNode_40(n,o,t.source,e,r):new __SourceNode_40(null,null,t.source,a.map((e,s)=>new __SourceNode_40(n+s,0===s?o:0,t.source,s===a.length-1?e:[e,"\n"],r)))}function wrapInSourceNode(e,t,r,n,o){return r?new __SourceNode_40(null,null,r.source,[e,toSourceNode(t,r,o),new __SourceNode_40(r.end.line,r.end.column-1,r.source,n)]):new __SourceNode_40(null,null,null,[e,t,n])}var _$generateJs_40=function(e,t){function r(e){return e instanceof __SourceNode_40?e:e.replace(/^(.+)$/gm,"  $1")}function n(e){return"peg$c"+e}function o(e){return"peg$r"+e}function a(e){return"peg$e"+e}function s(e){return"peg$f"+e}function i(e){return"peg$parse"+e}function u(e){return e.codeLocation?toSourceNode(e.code,e.codeLocation,"$"+e.type):e.code}e.code=function(e){function n(){return[`// Generated by Peggy ${_$version_56}.`,"//","// https://peggyjs.org/"]}function o(){return t.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join("\n"):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join("\n")}const a={bare:()=>[...n(),"(function() {",'  "use strict";',"",e,"",r("return "+o()+";"),"})()"],commonjs(){const r=Object.keys(t.dependencies),a=n();return a.push("",'"use strict";',""),r.length>0&&(r.forEach(e=>{a.push("var "+e+' = require("'+stringEscape(t.dependencies[e])+'");')}),a.push("")),a.push(e,"","module.exports = "+o()+";"),a},es(){const r=Object.keys(t.dependencies),o=n();return o.push(""),r.length>0&&(r.forEach(e=>{o.push("import "+e+' from "'+stringEscape(t.dependencies[e])+'";')}),o.push("")),o.push(e,"","export {","  peg$SyntaxError as SyntaxError,",t.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),o},amd(){const a=Object.keys(t.dependencies),s="["+a.map(e=>t.dependencies[e]).map(e=>'"'+stringEscape(e)+'"').join(", ")+"]",i=a.join(", ");return[...n(),"define("+s+", function("+i+") {",'  "use strict";',"",e,"",r("return "+o()+";"),"});"]},globals:()=>[...n(),"(function(root) {",'  "use strict";',"",e,"",r("root."+t.exportVar+" = "+o()+";"),"})(this);"],umd(){const a=Object.keys(t.dependencies),s=a.map(e=>t.dependencies[e]),i="["+s.map(e=>'"'+stringEscape(e)+'"').join(", ")+"]",u=s.map(e=>'require("'+stringEscape(e)+'")').join(", "),c=a.join(", "),l=n();return l.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+i+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+u+");"),null!==t.exportVar&&l.push("  } else {","    root."+t.exportVar+" = factory();"),l.push("  }","})(this, function("+c+") {",'  "use strict";',"",e,"",r("return "+o()+";"),"});"),l}}[t.format]();return new __SourceNode_40(null,null,t.grammarSource,a.map(e=>e instanceof __SourceNode_40?e:e+"\n"))}(function(){const c=[];e.topLevelInitializer&&(c.push(u(e.topLevelInitializer)),c.push("")),c.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;","      var filler = peg$padEnd(\"\", s.line.toString().length, ' ');","      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --\x3e " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"','          + filler + " | " + peg$padEnd("", s.column - 1, \' \')','          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),t.trace&&c.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");const l="{ "+t.allowedStartRules.map(e=>e+": "+i(e)).join(", ")+" }",p=i(t.allowedStartRules[0]);return c.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+l+";","  var peg$startRuleFunction = "+p+";","",new __SourceNode_40(null,null,t.grammarSource,[e.literals.map((e,t)=>"  var "+n(t)+' = "'+stringEscape(e)+'";').concat("",e.classes.map((e,t)=>{return"  var "+o(t)+" = /^["+((r=e).inverted?"^":"")+r.value.map(e=>Array.isArray(e)?regexpClassEscape(e[0])+"-"+regexpClassEscape(e[1]):regexpClassEscape(e)).join("")+"]/"+(r.ignoreCase?"i":"")+";";var r})).concat("",e.expectations.map((e,t)=>"  var "+a(t)+" = "+function(e){switch(e.type){case"rule":return'peg$otherExpectation("'+stringEscape(e.value)+'")';case"literal":return'peg$literalExpectation("'+stringEscape(e.value)+'", '+e.ignoreCase+")";case"class":return"peg$classExpectation(["+e.value.map(e=>Array.isArray(e)?'["'+stringEscape(e[0])+'", "'+stringEscape(e[1])+'"]':'"'+stringEscape(e)+'"').join(", ")+"], "+e.inverted+", "+e.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(e)+")")}}(e)+";")).concat("").join("\n"),e.functions.map((function(e,t){return wrapInSourceNode(`\n  var ${s(t)} = function(${e.params.join(", ")}) {`,e.body,e.location,"};")}))]),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),t.cache&&c.push("  var peg$resultsCache = {};",""),t.trace&&c.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),c.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),e.rules.forEach(u=>{c.push(...function(u){const c=[],l=new _$stack_50(u.name,"s","var"),p=function t(u){let c=0;const p=u.length,f=[];let _;function d(e,n){const o=n+3,a=u[c+o-2],s=u[c+o-1];let i,p;l.checkedIf(c,()=>{c+=o,i=t(u.slice(c,c+a)),c+=a},s>0?()=>{p=t(u.slice(c,c+s)),c+=s}:null),f.push("if ("+e+") {"),f.push(...i.map(r)),s>0&&(f.push("} else {"),f.push(...p.map(r))),f.push("}")}function h(e){const n=u[c+2-1];let o;l.checkedLoop(c,()=>{c+=2,o=t(u.slice(c,c+n)),c+=n}),f.push("while ("+e+") {"),f.push(...o.map(r)),f.push("}")}function y(){const e=u[c+4-1],t=s(u[c+1])+"("+u.slice(c+4,c+4+e).map(e=>l.index(e)).join(", ")+")";l.pop(u[c+2]),f.push(l.push(t)),c+=4+e}for(;c<p;)switch(u[c]){case _$opcodes_38.PUSH_EMPTY_STRING:f.push(l.push("''")),c++;break;case _$opcodes_38.PUSH_CURR_POS:f.push(l.push("peg$currPos")),c++;break;case _$opcodes_38.PUSH_UNDEFINED:f.push(l.push("undefined")),c++;break;case _$opcodes_38.PUSH_NULL:f.push(l.push("null")),c++;break;case _$opcodes_38.PUSH_FAILED:f.push(l.push("peg$FAILED")),c++;break;case _$opcodes_38.PUSH_EMPTY_ARRAY:f.push(l.push("[]")),c++;break;case _$opcodes_38.POP:l.pop(),c++;break;case _$opcodes_38.POP_CURR_POS:f.push("peg$currPos = "+l.pop()+";"),c++;break;case _$opcodes_38.POP_N:l.pop(u[c+1]),c+=2;break;case _$opcodes_38.NIP:_=l.pop(),l.pop(),f.push(l.push(_)),c++;break;case _$opcodes_38.APPEND:_=l.pop(),f.push(l.top()+".push("+_+");"),c++;break;case _$opcodes_38.WRAP:f.push(l.push("["+l.pop(u[c+1]).join(", ")+"]")),c+=2;break;case _$opcodes_38.TEXT:f.push(l.push("input.substring("+l.pop()+", peg$currPos)")),c++;break;case _$opcodes_38.PLUCK:{const e=3,t=u[c+e-1],r=e+t;_=u.slice(c+e,c+r),_=1===t?l.index(_[0]):`[ ${_.map(e=>l.index(e)).join(", ")} ]`,l.pop(u[c+1]),f.push(l.push(_)),c+=r;break}case _$opcodes_38.IF:d(l.top(),0);break;case _$opcodes_38.IF_ERROR:d(l.top()+" === peg$FAILED",0);break;case _$opcodes_38.IF_NOT_ERROR:d(l.top()+" !== peg$FAILED",0);break;case _$opcodes_38.WHILE_NOT_ERROR:h(l.top()+" !== peg$FAILED");break;case _$opcodes_38.MATCH_ANY:d("input.length > peg$currPos",0);break;case _$opcodes_38.MATCH_STRING:d(e.literals[u[c+1]].length>1?"input.substr(peg$currPos, "+e.literals[u[c+1]].length+") === "+n(u[c+1]):"input.charCodeAt(peg$currPos) === "+e.literals[u[c+1]].charCodeAt(0),1);break;case _$opcodes_38.MATCH_STRING_IC:d("input.substr(peg$currPos, "+e.literals[u[c+1]].length+").toLowerCase() === "+n(u[c+1]),1);break;case _$opcodes_38.MATCH_CHAR_CLASS:d(o(u[c+1])+".test(input.charAt(peg$currPos))",1);break;case _$opcodes_38.ACCEPT_N:f.push(l.push(u[c+1]>1?"input.substr(peg$currPos, "+u[c+1]+")":"input.charAt(peg$currPos)")),f.push(u[c+1]>1?"peg$currPos += "+u[c+1]+";":"peg$currPos++;"),c+=2;break;case _$opcodes_38.ACCEPT_STRING:f.push(l.push(n(u[c+1]))),f.push(e.literals[u[c+1]].length>1?"peg$currPos += "+e.literals[u[c+1]].length+";":"peg$currPos++;"),c+=2;break;case _$opcodes_38.FAIL:f.push(l.push("peg$FAILED")),f.push("if (peg$silentFails === 0) { peg$fail("+a(u[c+1])+"); }"),c+=2;break;case _$opcodes_38.LOAD_SAVED_POS:f.push("peg$savedPos = "+l.index(u[c+1])+";"),c+=2;break;case _$opcodes_38.UPDATE_SAVED_POS:f.push("peg$savedPos = peg$currPos;"),c++;break;case _$opcodes_38.CALL:y();break;case _$opcodes_38.RULE:f.push(l.push(i(e.rules[u[c+1]].name)+"()")),c+=2;break;case _$opcodes_38.SILENT_FAILS_ON:f.push("peg$silentFails++;"),c++;break;case _$opcodes_38.SILENT_FAILS_OFF:f.push("peg$silentFails--;"),c++;break;default:throw new Error("Invalid opcode: "+u[c]+".")}return f}(u.bytecode);return c.push(wrapInSourceNode("  function ",i(u.name),u.nameLocation,"() {\n",u.name)),t.trace&&c.push("  var startPos = peg$currPos;"),c.push(r(l.defines())),c.push(...function(r,n){const o=[];return o.push(""),t.trace&&o.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+r+",","  location: peg$computeLocation(startPos, startPos)","});",""),t.cache&&(o.push("var key = peg$currPos * "+e.rules.length+" + "+n+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),t.trace&&o.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+r+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+r+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),o.push("  return cached.result;","}","")),o}('"'+stringEscape(u.name)+'"',_$asts_36.indexOfRule(e,u.name)).map(r)),c.push(...p.map(r)),c.push(...function(e,r){const n=[];return t.cache&&n.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+r+" };"),t.trace&&n.push("","if ("+r+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+e+",","    result: "+r+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),n.push("","return "+r+";"),n}('"'+stringEscape(u.name)+'"',l.result()).map(r)),c.push("}"),c}(u).map(r)),c.push("")}),e.initializer&&(c.push(u(e.initializer)),c.push("")),c.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new __SourceNode_40(null,null,t.grammarSource,c.map(e=>e instanceof __SourceNode_40?e:e+"\n"))}())},_$removeProxyRules_42=function(e,t,r){const n=[];e.rules.forEach((o,a)=>{var s;"rule"===(s=o).type&&"rule_ref"===s.expression.type&&(function(e,t,n){_$visitor_52.build({rule_ref(o){o.name===t&&(o.name=n,r.info(`Proxy rule "${t}" replaced by the rule "${n}"`,o.location,[{message:"This rule will be used",location:_$asts_36.findRule(e,n).nameLocation}]))}})(e)}(e,o.name,o.expression.name),-1===t.allowedStartRules.indexOf(o.name)&&n.push(a))}),n.reverse(),n.forEach(t=>{e.rules.splice(t,1)})},_$reportDuplicateLabels_43=function(e,t,r){function n(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}function o(e,t){a(e.expression,n(t))}const a=_$visitor_52.build({rule(e){a(e.expression,{})},choice(e,t){e.alternatives.forEach(e=>{a(e,n(t))})},action:o,labeled(e,t){const n=e.label;n&&Object.prototype.hasOwnProperty.call(t,n)&&r.error(`Label "${e.label}" is already defined`,e.labelLocation,[{message:"Original label location",location:t[n]}]),a(e.expression,t),t[e.label]=e.labelLocation},text:o,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:o,group:o});a(e)},_$reportDuplicateRules_44=function(e,t,r){const n={};_$visitor_52.build({rule(e){Object.prototype.hasOwnProperty.call(n,e.name)?r.error(`Rule "${e.name}" is already defined`,e.nameLocation,[{message:"Original rule location",location:n[e.name]}]):n[e.name]=e.nameLocation}})(e)},_$reportInfiniteRecursion_46=function(e,t,r){const n=[],o=[],a=_$visitor_52.build({rule(e){n.push(e.name),a(e.expression),n.pop()},sequence(t){t.elements.every(t=>(a(t),!_$asts_36.alwaysConsumesOnSuccess(e,t)))},rule_ref(t){o.push(t);const s=_$asts_36.findRule(e,t.name);if(-1!==n.indexOf(t.name))return n.push(t.name),void r.error("Possible infinite loop when parsing (left recursion: "+n.join(" -> ")+")",s.nameLocation,o.map((e,t,r)=>({message:t+1!==r.length?`Step ${t+1}: call of the rule "${e.name}" without input consumption`:`Step ${t+1}: call itself without input consumption - left recursion`,location:e.location})));s&&a(s),o.pop()}});a(e)},_$reportInfiniteRepetition_47=function(e,t,r){_$visitor_52.build({zero_or_more(t){_$asts_36.alwaysConsumesOnSuccess(e,t.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",t.location)},one_or_more(t){_$asts_36.alwaysConsumesOnSuccess(e,t.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",t.location)}})(e)},_$reportUndefinedRules_48=function(e,t,r){_$visitor_52.build({rule_ref(t){_$asts_36.findRule(e,t.name)||r.error(`Rule "${t.name}" is not defined`,t.location)}})(e)},_$reportIncorrectPlucking_45=function(e,t,r){const n=_$visitor_52.build({action(e){n(e.expression,e)},labeled(e,t){e.pick&&t&&r.error('"@" cannot be used with an action block',e.labelLocation,[{message:"Action block location",location:t.codeLocation}]),n(e.expression)}});n(e)};class Defaults{constructor(e){"function"==typeof(e=void 0!==e?e:{}).error&&(this.error=e.error),"function"==typeof e.warning&&(this.warning=e.warning),"function"==typeof e.info&&(this.info=e.info)}error(){}warning(){}info(){}}var _$session_49=class{constructor(e){this._callbacks=new Defaults(e),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...e){++this.errors,null===this._firstError&&(this._firstError=new _$GrammarError_53(...e),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...e]),this._callbacks.error(this.stage,...e)}warning(...e){this.problems.push(["warning",...e]),this._callbacks.warning(this.stage,...e)}info(...e){this.problems.push(["info",...e]),this._callbacks.info(this.stage,...e)}checkErrors(){if(0!==this.errors)throw this._firstError}};function processOptions(e,t){const r={};return Object.keys(e).forEach(t=>{r[t]=e[t]}),Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(r,e)||(r[e]=t[e])}),r}const compiler={visitor:_$visitor_52,passes:{check:[_$reportUndefinedRules_48,_$reportDuplicateRules_44,_$reportDuplicateLabels_43,_$reportInfiniteRecursion_46,_$reportInfiniteRepetition_47,_$reportIncorrectPlucking_45],transform:[_$removeProxyRules_42,_$inferenceMatchResult_41],generate:[_$generateBytecode_39,_$generateJs_40]},compile(ast,passes,options){if(options=void 0!==options?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(0===options.allowedStartRules.length)throw new Error("Must have at least one start rule");const allRules=ast.rules.map(e=>e.name);for(const e of options.allowedStartRules)if(-1===allRules.indexOf(e))throw new Error(`Unknown start rule "${e}"`);const session=new _$session_49(options);switch(Object.keys(passes).forEach(e=>{session.stage=e,session.info("Process stage "+e),passes[e].forEach(t=>{session.info(`Process pass ${e}.${t.name}`),t(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};var _$compiler_37=compiler,_$parser_54={};const OPS_TO_PREFIXED_TYPES={$:"text","&":"simple_and","!":"simple_not"},OPS_TO_SUFFIXED_TYPES={"?":"optional","*":"zero_or_more","+":"one_or_more"},OPS_TO_SEMANTIC_PREDICATE_TYPES={"&":"semantic_and","!":"semantic_not"};function peg$SyntaxError(e,t,r,n){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,peg$SyntaxError.prototype),o.expected=t,o.found=r,o.location=n,o.name="SyntaxError",o}function peg$padEnd(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(peg$SyntaxError,Error),peg$SyntaxError.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source+":"+o.line+":"+o.column;if(n){var s=this.location.end,i=peg$padEnd("",o.line.toString().length," "),u=n[o.line-1],c=(o.line===s.line?s.column:u.length+1)-o.column||1;t+="\n --\x3e "+a+"\n"+i+" |\n"+o.line+" | "+u+"\n"+i+" | "+peg$padEnd("",o.column-1," ")+peg$padEnd("",c,"^")}else t+="\n at "+a}return t},peg$SyntaxError.buildMessage=function(e,t){var r={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function s(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(s);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},_$parser_54={SyntaxError:peg$SyntaxError,parse:function(e,t){var r,n={},o=(t=void 0!==t?t:{}).grammarSource,a={Grammar:rt},s=rt,i=/^[\n\r\u2028\u2029]/,u=/^[0-9]/,c=/^[0-9a-f]/i,l=/^[{}]/,p=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,f=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,_=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,d=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,h=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,y=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,v=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,m=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,g=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,b=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,w=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,A=Xe("{",!1),E=Xe("}",!1),x=Xe("=",!1),S=Xe("/",!1),$=Xe("@",!1),C=Xe(":",!1),k=Xe("$",!1),P=Xe("&",!1),O=Xe("!",!1),I=Xe("?",!1),R=Xe("*",!1),j=Xe("+",!1),T=Xe("(",!1),F=Xe(")",!1),L={type:"any"},D=Qe("whitespace"),N=Xe("\t",!1),B=Xe("\v",!1),U=Xe("\f",!1),M=Xe(" ",!1),q=Xe("\xa0",!1),H=Xe("\ufeff",!1),G=Je(["\n","\r","\u2028","\u2029"],!1,!1),Y=Qe("end of line"),K=Xe("\n",!1),z=Xe("\r\n",!1),W=Xe("\r",!1),V=Xe("\u2028",!1),X=Xe("\u2029",!1),J=Qe("comment"),Q=Xe("/*",!1),Z=Xe("*/",!1),ee=Xe("//",!1),te=Qe("identifier"),re=Xe("_",!1),ne=Xe("\\",!1),oe=Xe("\u200c",!1),ae=Xe("\u200d",!1),se=Qe("literal"),ie=Xe("i",!1),ue=Qe("string"),ce=Xe('"',!1),le=Xe("'",!1),pe=Qe("character class"),fe=Xe("[",!1),_e=Xe("^",!1),de=Xe("]",!1),he=Xe("-",!1),ye=Xe("0",!1),ve=Xe("b",!1),me=Xe("f",!1),ge=Xe("n",!1),be=Xe("r",!1),we=Xe("t",!1),Ae=Xe("v",!1),Ee=Xe("x",!1),xe=Xe("u",!1),Se=Je([["0","9"]],!1,!1),$e=Je([["0","9"],["a","f"]],!1,!0),Ce=Xe(".",!1),ke=Qe("code block"),Pe=Je(["{","}"],!1,!1),Oe=Je([["a","z"],"\xb5",["\xdf","\xf6"],["\xf8","\xff"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010b","\u010d","\u010f","\u0111","\u0113","\u0115","\u0117","\u0119","\u011b","\u011d","\u011f","\u0121","\u0123","\u0125","\u0127","\u0129","\u012b","\u012d","\u012f","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013a","\u013c","\u013e","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014b","\u014d","\u014f","\u0151","\u0153","\u0155","\u0157","\u0159","\u015b","\u015d","\u015f","\u0161","\u0163","\u0165","\u0167","\u0169","\u016b","\u016d","\u016f","\u0171","\u0173","\u0175","\u0177","\u017a","\u017c",["\u017e","\u0180"],"\u0183","\u0185","\u0188",["\u018c","\u018d"],"\u0192","\u0195",["\u0199","\u019b"],"\u019e","\u01a1","\u01a3","\u01a5","\u01a8",["\u01aa","\u01ab"],"\u01ad","\u01b0","\u01b4","\u01b6",["\u01b9","\u01ba"],["\u01bd","\u01bf"],"\u01c6","\u01c9","\u01cc","\u01ce","\u01d0","\u01d2","\u01d4","\u01d6","\u01d8","\u01da",["\u01dc","\u01dd"],"\u01df","\u01e1","\u01e3","\u01e5","\u01e7","\u01e9","\u01eb","\u01ed",["\u01ef","\u01f0"],"\u01f3","\u01f5","\u01f9","\u01fb","\u01fd","\u01ff","\u0201","\u0203","\u0205","\u0207","\u0209","\u020b","\u020d","\u020f","\u0211","\u0213","\u0215","\u0217","\u0219","\u021b","\u021d","\u021f","\u0221","\u0223","\u0225","\u0227","\u0229","\u022b","\u022d","\u022f","\u0231",["\u0233","\u0239"],"\u023c",["\u023f","\u0240"],"\u0242","\u0247","\u0249","\u024b","\u024d",["\u024f","\u0293"],["\u0295","\u02af"],"\u0371","\u0373","\u0377",["\u037b","\u037d"],"\u0390",["\u03ac","\u03ce"],["\u03d0","\u03d1"],["\u03d5","\u03d7"],"\u03d9","\u03db","\u03dd","\u03df","\u03e1","\u03e3","\u03e5","\u03e7","\u03e9","\u03eb","\u03ed",["\u03ef","\u03f3"],"\u03f5","\u03f8",["\u03fb","\u03fc"],["\u0430","\u045f"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046b","\u046d","\u046f","\u0471","\u0473","\u0475","\u0477","\u0479","\u047b","\u047d","\u047f","\u0481","\u048b","\u048d","\u048f","\u0491","\u0493","\u0495","\u0497","\u0499","\u049b","\u049d","\u049f","\u04a1","\u04a3","\u04a5","\u04a7","\u04a9","\u04ab","\u04ad","\u04af","\u04b1","\u04b3","\u04b5","\u04b7","\u04b9","\u04bb","\u04bd","\u04bf","\u04c2","\u04c4","\u04c6","\u04c8","\u04ca","\u04cc",["\u04ce","\u04cf"],"\u04d1","\u04d3","\u04d5","\u04d7","\u04d9","\u04db","\u04dd","\u04df","\u04e1","\u04e3","\u04e5","\u04e7","\u04e9","\u04eb","\u04ed","\u04ef","\u04f1","\u04f3","\u04f5","\u04f7","\u04f9","\u04fb","\u04fd","\u04ff","\u0501","\u0503","\u0505","\u0507","\u0509","\u050b","\u050d","\u050f","\u0511","\u0513","\u0515","\u0517","\u0519","\u051b","\u051d","\u051f","\u0521","\u0523","\u0525","\u0527","\u0529","\u052b","\u052d","\u052f",["\u0561","\u0587"],["\u13f8","\u13fd"],["\u1d00","\u1d2b"],["\u1d6b","\u1d77"],["\u1d79","\u1d9a"],"\u1e01","\u1e03","\u1e05","\u1e07","\u1e09","\u1e0b","\u1e0d","\u1e0f","\u1e11","\u1e13","\u1e15","\u1e17","\u1e19","\u1e1b","\u1e1d","\u1e1f","\u1e21","\u1e23","\u1e25","\u1e27","\u1e29","\u1e2b","\u1e2d","\u1e2f","\u1e31","\u1e33","\u1e35","\u1e37","\u1e39","\u1e3b","\u1e3d","\u1e3f","\u1e41","\u1e43","\u1e45","\u1e47","\u1e49","\u1e4b","\u1e4d","\u1e4f","\u1e51","\u1e53","\u1e55","\u1e57","\u1e59","\u1e5b","\u1e5d","\u1e5f","\u1e61","\u1e63","\u1e65","\u1e67","\u1e69","\u1e6b","\u1e6d","\u1e6f","\u1e71","\u1e73","\u1e75","\u1e77","\u1e79","\u1e7b","\u1e7d","\u1e7f","\u1e81","\u1e83","\u1e85","\u1e87","\u1e89","\u1e8b","\u1e8d","\u1e8f","\u1e91","\u1e93",["\u1e95","\u1e9d"],"\u1e9f","\u1ea1","\u1ea3","\u1ea5","\u1ea7","\u1ea9","\u1eab","\u1ead","\u1eaf","\u1eb1","\u1eb3","\u1eb5","\u1eb7","\u1eb9","\u1ebb","\u1ebd","\u1ebf","\u1ec1","\u1ec3","\u1ec5","\u1ec7","\u1ec9","\u1ecb","\u1ecd","\u1ecf","\u1ed1","\u1ed3","\u1ed5","\u1ed7","\u1ed9","\u1edb","\u1edd","\u1edf","\u1ee1","\u1ee3","\u1ee5","\u1ee7","\u1ee9","\u1eeb","\u1eed","\u1eef","\u1ef1","\u1ef3","\u1ef5","\u1ef7","\u1ef9","\u1efb","\u1efd",["\u1eff","\u1f07"],["\u1f10","\u1f15"],["\u1f20","\u1f27"],["\u1f30","\u1f37"],["\u1f40","\u1f45"],["\u1f50","\u1f57"],["\u1f60","\u1f67"],["\u1f70","\u1f7d"],["\u1f80","\u1f87"],["\u1f90","\u1f97"],["\u1fa0","\u1fa7"],["\u1fb0","\u1fb4"],["\u1fb6","\u1fb7"],"\u1fbe",["\u1fc2","\u1fc4"],["\u1fc6","\u1fc7"],["\u1fd0","\u1fd3"],["\u1fd6","\u1fd7"],["\u1fe0","\u1fe7"],["\u1ff2","\u1ff4"],["\u1ff6","\u1ff7"],"\u210a",["\u210e","\u210f"],"\u2113","\u212f","\u2134","\u2139",["\u213c","\u213d"],["\u2146","\u2149"],"\u214e","\u2184",["\u2c30","\u2c5e"],"\u2c61",["\u2c65","\u2c66"],"\u2c68","\u2c6a","\u2c6c","\u2c71",["\u2c73","\u2c74"],["\u2c76","\u2c7b"],"\u2c81","\u2c83","\u2c85","\u2c87","\u2c89","\u2c8b","\u2c8d","\u2c8f","\u2c91","\u2c93","\u2c95","\u2c97","\u2c99","\u2c9b","\u2c9d","\u2c9f","\u2ca1","\u2ca3","\u2ca5","\u2ca7","\u2ca9","\u2cab","\u2cad","\u2caf","\u2cb1","\u2cb3","\u2cb5","\u2cb7","\u2cb9","\u2cbb","\u2cbd","\u2cbf","\u2cc1","\u2cc3","\u2cc5","\u2cc7","\u2cc9","\u2ccb","\u2ccd","\u2ccf","\u2cd1","\u2cd3","\u2cd5","\u2cd7","\u2cd9","\u2cdb","\u2cdd","\u2cdf","\u2ce1",["\u2ce3","\u2ce4"],"\u2cec","\u2cee","\u2cf3",["\u2d00","\u2d25"],"\u2d27","\u2d2d","\ua641","\ua643","\ua645","\ua647","\ua649","\ua64b","\ua64d","\ua64f","\ua651","\ua653","\ua655","\ua657","\ua659","\ua65b","\ua65d","\ua65f","\ua661","\ua663","\ua665","\ua667","\ua669","\ua66b","\ua66d","\ua681","\ua683","\ua685","\ua687","\ua689","\ua68b","\ua68d","\ua68f","\ua691","\ua693","\ua695","\ua697","\ua699","\ua69b","\ua723","\ua725","\ua727","\ua729","\ua72b","\ua72d",["\ua72f","\ua731"],"\ua733","\ua735","\ua737","\ua739","\ua73b","\ua73d","\ua73f","\ua741","\ua743","\ua745","\ua747","\ua749","\ua74b","\ua74d","\ua74f","\ua751","\ua753","\ua755","\ua757","\ua759","\ua75b","\ua75d","\ua75f","\ua761","\ua763","\ua765","\ua767","\ua769","\ua76b","\ua76d","\ua76f",["\ua771","\ua778"],"\ua77a","\ua77c","\ua77f","\ua781","\ua783","\ua785","\ua787","\ua78c","\ua78e","\ua791",["\ua793","\ua795"],"\ua797","\ua799","\ua79b","\ua79d","\ua79f","\ua7a1","\ua7a3","\ua7a5","\ua7a7","\ua7a9","\ua7b5","\ua7b7","\ua7fa",["\uab30","\uab5a"],["\uab60","\uab65"],["\uab70","\uabbf"],["\ufb00","\ufb06"],["\ufb13","\ufb17"],["\uff41","\uff5a"]],!1,!1),Ie=Je([["\u02b0","\u02c1"],["\u02c6","\u02d1"],["\u02e0","\u02e4"],"\u02ec","\u02ee","\u0374","\u037a","\u0559","\u0640",["\u06e5","\u06e6"],["\u07f4","\u07f5"],"\u07fa","\u081a","\u0824","\u0828","\u0971","\u0e46","\u0ec6","\u10fc","\u17d7","\u1843","\u1aa7",["\u1c78","\u1c7d"],["\u1d2c","\u1d6a"],"\u1d78",["\u1d9b","\u1dbf"],"\u2071","\u207f",["\u2090","\u209c"],["\u2c7c","\u2c7d"],"\u2d6f","\u2e2f","\u3005",["\u3031","\u3035"],"\u303b",["\u309d","\u309e"],["\u30fc","\u30fe"],"\ua015",["\ua4f8","\ua4fd"],"\ua60c","\ua67f",["\ua69c","\ua69d"],["\ua717","\ua71f"],"\ua770","\ua788",["\ua7f8","\ua7f9"],"\ua9cf","\ua9e6","\uaa70","\uaadd",["\uaaf3","\uaaf4"],["\uab5c","\uab5f"],"\uff70",["\uff9e","\uff9f"]],!1,!1),Re=Je(["\xaa","\xba","\u01bb",["\u01c0","\u01c3"],"\u0294",["\u05d0","\u05ea"],["\u05f0","\u05f2"],["\u0620","\u063f"],["\u0641","\u064a"],["\u066e","\u066f"],["\u0671","\u06d3"],"\u06d5",["\u06ee","\u06ef"],["\u06fa","\u06fc"],"\u06ff","\u0710",["\u0712","\u072f"],["\u074d","\u07a5"],"\u07b1",["\u07ca","\u07ea"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08a0","\u08b4"],["\u0904","\u0939"],"\u093d","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098c"],["\u098f","\u0990"],["\u0993","\u09a8"],["\u09aa","\u09b0"],"\u09b2",["\u09b6","\u09b9"],"\u09bd","\u09ce",["\u09dc","\u09dd"],["\u09df","\u09e1"],["\u09f0","\u09f1"],["\u0a05","\u0a0a"],["\u0a0f","\u0a10"],["\u0a13","\u0a28"],["\u0a2a","\u0a30"],["\u0a32","\u0a33"],["\u0a35","\u0a36"],["\u0a38","\u0a39"],["\u0a59","\u0a5c"],"\u0a5e",["\u0a72","\u0a74"],["\u0a85","\u0a8d"],["\u0a8f","\u0a91"],["\u0a93","\u0aa8"],["\u0aaa","\u0ab0"],["\u0ab2","\u0ab3"],["\u0ab5","\u0ab9"],"\u0abd","\u0ad0",["\u0ae0","\u0ae1"],"\u0af9",["\u0b05","\u0b0c"],["\u0b0f","\u0b10"],["\u0b13","\u0b28"],["\u0b2a","\u0b30"],["\u0b32","\u0b33"],["\u0b35","\u0b39"],"\u0b3d",["\u0b5c","\u0b5d"],["\u0b5f","\u0b61"],"\u0b71","\u0b83",["\u0b85","\u0b8a"],["\u0b8e","\u0b90"],["\u0b92","\u0b95"],["\u0b99","\u0b9a"],"\u0b9c",["\u0b9e","\u0b9f"],["\u0ba3","\u0ba4"],["\u0ba8","\u0baa"],["\u0bae","\u0bb9"],"\u0bd0",["\u0c05","\u0c0c"],["\u0c0e","\u0c10"],["\u0c12","\u0c28"],["\u0c2a","\u0c39"],"\u0c3d",["\u0c58","\u0c5a"],["\u0c60","\u0c61"],["\u0c85","\u0c8c"],["\u0c8e","\u0c90"],["\u0c92","\u0ca8"],["\u0caa","\u0cb3"],["\u0cb5","\u0cb9"],"\u0cbd","\u0cde",["\u0ce0","\u0ce1"],["\u0cf1","\u0cf2"],["\u0d05","\u0d0c"],["\u0d0e","\u0d10"],["\u0d12","\u0d3a"],"\u0d3d","\u0d4e",["\u0d5f","\u0d61"],["\u0d7a","\u0d7f"],["\u0d85","\u0d96"],["\u0d9a","\u0db1"],["\u0db3","\u0dbb"],"\u0dbd",["\u0dc0","\u0dc6"],["\u0e01","\u0e30"],["\u0e32","\u0e33"],["\u0e40","\u0e45"],["\u0e81","\u0e82"],"\u0e84",["\u0e87","\u0e88"],"\u0e8a","\u0e8d",["\u0e94","\u0e97"],["\u0e99","\u0e9f"],["\u0ea1","\u0ea3"],"\u0ea5","\u0ea7",["\u0eaa","\u0eab"],["\u0ead","\u0eb0"],["\u0eb2","\u0eb3"],"\u0ebd",["\u0ec0","\u0ec4"],["\u0edc","\u0edf"],"\u0f00",["\u0f40","\u0f47"],["\u0f49","\u0f6c"],["\u0f88","\u0f8c"],["\u1000","\u102a"],"\u103f",["\u1050","\u1055"],["\u105a","\u105d"],"\u1061",["\u1065","\u1066"],["\u106e","\u1070"],["\u1075","\u1081"],"\u108e",["\u10d0","\u10fa"],["\u10fd","\u1248"],["\u124a","\u124d"],["\u1250","\u1256"],"\u1258",["\u125a","\u125d"],["\u1260","\u1288"],["\u128a","\u128d"],["\u1290","\u12b0"],["\u12b2","\u12b5"],["\u12b8","\u12be"],"\u12c0",["\u12c2","\u12c5"],["\u12c8","\u12d6"],["\u12d8","\u1310"],["\u1312","\u1315"],["\u1318","\u135a"],["\u1380","\u138f"],["\u1401","\u166c"],["\u166f","\u167f"],["\u1681","\u169a"],["\u16a0","\u16ea"],["\u16f1","\u16f8"],["\u1700","\u170c"],["\u170e","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176c"],["\u176e","\u1770"],["\u1780","\u17b3"],"\u17dc",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18a8"],"\u18aa",["\u18b0","\u18f5"],["\u1900","\u191e"],["\u1950","\u196d"],["\u1970","\u1974"],["\u1980","\u19ab"],["\u19b0","\u19c9"],["\u1a00","\u1a16"],["\u1a20","\u1a54"],["\u1b05","\u1b33"],["\u1b45","\u1b4b"],["\u1b83","\u1ba0"],["\u1bae","\u1baf"],["\u1bba","\u1be5"],["\u1c00","\u1c23"],["\u1c4d","\u1c4f"],["\u1c5a","\u1c77"],["\u1ce9","\u1cec"],["\u1cee","\u1cf1"],["\u1cf5","\u1cf6"],["\u2135","\u2138"],["\u2d30","\u2d67"],["\u2d80","\u2d96"],["\u2da0","\u2da6"],["\u2da8","\u2dae"],["\u2db0","\u2db6"],["\u2db8","\u2dbe"],["\u2dc0","\u2dc6"],["\u2dc8","\u2dce"],["\u2dd0","\u2dd6"],["\u2dd8","\u2dde"],"\u3006","\u303c",["\u3041","\u3096"],"\u309f",["\u30a1","\u30fa"],"\u30ff",["\u3105","\u312d"],["\u3131","\u318e"],["\u31a0","\u31ba"],["\u31f0","\u31ff"],["\u3400","\u4db5"],["\u4e00","\u9fd5"],["\ua000","\ua014"],["\ua016","\ua48c"],["\ua4d0","\ua4f7"],["\ua500","\ua60b"],["\ua610","\ua61f"],["\ua62a","\ua62b"],"\ua66e",["\ua6a0","\ua6e5"],"\ua78f","\ua7f7",["\ua7fb","\ua801"],["\ua803","\ua805"],["\ua807","\ua80a"],["\ua80c","\ua822"],["\ua840","\ua873"],["\ua882","\ua8b3"],["\ua8f2","\ua8f7"],"\ua8fb","\ua8fd",["\ua90a","\ua925"],["\ua930","\ua946"],["\ua960","\ua97c"],["\ua984","\ua9b2"],["\ua9e0","\ua9e4"],["\ua9e7","\ua9ef"],["\ua9fa","\ua9fe"],["\uaa00","\uaa28"],["\uaa40","\uaa42"],["\uaa44","\uaa4b"],["\uaa60","\uaa6f"],["\uaa71","\uaa76"],"\uaa7a",["\uaa7e","\uaaaf"],"\uaab1",["\uaab5","\uaab6"],["\uaab9","\uaabd"],"\uaac0","\uaac2",["\uaadb","\uaadc"],["\uaae0","\uaaea"],"\uaaf2",["\uab01","\uab06"],["\uab09","\uab0e"],["\uab11","\uab16"],["\uab20","\uab26"],["\uab28","\uab2e"],["\uabc0","\uabe2"],["\uac00","\ud7a3"],["\ud7b0","\ud7c6"],["\ud7cb","\ud7fb"],["\uf900","\ufa6d"],["\ufa70","\ufad9"],"\ufb1d",["\ufb1f","\ufb28"],["\ufb2a","\ufb36"],["\ufb38","\ufb3c"],"\ufb3e",["\ufb40","\ufb41"],["\ufb43","\ufb44"],["\ufb46","\ufbb1"],["\ufbd3","\ufd3d"],["\ufd50","\ufd8f"],["\ufd92","\ufdc7"],["\ufdf0","\ufdfb"],["\ufe70","\ufe74"],["\ufe76","\ufefc"],["\uff66","\uff6f"],["\uff71","\uff9d"],["\uffa0","\uffbe"],["\uffc2","\uffc7"],["\uffca","\uffcf"],["\uffd2","\uffd7"],["\uffda","\uffdc"]],!1,!1),je=Je(["\u01c5","\u01c8","\u01cb","\u01f2",["\u1f88","\u1f8f"],["\u1f98","\u1f9f"],["\u1fa8","\u1faf"],"\u1fbc","\u1fcc","\u1ffc"],!1,!1),Te=Je([["A","Z"],["\xc0","\xd6"],["\xd8","\xde"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010a","\u010c","\u010e","\u0110","\u0112","\u0114","\u0116","\u0118","\u011a","\u011c","\u011e","\u0120","\u0122","\u0124","\u0126","\u0128","\u012a","\u012c","\u012e","\u0130","\u0132","\u0134","\u0136","\u0139","\u013b","\u013d","\u013f","\u0141","\u0143","\u0145","\u0147","\u014a","\u014c","\u014e","\u0150","\u0152","\u0154","\u0156","\u0158","\u015a","\u015c","\u015e","\u0160","\u0162","\u0164","\u0166","\u0168","\u016a","\u016c","\u016e","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017b","\u017d",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018b"],["\u018e","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019c","\u019d"],["\u019f","\u01a0"],"\u01a2","\u01a4",["\u01a6","\u01a7"],"\u01a9","\u01ac",["\u01ae","\u01af"],["\u01b1","\u01b3"],"\u01b5",["\u01b7","\u01b8"],"\u01bc","\u01c4","\u01c7","\u01ca","\u01cd","\u01cf","\u01d1","\u01d3","\u01d5","\u01d7","\u01d9","\u01db","\u01de","\u01e0","\u01e2","\u01e4","\u01e6","\u01e8","\u01ea","\u01ec","\u01ee","\u01f1","\u01f4",["\u01f6","\u01f8"],"\u01fa","\u01fc","\u01fe","\u0200","\u0202","\u0204","\u0206","\u0208","\u020a","\u020c","\u020e","\u0210","\u0212","\u0214","\u0216","\u0218","\u021a","\u021c","\u021e","\u0220","\u0222","\u0224","\u0226","\u0228","\u022a","\u022c","\u022e","\u0230","\u0232",["\u023a","\u023b"],["\u023d","\u023e"],"\u0241",["\u0243","\u0246"],"\u0248","\u024a","\u024c","\u024e","\u0370","\u0372","\u0376","\u037f","\u0386",["\u0388","\u038a"],"\u038c",["\u038e","\u038f"],["\u0391","\u03a1"],["\u03a3","\u03ab"],"\u03cf",["\u03d2","\u03d4"],"\u03d8","\u03da","\u03dc","\u03de","\u03e0","\u03e2","\u03e4","\u03e6","\u03e8","\u03ea","\u03ec","\u03ee","\u03f4","\u03f7",["\u03f9","\u03fa"],["\u03fd","\u042f"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046a","\u046c","\u046e","\u0470","\u0472","\u0474","\u0476","\u0478","\u047a","\u047c","\u047e","\u0480","\u048a","\u048c","\u048e","\u0490","\u0492","\u0494","\u0496","\u0498","\u049a","\u049c","\u049e","\u04a0","\u04a2","\u04a4","\u04a6","\u04a8","\u04aa","\u04ac","\u04ae","\u04b0","\u04b2","\u04b4","\u04b6","\u04b8","\u04ba","\u04bc","\u04be",["\u04c0","\u04c1"],"\u04c3","\u04c5","\u04c7","\u04c9","\u04cb","\u04cd","\u04d0","\u04d2","\u04d4","\u04d6","\u04d8","\u04da","\u04dc","\u04de","\u04e0","\u04e2","\u04e4","\u04e6","\u04e8","\u04ea","\u04ec","\u04ee","\u04f0","\u04f2","\u04f4","\u04f6","\u04f8","\u04fa","\u04fc","\u04fe","\u0500","\u0502","\u0504","\u0506","\u0508","\u050a","\u050c","\u050e","\u0510","\u0512","\u0514","\u0516","\u0518","\u051a","\u051c","\u051e","\u0520","\u0522","\u0524","\u0526","\u0528","\u052a","\u052c","\u052e",["\u0531","\u0556"],["\u10a0","\u10c5"],"\u10c7","\u10cd",["\u13a0","\u13f5"],"\u1e00","\u1e02","\u1e04","\u1e06","\u1e08","\u1e0a","\u1e0c","\u1e0e","\u1e10","\u1e12","\u1e14","\u1e16","\u1e18","\u1e1a","\u1e1c","\u1e1e","\u1e20","\u1e22","\u1e24","\u1e26","\u1e28","\u1e2a","\u1e2c","\u1e2e","\u1e30","\u1e32","\u1e34","\u1e36","\u1e38","\u1e3a","\u1e3c","\u1e3e","\u1e40","\u1e42","\u1e44","\u1e46","\u1e48","\u1e4a","\u1e4c","\u1e4e","\u1e50","\u1e52","\u1e54","\u1e56","\u1e58","\u1e5a","\u1e5c","\u1e5e","\u1e60","\u1e62","\u1e64","\u1e66","\u1e68","\u1e6a","\u1e6c","\u1e6e","\u1e70","\u1e72","\u1e74","\u1e76","\u1e78","\u1e7a","\u1e7c","\u1e7e","\u1e80","\u1e82","\u1e84","\u1e86","\u1e88","\u1e8a","\u1e8c","\u1e8e","\u1e90","\u1e92","\u1e94","\u1e9e","\u1ea0","\u1ea2","\u1ea4","\u1ea6","\u1ea8","\u1eaa","\u1eac","\u1eae","\u1eb0","\u1eb2","\u1eb4","\u1eb6","\u1eb8","\u1eba","\u1ebc","\u1ebe","\u1ec0","\u1ec2","\u1ec4","\u1ec6","\u1ec8","\u1eca","\u1ecc","\u1ece","\u1ed0","\u1ed2","\u1ed4","\u1ed6","\u1ed8","\u1eda","\u1edc","\u1ede","\u1ee0","\u1ee2","\u1ee4","\u1ee6","\u1ee8","\u1eea","\u1eec","\u1eee","\u1ef0","\u1ef2","\u1ef4","\u1ef6","\u1ef8","\u1efa","\u1efc","\u1efe",["\u1f08","\u1f0f"],["\u1f18","\u1f1d"],["\u1f28","\u1f2f"],["\u1f38","\u1f3f"],["\u1f48","\u1f4d"],"\u1f59","\u1f5b","\u1f5d","\u1f5f",["\u1f68","\u1f6f"],["\u1fb8","\u1fbb"],["\u1fc8","\u1fcb"],["\u1fd8","\u1fdb"],["\u1fe8","\u1fec"],["\u1ff8","\u1ffb"],"\u2102","\u2107",["\u210b","\u210d"],["\u2110","\u2112"],"\u2115",["\u2119","\u211d"],"\u2124","\u2126","\u2128",["\u212a","\u212d"],["\u2130","\u2133"],["\u213e","\u213f"],"\u2145","\u2183",["\u2c00","\u2c2e"],"\u2c60",["\u2c62","\u2c64"],"\u2c67","\u2c69","\u2c6b",["\u2c6d","\u2c70"],"\u2c72","\u2c75",["\u2c7e","\u2c80"],"\u2c82","\u2c84","\u2c86","\u2c88","\u2c8a","\u2c8c","\u2c8e","\u2c90","\u2c92","\u2c94","\u2c96","\u2c98","\u2c9a","\u2c9c","\u2c9e","\u2ca0","\u2ca2","\u2ca4","\u2ca6","\u2ca8","\u2caa","\u2cac","\u2cae","\u2cb0","\u2cb2","\u2cb4","\u2cb6","\u2cb8","\u2cba","\u2cbc","\u2cbe","\u2cc0","\u2cc2","\u2cc4","\u2cc6","\u2cc8","\u2cca","\u2ccc","\u2cce","\u2cd0","\u2cd2","\u2cd4","\u2cd6","\u2cd8","\u2cda","\u2cdc","\u2cde","\u2ce0","\u2ce2","\u2ceb","\u2ced","\u2cf2","\ua640","\ua642","\ua644","\ua646","\ua648","\ua64a","\ua64c","\ua64e","\ua650","\ua652","\ua654","\ua656","\ua658","\ua65a","\ua65c","\ua65e","\ua660","\ua662","\ua664","\ua666","\ua668","\ua66a","\ua66c","\ua680","\ua682","\ua684","\ua686","\ua688","\ua68a","\ua68c","\ua68e","\ua690","\ua692","\ua694","\ua696","\ua698","\ua69a","\ua722","\ua724","\ua726","\ua728","\ua72a","\ua72c","\ua72e","\ua732","\ua734","\ua736","\ua738","\ua73a","\ua73c","\ua73e","\ua740","\ua742","\ua744","\ua746","\ua748","\ua74a","\ua74c","\ua74e","\ua750","\ua752","\ua754","\ua756","\ua758","\ua75a","\ua75c","\ua75e","\ua760","\ua762","\ua764","\ua766","\ua768","\ua76a","\ua76c","\ua76e","\ua779","\ua77b",["\ua77d","\ua77e"],"\ua780","\ua782","\ua784","\ua786","\ua78b","\ua78d","\ua790","\ua792","\ua796","\ua798","\ua79a","\ua79c","\ua79e","\ua7a0","\ua7a2","\ua7a4","\ua7a6","\ua7a8",["\ua7aa","\ua7ad"],["\ua7b0","\ua7b4"],"\ua7b6",["\uff21","\uff3a"]],!1,!1),Fe=Je(["\u0903","\u093b",["\u093e","\u0940"],["\u0949","\u094c"],["\u094e","\u094f"],["\u0982","\u0983"],["\u09be","\u09c0"],["\u09c7","\u09c8"],["\u09cb","\u09cc"],"\u09d7","\u0a03",["\u0a3e","\u0a40"],"\u0a83",["\u0abe","\u0ac0"],"\u0ac9",["\u0acb","\u0acc"],["\u0b02","\u0b03"],"\u0b3e","\u0b40",["\u0b47","\u0b48"],["\u0b4b","\u0b4c"],"\u0b57",["\u0bbe","\u0bbf"],["\u0bc1","\u0bc2"],["\u0bc6","\u0bc8"],["\u0bca","\u0bcc"],"\u0bd7",["\u0c01","\u0c03"],["\u0c41","\u0c44"],["\u0c82","\u0c83"],"\u0cbe",["\u0cc0","\u0cc4"],["\u0cc7","\u0cc8"],["\u0cca","\u0ccb"],["\u0cd5","\u0cd6"],["\u0d02","\u0d03"],["\u0d3e","\u0d40"],["\u0d46","\u0d48"],["\u0d4a","\u0d4c"],"\u0d57",["\u0d82","\u0d83"],["\u0dcf","\u0dd1"],["\u0dd8","\u0ddf"],["\u0df2","\u0df3"],["\u0f3e","\u0f3f"],"\u0f7f",["\u102b","\u102c"],"\u1031","\u1038",["\u103b","\u103c"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106d"],["\u1083","\u1084"],["\u1087","\u108c"],"\u108f",["\u109a","\u109c"],"\u17b6",["\u17be","\u17c5"],["\u17c7","\u17c8"],["\u1923","\u1926"],["\u1929","\u192b"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1a19","\u1a1a"],"\u1a55","\u1a57","\u1a61",["\u1a63","\u1a64"],["\u1a6d","\u1a72"],"\u1b04","\u1b35","\u1b3b",["\u1b3d","\u1b41"],["\u1b43","\u1b44"],"\u1b82","\u1ba1",["\u1ba6","\u1ba7"],"\u1baa","\u1be7",["\u1bea","\u1bec"],"\u1bee",["\u1bf2","\u1bf3"],["\u1c24","\u1c2b"],["\u1c34","\u1c35"],"\u1ce1",["\u1cf2","\u1cf3"],["\u302e","\u302f"],["\ua823","\ua824"],"\ua827",["\ua880","\ua881"],["\ua8b4","\ua8c3"],["\ua952","\ua953"],"\ua983",["\ua9b4","\ua9b5"],["\ua9ba","\ua9bb"],["\ua9bd","\ua9c0"],["\uaa2f","\uaa30"],["\uaa33","\uaa34"],"\uaa4d","\uaa7b","\uaa7d","\uaaeb",["\uaaee","\uaaef"],"\uaaf5",["\uabe3","\uabe4"],["\uabe6","\uabe7"],["\uabe9","\uabea"],"\uabec"],!1,!1),Le=Je([["\u0300","\u036f"],["\u0483","\u0487"],["\u0591","\u05bd"],"\u05bf",["\u05c1","\u05c2"],["\u05c4","\u05c5"],"\u05c7",["\u0610","\u061a"],["\u064b","\u065f"],"\u0670",["\u06d6","\u06dc"],["\u06df","\u06e4"],["\u06e7","\u06e8"],["\u06ea","\u06ed"],"\u0711",["\u0730","\u074a"],["\u07a6","\u07b0"],["\u07eb","\u07f3"],["\u0816","\u0819"],["\u081b","\u0823"],["\u0825","\u0827"],["\u0829","\u082d"],["\u0859","\u085b"],["\u08e3","\u0902"],"\u093a","\u093c",["\u0941","\u0948"],"\u094d",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09bc",["\u09c1","\u09c4"],"\u09cd",["\u09e2","\u09e3"],["\u0a01","\u0a02"],"\u0a3c",["\u0a41","\u0a42"],["\u0a47","\u0a48"],["\u0a4b","\u0a4d"],"\u0a51",["\u0a70","\u0a71"],"\u0a75",["\u0a81","\u0a82"],"\u0abc",["\u0ac1","\u0ac5"],["\u0ac7","\u0ac8"],"\u0acd",["\u0ae2","\u0ae3"],"\u0b01","\u0b3c","\u0b3f",["\u0b41","\u0b44"],"\u0b4d","\u0b56",["\u0b62","\u0b63"],"\u0b82","\u0bc0","\u0bcd","\u0c00",["\u0c3e","\u0c40"],["\u0c46","\u0c48"],["\u0c4a","\u0c4d"],["\u0c55","\u0c56"],["\u0c62","\u0c63"],"\u0c81","\u0cbc","\u0cbf","\u0cc6",["\u0ccc","\u0ccd"],["\u0ce2","\u0ce3"],"\u0d01",["\u0d41","\u0d44"],"\u0d4d",["\u0d62","\u0d63"],"\u0dca",["\u0dd2","\u0dd4"],"\u0dd6","\u0e31",["\u0e34","\u0e3a"],["\u0e47","\u0e4e"],"\u0eb1",["\u0eb4","\u0eb9"],["\u0ebb","\u0ebc"],["\u0ec8","\u0ecd"],["\u0f18","\u0f19"],"\u0f35","\u0f37","\u0f39",["\u0f71","\u0f7e"],["\u0f80","\u0f84"],["\u0f86","\u0f87"],["\u0f8d","\u0f97"],["\u0f99","\u0fbc"],"\u0fc6",["\u102d","\u1030"],["\u1032","\u1037"],["\u1039","\u103a"],["\u103d","\u103e"],["\u1058","\u1059"],["\u105e","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108d","\u109d",["\u135d","\u135f"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17b4","\u17b5"],["\u17b7","\u17bd"],"\u17c6",["\u17c9","\u17d3"],"\u17dd",["\u180b","\u180d"],"\u18a9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193b"],["\u1a17","\u1a18"],"\u1a1b","\u1a56",["\u1a58","\u1a5e"],"\u1a60","\u1a62",["\u1a65","\u1a6c"],["\u1a73","\u1a7c"],"\u1a7f",["\u1ab0","\u1abd"],["\u1b00","\u1b03"],"\u1b34",["\u1b36","\u1b3a"],"\u1b3c","\u1b42",["\u1b6b","\u1b73"],["\u1b80","\u1b81"],["\u1ba2","\u1ba5"],["\u1ba8","\u1ba9"],["\u1bab","\u1bad"],"\u1be6",["\u1be8","\u1be9"],"\u1bed",["\u1bef","\u1bf1"],["\u1c2c","\u1c33"],["\u1c36","\u1c37"],["\u1cd0","\u1cd2"],["\u1cd4","\u1ce0"],["\u1ce2","\u1ce8"],"\u1ced","\u1cf4",["\u1cf8","\u1cf9"],["\u1dc0","\u1df5"],["\u1dfc","\u1dff"],["\u20d0","\u20dc"],"\u20e1",["\u20e5","\u20f0"],["\u2cef","\u2cf1"],"\u2d7f",["\u2de0","\u2dff"],["\u302a","\u302d"],["\u3099","\u309a"],"\ua66f",["\ua674","\ua67d"],["\ua69e","\ua69f"],["\ua6f0","\ua6f1"],"\ua802","\ua806","\ua80b",["\ua825","\ua826"],"\ua8c4",["\ua8e0","\ua8f1"],["\ua926","\ua92d"],["\ua947","\ua951"],["\ua980","\ua982"],"\ua9b3",["\ua9b6","\ua9b9"],"\ua9bc","\ua9e5",["\uaa29","\uaa2e"],["\uaa31","\uaa32"],["\uaa35","\uaa36"],"\uaa43","\uaa4c","\uaa7c","\uaab0",["\uaab2","\uaab4"],["\uaab7","\uaab8"],["\uaabe","\uaabf"],"\uaac1",["\uaaec","\uaaed"],"\uaaf6","\uabe5","\uabe8","\uabed","\ufb1e",["\ufe00","\ufe0f"],["\ufe20","\ufe2f"]],!1,!1),De=Je([["0","9"],["\u0660","\u0669"],["\u06f0","\u06f9"],["\u07c0","\u07c9"],["\u0966","\u096f"],["\u09e6","\u09ef"],["\u0a66","\u0a6f"],["\u0ae6","\u0aef"],["\u0b66","\u0b6f"],["\u0be6","\u0bef"],["\u0c66","\u0c6f"],["\u0ce6","\u0cef"],["\u0d66","\u0d6f"],["\u0de6","\u0def"],["\u0e50","\u0e59"],["\u0ed0","\u0ed9"],["\u0f20","\u0f29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17e0","\u17e9"],["\u1810","\u1819"],["\u1946","\u194f"],["\u19d0","\u19d9"],["\u1a80","\u1a89"],["\u1a90","\u1a99"],["\u1b50","\u1b59"],["\u1bb0","\u1bb9"],["\u1c40","\u1c49"],["\u1c50","\u1c59"],["\ua620","\ua629"],["\ua8d0","\ua8d9"],["\ua900","\ua909"],["\ua9d0","\ua9d9"],["\ua9f0","\ua9f9"],["\uaa50","\uaa59"],["\uabf0","\uabf9"],["\uff10","\uff19"]],!1,!1),Ne=Je([["\u16ee","\u16f0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303a"],["\ua6e6","\ua6ef"]],!1,!1),Be=Je(["_",["\u203f","\u2040"],"\u2054",["\ufe33","\ufe34"],["\ufe4d","\ufe4f"],"\uff3f"],!1,!1),Ue=Je([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),Me=Xe(";",!1),qe=0,He=0,Ge=[{line:1,column:1}],Ye=0,Ke=[],ze=0;if("startRule"in t){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=a[t.startRule]}function We(){return et(He,qe)}function Ve(e,t){throw function(e,t){return new peg$SyntaxError(e,null,null,t)}(e,t=void 0!==t?t:et(He,qe))}function Xe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Je(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Qe(e){return{type:"other",description:e}}function Ze(t){var r,n=Ge[t];if(n)return n;for(r=t-1;!Ge[r];)r--;for(n={line:(n=Ge[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Ge[t]=n,n}function et(e,t){var r=Ze(e),n=Ze(t);return{source:o,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function tt(e){qe<Ye||(qe>Ye&&(Ye=qe,Ke=[]),Ke.push(e))}function rt(){var t,r,o,a,s,i;if(t=qe,jt(),r=qe,(o=function(){var t,r,o,a;return t=qe,123===e.charCodeAt(qe)?(r="{",qe++):(r=n,0===ze&&tt(A)),r!==n&&(o=Rt())!==n?(125===e.charCodeAt(qe)?(a="}",qe++):(a=n,0===ze&&tt(E)),a!==n&&Tt()!==n?(He=t,t=function(e){return{type:"top_level_initializer",code:e[0],codeLocation:e[1],location:We()}}(o)):(qe=t,t=n)):(qe=t,t=n),t}())!==n?(a=jt(),r=o):(qe=r,r=n),r===n&&(r=null),o=qe,(a=function(){var e,t;return e=qe,(t=Rt())!==n&&Tt()!==n?(He=e,e=function(e){return{type:"initializer",code:e[0],codeLocation:e[1],location:We()}}(t)):(qe=e,e=n),e}())!==n?(s=jt(),o=a):(qe=o,o=n),o===n&&(o=null),a=[],s=qe,(i=nt())!==n?(jt(),s=i):(qe=s,s=n),s!==n)for(;s!==n;)a.push(s),s=qe,(i=nt())!==n?(jt(),s=i):(qe=s,s=n);else a=n;return a!==n?(He=t,t={type:"grammar",topLevelInitializer:r,initializer:o,rules:a,location:We()}):(qe=t,t=n),t}function nt(){var t,r,o,a,s,i,u,c;return t=qe,(r=mt())!==n?(jt(),o=qe,(a=wt())!==n?(jt(),o=a):(qe=o,o=n),o===n&&(o=null),61===e.charCodeAt(qe)?(a="=",qe++):(a=n,0===ze&&tt(x)),a!==n?(jt(),(s=ot())!==n&&Tt()!==n?(He=t,u=o,c=s,t={type:"rule",name:(i=r)[0],nameLocation:i[1],expression:null!==u?{type:"named",name:u,expression:c,location:We()}:c,location:We()}):(qe=t,t=n)):(qe=t,t=n)):(qe=t,t=n),t}function ot(){var t,r,o,a,s,i,u,c;if(t=qe,(r=at())!==n){for(o=[],a=qe,jt(),47===e.charCodeAt(qe)?(s="/",qe++):(s=n,0===ze&&tt(S)),s!==n?(jt(),(i=at())!==n?a=i:(qe=a,a=n)):(qe=a,a=n);a!==n;)o.push(a),a=qe,jt(),47===e.charCodeAt(qe)?(s="/",qe++):(s=n,0===ze&&tt(S)),s!==n?(jt(),(i=at())!==n?a=i:(qe=a,a=n)):(qe=a,a=n);He=t,u=r,t=(c=o).length>0?{type:"choice",alternatives:[u].concat(c),location:We()}:u}else qe=t,t=n;return t}function at(){var e,t,r,o;return e=qe,(t=function(){var e,t,r,o,a,s,i;if(e=qe,(t=st())!==n){for(r=[],o=qe,jt(),(a=st())!==n?o=a:(qe=o,o=n);o!==n;)r.push(o),o=qe,jt(),(a=st())!==n?o=a:(qe=o,o=n);He=e,s=t,e=(i=r).length>0||"labeled"===s.type&&s.pick?{type:"sequence",elements:[s].concat(i),location:We()}:s}else qe=e,e=n;return e}())!==n?(r=qe,jt(),(o=Rt())!==n?r=o:(qe=r,r=n),r===n&&(r=null),He=e,e=function(e,t){return null!==t?{type:"action",expression:e,code:t[0],codeLocation:t[1],location:We()}:e}(t,r)):(qe=e,e=n),e}function st(){var t,r,o,a,s,i,u;return t=qe,(r=function(){var t,r;return t=qe,64===e.charCodeAt(qe)?(r="@",qe++):(r=n,0===ze&&tt($)),r!==n&&(He=t,r=We()),r}())!==n?((o=it())===n&&(o=null),(a=ut())!==n?(He=t,s=r,i=o,(u=a).type.startsWith("semantic_")&&Ve('"@" cannot be used on a semantic predicate',s),t={type:"labeled",label:null!==i?i[0]:null,labelLocation:null!==i?i[1]:s,pick:!0,expression:u,location:We()}):(qe=t,t=n)):(qe=t,t=n),t===n&&(t=qe,(r=it())!==n?(o=jt(),(a=ut())!==n?(He=t,t=function(e,t){return{type:"labeled",label:e[0],labelLocation:e[1],expression:t,location:We()}}(r,a)):(qe=t,t=n)):(qe=t,t=n),t===n&&(t=ut())),t}function it(){var t,r,o,a;return t=qe,(r=mt())!==n?(jt(),58===e.charCodeAt(qe)?(o=":",qe++):(o=n,0===ze&&tt(C)),o!==n?(He=t,a=r,Ft.indexOf(a[0])>=0&&Ve(`Label can't be a reserved word "${a[0]}"`,a[1]),t=a):(qe=t,t=n)):(qe=t,t=n),t}function ut(){var t,r,o,a;return t=qe,(r=function(){var t;return 36===e.charCodeAt(qe)?(t="$",qe++):(t=n,0===ze&&tt(k)),t===n&&(38===e.charCodeAt(qe)?(t="&",qe++):(t=n,0===ze&&tt(P)),t===n&&(33===e.charCodeAt(qe)?(t="!",qe++):(t=n,0===ze&&tt(O)))),t}())!==n?(jt(),(o=ct())!==n?(He=t,a=o,t={type:OPS_TO_PREFIXED_TYPES[r],expression:a,location:We()}):(qe=t,t=n)):(qe=t,t=n),t===n&&(t=ct()),t}function ct(){var t,r,o,a;return t=qe,(r=lt())!==n?(jt(),(o=function(){var t;return 63===e.charCodeAt(qe)?(t="?",qe++):(t=n,0===ze&&tt(I)),t===n&&(42===e.charCodeAt(qe)?(t="*",qe++):(t=n,0===ze&&tt(R)),t===n&&(43===e.charCodeAt(qe)?(t="+",qe++):(t=n,0===ze&&tt(j)))),t}())!==n?(He=t,a=r,t={type:OPS_TO_SUFFIXED_TYPES[o],expression:a,location:We()}):(qe=t,t=n)):(qe=t,t=n),t===n&&(t=lt()),t}function lt(){var t,r,o,a,s;return(t=function(){var t,r,o;return ze++,t=qe,(r=wt())!==n?(105===e.charCodeAt(qe)?(o="i",qe++):(o=n,0===ze&&tt(ie)),o===n&&(o=null),He=t,t={type:"literal",value:r,ignoreCase:null!==o,location:We()}):(qe=t,t=n),ze--,t===n&&(r=n,0===ze&&tt(se)),t}())===n&&(t=function(){var t,r,o,a,s,i,u,c;if(ze++,t=qe,91===e.charCodeAt(qe)?(r="[",qe++):(r=n,0===ze&&tt(fe)),r!==n){for(94===e.charCodeAt(qe)?(o="^",qe++):(o=n,0===ze&&tt(_e)),o===n&&(o=null),a=[],(s=xt())===n&&(s=St());s!==n;)a.push(s),(s=xt())===n&&(s=St());93===e.charCodeAt(qe)?(s="]",qe++):(s=n,0===ze&&tt(de)),s!==n?(105===e.charCodeAt(qe)?(i="i",qe++):(i=n,0===ze&&tt(ie)),i===n&&(i=null),He=t,u=o,c=i,t={type:"class",parts:a.filter(e=>""!==e),inverted:null!==u,ignoreCase:null!==c,location:We()}):(qe=t,t=n)}else qe=t,t=n;return ze--,t===n&&(r=n,0===ze&&tt(pe)),t}())===n&&(t=function(){var t,r;return t=qe,46===e.charCodeAt(qe)?(r=".",qe++):(r=n,0===ze&&tt(Ce)),r!==n&&(He=t,r={type:"any",location:We()}),r}())===n&&(t=function(){var t,r,o,a,s,i,u;return t=qe,(r=mt())!==n?(o=qe,ze++,a=qe,s=jt(),i=qe,(u=wt())!==n?i=u=[u,jt()]:(qe=i,i=n),i===n&&(i=null),61===e.charCodeAt(qe)?(u="=",qe++):(u=n,0===ze&&tt(x)),u!==n?a=s=[s,i,u]:(qe=a,a=n),ze--,a===n?o=void 0:(qe=o,o=n),o!==n?(He=t,t={type:"rule_ref",name:r[0],location:We()}):(qe=t,t=n)):(qe=t,t=n),t}())===n&&(t=function(){var t,r,o;return t=qe,(r=function(){var t;return 38===e.charCodeAt(qe)?(t="&",qe++):(t=n,0===ze&&tt(P)),t===n&&(33===e.charCodeAt(qe)?(t="!",qe++):(t=n,0===ze&&tt(O))),t}())!==n?(jt(),(o=Rt())!==n?(He=t,t=function(e,t){return{type:OPS_TO_SEMANTIC_PREDICATE_TYPES[e],code:t[0],codeLocation:t[1],location:We()}}(r,o)):(qe=t,t=n)):(qe=t,t=n),t}())===n&&(t=qe,40===e.charCodeAt(qe)?(r="(",qe++):(r=n,0===ze&&tt(T)),r!==n?(jt(),(o=ot())!==n?(jt(),41===e.charCodeAt(qe)?(a=")",qe++):(a=n,0===ze&&tt(F)),a!==n?(He=t,t="labeled"===(s=o).type||"sequence"===s.type?{type:"group",expression:s,location:We()}:s):(qe=t,t=n)):(qe=t,t=n)):(qe=t,t=n)),t}function pt(){var t;return e.length>qe?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(L)),t}function ft(){var t;return ze++,9===e.charCodeAt(qe)?(t="\t",qe++):(t=n,0===ze&&tt(N)),t===n&&(11===e.charCodeAt(qe)?(t="\v",qe++):(t=n,0===ze&&tt(B)),t===n&&(12===e.charCodeAt(qe)?(t="\f",qe++):(t=n,0===ze&&tt(U)),t===n&&(32===e.charCodeAt(qe)?(t=" ",qe++):(t=n,0===ze&&tt(M)),t===n&&(160===e.charCodeAt(qe)?(t="\xa0",qe++):(t=n,0===ze&&tt(q)),t===n&&(65279===e.charCodeAt(qe)?(t="\ufeff",qe++):(t=n,0===ze&&tt(H)),t===n&&(t=function(){var t;return w.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Ue)),t}())))))),ze--,t===n&&0===ze&&tt(D),t}function _t(){var t;return i.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(G)),t}function dt(){var t;return ze++,10===e.charCodeAt(qe)?(t="\n",qe++):(t=n,0===ze&&tt(K)),t===n&&("\r\n"===e.substr(qe,2)?(t="\r\n",qe+=2):(t=n,0===ze&&tt(z)),t===n&&(13===e.charCodeAt(qe)?(t="\r",qe++):(t=n,0===ze&&tt(W)),t===n&&(8232===e.charCodeAt(qe)?(t="\u2028",qe++):(t=n,0===ze&&tt(V)),t===n&&(8233===e.charCodeAt(qe)?(t="\u2029",qe++):(t=n,0===ze&&tt(X)))))),ze--,t===n&&0===ze&&tt(Y),t}function ht(){var t;return ze++,(t=function(){var t,r,o,a,s,i;if(t=qe,"/*"===e.substr(qe,2)?(r="/*",qe+=2):(r=n,0===ze&&tt(Q)),r!==n){for(o=[],a=qe,s=qe,ze++,"*/"===e.substr(qe,2)?(i="*/",qe+=2):(i=n,0===ze&&tt(Z)),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);a!==n;)o.push(a),a=qe,s=qe,ze++,"*/"===e.substr(qe,2)?(i="*/",qe+=2):(i=n,0===ze&&tt(Z)),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);"*/"===e.substr(qe,2)?(a="*/",qe+=2):(a=n,0===ze&&tt(Z)),a!==n?t=r=[r,o,a]:(qe=t,t=n)}else qe=t,t=n;return t}())===n&&(t=vt()),ze--,t===n&&0===ze&&tt(J),t}function yt(){var t,r,o,a,s,i;if(t=qe,"/*"===e.substr(qe,2)?(r="/*",qe+=2):(r=n,0===ze&&tt(Q)),r!==n){for(o=[],a=qe,s=qe,ze++,"*/"===e.substr(qe,2)?(i="*/",qe+=2):(i=n,0===ze&&tt(Z)),i===n&&(i=_t()),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);a!==n;)o.push(a),a=qe,s=qe,ze++,"*/"===e.substr(qe,2)?(i="*/",qe+=2):(i=n,0===ze&&tt(Z)),i===n&&(i=_t()),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);"*/"===e.substr(qe,2)?(a="*/",qe+=2):(a=n,0===ze&&tt(Z)),a!==n?t=r=[r,o,a]:(qe=t,t=n)}else qe=t,t=n;return t}function vt(){var t,r,o,a,s,i;if(t=qe,"//"===e.substr(qe,2)?(r="//",qe+=2):(r=n,0===ze&&tt(ee)),r!==n){for(o=[],a=qe,s=qe,ze++,i=_t(),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);a!==n;)o.push(a),a=qe,s=qe,ze++,i=_t(),ze--,i===n?s=void 0:(qe=s,s=n),s!==n&&(i=pt())!==n?a=s=[s,i]:(qe=a,a=n);t=r=[r,o]}else qe=t,t=n;return t}function mt(){var e,t,r,o;if(ze++,e=qe,(t=gt())!==n){for(r=[],o=bt();o!==n;)r.push(o),o=bt();He=e,e=[t+r.join(""),We()]}else qe=e,e=n;return ze--,e===n&&(t=n,0===ze&&tt(te)),e}function gt(){var t,r,o;return(t=function(){var t;return(t=function(){var t;return h.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Te)),t}())===n&&(t=function(){var t;return p.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Oe)),t}())===n&&(t=function(){var t;return d.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(je)),t}())===n&&(t=function(){var t;return f.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Ie)),t}())===n&&(t=function(){var t;return _.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Re)),t}())===n&&(t=function(){var t;return g.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Ne)),t}()),t}())===n&&(36===e.charCodeAt(qe)?(t="$",qe++):(t=n,0===ze&&tt(k)),t===n&&(95===e.charCodeAt(qe)?(t="_",qe++):(t=n,0===ze&&tt(re)),t===n&&(t=qe,92===e.charCodeAt(qe)?(r="\\",qe++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Pt())!==n?t=o:(qe=t,t=n)))),t}function bt(){var t;return(t=gt())===n&&(t=function(){var t;return(t=function(){var t;return v.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Le)),t}())===n&&(t=function(){var t;return y.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Fe)),t}()),t}())===n&&(t=function(){var t;return m.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(De)),t}())===n&&(t=function(){var t;return b.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Be)),t}())===n&&(8204===e.charCodeAt(qe)?(t="\u200c",qe++):(t=n,0===ze&&tt(oe)),t===n&&(8205===e.charCodeAt(qe)?(t="\u200d",qe++):(t=n,0===ze&&tt(ae)))),t}function wt(){var t,r,o,a;if(ze++,t=qe,34===e.charCodeAt(qe)?(r='"',qe++):(r=n,0===ze&&tt(ce)),r!==n){for(o=[],a=At();a!==n;)o.push(a),a=At();34===e.charCodeAt(qe)?(a='"',qe++):(a=n,0===ze&&tt(ce)),a!==n?(He=t,t=o.join("")):(qe=t,t=n)}else qe=t,t=n;if(t===n)if(t=qe,39===e.charCodeAt(qe)?(r="'",qe++):(r=n,0===ze&&tt(le)),r!==n){for(o=[],a=Et();a!==n;)o.push(a),a=Et();39===e.charCodeAt(qe)?(a="'",qe++):(a=n,0===ze&&tt(le)),a!==n?(He=t,t=function(e){return e.join("")}(o)):(qe=t,t=n)}else qe=t,t=n;return ze--,t===n&&(r=n,0===ze&&tt(ue)),t}function At(){var t,r,o,a;return t=qe,r=qe,o=qe,ze++,34===e.charCodeAt(qe)?(a='"',qe++):(a=n,0===ze&&tt(ce)),a===n&&(92===e.charCodeAt(qe)?(a="\\",qe++):(a=n,0===ze&&tt(ne)),a===n&&(a=_t())),ze--,a===n?o=void 0:(qe=o,o=n),o!==n&&(a=pt())!==n?r=o=[o,a]:(qe=r,r=n),(t=r!==n?e.substring(t,qe):r)===n&&(t=qe,92===e.charCodeAt(qe)?(r="\\",qe++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Ct())!==n?t=o:(qe=t,t=n),t===n&&(t=$t())),t}function Et(){var t,r,o,a;return t=qe,r=qe,o=qe,ze++,39===e.charCodeAt(qe)?(a="'",qe++):(a=n,0===ze&&tt(le)),a===n&&(92===e.charCodeAt(qe)?(a="\\",qe++):(a=n,0===ze&&tt(ne)),a===n&&(a=_t())),ze--,a===n?o=void 0:(qe=o,o=n),o!==n&&(a=pt())!==n?r=o=[o,a]:(qe=r,r=n),(t=r!==n?e.substring(t,qe):r)===n&&(t=qe,92===e.charCodeAt(qe)?(r="\\",qe++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Ct())!==n?t=o:(qe=t,t=n),t===n&&(t=$t())),t}function xt(){var t,r,o,a,s,i;return t=qe,(r=St())!==n?(45===e.charCodeAt(qe)?(o="-",qe++):(o=n,0===ze&&tt(he)),o!==n&&(a=St())!==n?(He=t,i=a,(s=r).charCodeAt(0)>i.charCodeAt(0)&&Ve("Invalid character range: "+e.substring(He,qe)+"."),t=[s,i]):(qe=t,t=n)):(qe=t,t=n),t}function St(){var t,r,o,a;return t=qe,r=qe,o=qe,ze++,93===e.charCodeAt(qe)?(a="]",qe++):(a=n,0===ze&&tt(de)),a===n&&(92===e.charCodeAt(qe)?(a="\\",qe++):(a=n,0===ze&&tt(ne)),a===n&&(a=_t())),ze--,a===n?o=void 0:(qe=o,o=n),o!==n&&(a=pt())!==n?r=o=[o,a]:(qe=r,r=n),(t=r!==n?e.substring(t,qe):r)===n&&(t=qe,92===e.charCodeAt(qe)?(r="\\",qe++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Ct())!==n?t=o:(qe=t,t=n),t===n&&(t=$t())),t}function $t(){var t,r;return t=qe,92===e.charCodeAt(qe)?(r="\\",qe++):(r=n,0===ze&&tt(ne)),r!==n&&dt()!==n?(He=t,t=""):(qe=t,t=n),t}function Ct(){var t,r,o,a;return(t=function(){var t;return(t=kt())===n&&(t=function(){var t,r,o,a;return t=qe,r=qe,o=qe,ze++,(a=function(){var t;return(t=kt())===n&&(t=Ot())===n&&(120===e.charCodeAt(qe)?(t="x",qe++):(t=n,0===ze&&tt(Ee)),t===n&&(117===e.charCodeAt(qe)?(t="u",qe++):(t=n,0===ze&&tt(xe)))),t}())===n&&(a=_t()),ze--,a===n?o=void 0:(qe=o,o=n),o!==n&&(a=pt())!==n?r=o=[o,a]:(qe=r,r=n),r!==n?e.substring(t,qe):r}()),t}())===n&&(t=qe,48===e.charCodeAt(qe)?(r="0",qe++):(r=n,0===ze&&tt(ye)),r!==n?(o=qe,ze++,a=Ot(),ze--,a===n?o=void 0:(qe=o,o=n),o!==n?(He=t,t="\0"):(qe=t,t=n)):(qe=t,t=n),t===n&&(t=function(){var t,r,o,a,s,i,u;return t=qe,120===e.charCodeAt(qe)?(r="x",qe++):(r=n,0===ze&&tt(Ee)),r!==n?(o=qe,a=qe,(s=It())!==n&&(i=It())!==n?a=s=[s,i]:(qe=a,a=n),(o=a!==n?e.substring(o,qe):a)!==n?(He=t,u=o,t=String.fromCharCode(parseInt(u,16))):(qe=t,t=n)):(qe=t,t=n),t}())===n&&(t=Pt())),t}function kt(){var t,r;return 39===e.charCodeAt(qe)?(t="'",qe++):(t=n,0===ze&&tt(le)),t===n&&(34===e.charCodeAt(qe)?(t='"',qe++):(t=n,0===ze&&tt(ce)),t===n&&(92===e.charCodeAt(qe)?(t="\\",qe++):(t=n,0===ze&&tt(ne)),t===n&&(t=qe,98===e.charCodeAt(qe)?(r="b",qe++):(r=n,0===ze&&tt(ve)),r!==n&&(He=t,r="\b"),(t=r)===n&&(t=qe,102===e.charCodeAt(qe)?(r="f",qe++):(r=n,0===ze&&tt(me)),r!==n&&(He=t,r="\f"),(t=r)===n&&(t=qe,110===e.charCodeAt(qe)?(r="n",qe++):(r=n,0===ze&&tt(ge)),r!==n&&(He=t,r="\n"),(t=r)===n&&(t=qe,114===e.charCodeAt(qe)?(r="r",qe++):(r=n,0===ze&&tt(be)),r!==n&&(He=t,r="\r"),(t=r)===n&&(t=qe,116===e.charCodeAt(qe)?(r="t",qe++):(r=n,0===ze&&tt(we)),r!==n&&(He=t,r="\t"),(t=r)===n&&(t=qe,118===e.charCodeAt(qe)?(r="v",qe++):(r=n,0===ze&&tt(Ae)),r!==n&&(He=t,r="\v"),t=r)))))))),t}function Pt(){var t,r,o,a,s,i,u,c,l;return t=qe,117===e.charCodeAt(qe)?(r="u",qe++):(r=n,0===ze&&tt(xe)),r!==n?(o=qe,a=qe,(s=It())!==n&&(i=It())!==n&&(u=It())!==n&&(c=It())!==n?a=s=[s,i,u,c]:(qe=a,a=n),(o=a!==n?e.substring(o,qe):a)!==n?(He=t,l=o,t=String.fromCharCode(parseInt(l,16))):(qe=t,t=n)):(qe=t,t=n),t}function Ot(){var t;return u.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt(Se)),t}function It(){var t;return c.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=n,0===ze&&tt($e)),t}function Rt(){var t,r,o,a;return ze++,t=qe,123===e.charCodeAt(qe)?(r="{",qe++):(r=n,0===ze&&tt(A)),r!==n?(o=function(){var t,r;return t=qe,r=function t(){var r,o,a,s,i,u;if(r=qe,o=[],a=[],s=qe,i=qe,ze++,l.test(e.charAt(qe))?(u=e.charAt(qe),qe++):(u=n,0===ze&&tt(Pe)),ze--,u===n?i=void 0:(qe=i,i=n),i!==n&&(u=pt())!==n?s=i=[i,u]:(qe=s,s=n),s!==n)for(;s!==n;)a.push(s),s=qe,i=qe,ze++,l.test(e.charAt(qe))?(u=e.charAt(qe),qe++):(u=n,0===ze&&tt(Pe)),ze--,u===n?i=void 0:(qe=i,i=n),i!==n&&(u=pt())!==n?s=i=[i,u]:(qe=s,s=n);else a=n;for(a===n&&(a=qe,123===e.charCodeAt(qe)?(s="{",qe++):(s=n,0===ze&&tt(A)),s!==n?(i=t(),125===e.charCodeAt(qe)?(u="}",qe++):(u=n,0===ze&&tt(E)),u!==n?a=s=[s,i,u]:(qe=a,a=n)):(qe=a,a=n));a!==n;){if(o.push(a),a=[],s=qe,i=qe,ze++,l.test(e.charAt(qe))?(u=e.charAt(qe),qe++):(u=n,0===ze&&tt(Pe)),ze--,u===n?i=void 0:(qe=i,i=n),i!==n&&(u=pt())!==n?s=i=[i,u]:(qe=s,s=n),s!==n)for(;s!==n;)a.push(s),s=qe,i=qe,ze++,l.test(e.charAt(qe))?(u=e.charAt(qe),qe++):(u=n,0===ze&&tt(Pe)),ze--,u===n?i=void 0:(qe=i,i=n),i!==n&&(u=pt())!==n?s=i=[i,u]:(qe=s,s=n);else a=n;a===n&&(a=qe,123===e.charCodeAt(qe)?(s="{",qe++):(s=n,0===ze&&tt(A)),s!==n?(i=t(),125===e.charCodeAt(qe)?(u="}",qe++):(u=n,0===ze&&tt(E)),u!==n?a=s=[s,i,u]:(qe=a,a=n)):(qe=a,a=n))}return e.substring(r,qe)}(),He=t,r=function(e){return[e,We()]}(r)}(),125===e.charCodeAt(qe)?(a="}",qe++):(a=n,0===ze&&tt(E)),a!==n?t=o:(qe=t,t=n)):(qe=t,t=n),ze--,t===n&&(r=n,0===ze&&tt(ke)),t}function jt(){var e,t;for(e=[],(t=ft())===n&&(t=dt())===n&&(t=ht());t!==n;)e.push(t),(t=ft())===n&&(t=dt())===n&&(t=ht());return e}function Tt(){var t,r,o,a;return t=qe,r=jt(),59===e.charCodeAt(qe)?(o=";",qe++):(o=n,0===ze&&tt(Me)),o!==n?t=r=[r,o]:(qe=t,t=n),t===n&&(t=qe,r=function(){var e,t;for(e=[],(t=ft())===n&&(t=yt());t!==n;)e.push(t),(t=ft())===n&&(t=yt());return e}(),(o=vt())===n&&(o=null),(a=dt())!==n?t=r=[r,o,a]:(qe=t,t=n),t===n&&(t=qe,r=jt(),(o=function(){var t,r;return t=qe,ze++,e.length>qe?(r=e.charAt(qe),qe++):(r=n,0===ze&&tt(L)),ze--,r===n?t=void 0:(qe=t,t=n),t}())!==n?t=r=[r,o]:(qe=t,t=n))),t}const Ft=t.reservedWords||[];if((r=s())!==n&&qe===e.length)return r;throw r!==n&&qe<e.length&&tt({type:"end"}),function(e,t,r){return new peg$SyntaxError(peg$SyntaxError.buildMessage(e,t),e,t,r)}(Ke,Ye<e.length?e.charAt(Ye):null,Ye<e.length?et(Ye,Ye+1):et(Ye,Ye))}};const peg={VERSION:_$version_56,RESERVED_WORDS:["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],GrammarError:_$GrammarError_53,parser:_$parser_54,compiler:_$compiler_37,generate(e,t){const r="plugins"in(t=void 0!==t?t:{})?t.plugins:[],n={parser:peg.parser,passes:function(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r].slice()}),t}(peg.compiler.passes),reservedWords:peg.RESERVED_WORDS.slice()};return r.forEach(e=>{e.use(n,t)}),peg.compiler.compile(n.parser.parse(e,{grammarSource:t.grammarSource,reservedWords:n.reservedWords}),n.passes,t)}};var _$peg_55=peg,_$surge_73={};function ___typeof_73(e){return(___typeof_73="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$surge_73,"__esModule",{value:!0}),_$surge_73.default=function(){return __parser_73||(__parser_73=peggy.generate(grammars)),__parser_73};var _templateObject,peggy=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_73(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(_$peg_55);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}var strings,raw,__parser_73,grammars=String.raw(_templateObject||(strings=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleWebsocket() {\n        if (obfs.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers", obfs[\'ws-headers\']);\n            if (proxy[\'ws-opts\'] && proxy[\'ws-opts\'][\'headers\'] && proxy[\'ws-opts\'][\'headers\'].Host) {\n                proxy[\'ws-opts\'][\'headers\'].Host = proxy[\'ws-opts\'][\'headers\'].Host.replace(/^"(.*)"$/, \'$1\')\n            }\n        }\n    }\n    function handleShadowTLS() {\n        if (proxy[\'shadow-tls-password\'] && !proxy[\'shadow-tls-version\']) {\n            proxy[\'shadow-tls-version\'] = 2;\n        }\n    }\n}\n\nstart = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh) {\n    return proxy;\n}\n\nshadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ss";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\nvmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleWebsocket();\n    handleShadowTLS();\n}\ntrojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "trojan";\n    handleWebsocket();\n    handleShadowTLS();\n}\nhttps = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n    handleShadowTLS();\n}\nhttp = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    handleShadowTLS();\n}\nssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ssh";\n    handleShadowTLS();\n}\nsnell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "snell";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        $set(proxy, "obfs-opts.mode", obfs.type);\n        $set(proxy, "obfs-opts.host", obfs.host);\n        $set(proxy, "obfs-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\ntuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "tuic";\n    handleShadowTLS();\n}\ntuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "tuic";\n    proxy.version = 5;\n    handleShadowTLS();\n}\nwireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "wireguard-surge";\n    handleShadowTLS();\n}\nhysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "hysteria2";\n    handleShadowTLS();\n}\nsocks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    handleShadowTLS();\n}\nsocks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    proxy.tls = true;\n    handleShadowTLS();\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma match:[^,]+ { proxy.password = match.join(""); }\n\ntls = comma "tls" equals flag:bool { proxy.tls = flag; }\nsni = comma "sni" equals sni:("off"/domain) { \n    if (sni === "off") {\n        proxy["disable-sni"] = true;\n    } else {\n        proxy.sni = sni;\n    }\n}\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\n\nsnell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }\nsnell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }\n\nusernamek = comma "username" equals match:[^,]+ { proxy.username = match.join(""); }\npasswordk = comma "password" equals match:[^,]+ { proxy.password = match.join(""); }\nvmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }\nvmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }\n\nmethod = comma "encrypt-method" equals cipher:cipher {\n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305");\n\nws = comma "ws" equals flag:bool { obfs.type = "ws"; }\nws_headers = comma "ws-headers" equals headers:$[^,]+ {\n    const pairs = headers.split("|");\n    const result = {};\n    pairs.forEach(pair => {\n        const [key, value] = pair.trim().split(":");\n        result[key.trim()] = value.trim();\n    })\n    obfs["ws-headers"] = result;\n}\nws_path = comma "ws-path" equals path:uri { obfs.path = path; }\n\nobfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };\nobfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }\nuri = $[^,]+\n\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nreuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ntfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }\nip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }\nsection_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }\nno_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }\nunderlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\ntest_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }\ntest_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }\ntest_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }\ntos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }\ninterface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }\nallow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }\nhybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }\nidle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }\nprivate_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nserver_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nblock_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }\nshadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }\nshadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }\nshadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }\ntoken = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }\nalpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }\nuuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'],(raw=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleWebsocket() {\n        if (obfs.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers", obfs[\'ws-headers\']);\n            if (proxy[\'ws-opts\'] && proxy[\'ws-opts\'][\'headers\'] && proxy[\'ws-opts\'][\'headers\'].Host) {\n                proxy[\'ws-opts\'][\'headers\'].Host = proxy[\'ws-opts\'][\'headers\'].Host.replace(/^"(.*)"$/, \'$1\')\n            }\n        }\n    }\n    function handleShadowTLS() {\n        if (proxy[\'shadow-tls-password\'] && !proxy[\'shadow-tls-version\']) {\n            proxy[\'shadow-tls-version\'] = 2;\n        }\n    }\n}\n\nstart = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh) {\n    return proxy;\n}\n\nshadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ss";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\nvmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleWebsocket();\n    handleShadowTLS();\n}\ntrojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "trojan";\n    handleWebsocket();\n    handleShadowTLS();\n}\nhttps = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n    handleShadowTLS();\n}\nhttp = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    handleShadowTLS();\n}\nssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ssh";\n    handleShadowTLS();\n}\nsnell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "snell";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        $set(proxy, "obfs-opts.mode", obfs.type);\n        $set(proxy, "obfs-opts.host", obfs.host);\n        $set(proxy, "obfs-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\ntuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "tuic";\n    handleShadowTLS();\n}\ntuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "tuic";\n    proxy.version = 5;\n    handleShadowTLS();\n}\nwireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "wireguard-surge";\n    handleShadowTLS();\n}\nhysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "hysteria2";\n    handleShadowTLS();\n}\nsocks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    handleShadowTLS();\n}\nsocks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    proxy.tls = true;\n    handleShadowTLS();\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma match:[^,]+ { proxy.password = match.join(""); }\n\ntls = comma "tls" equals flag:bool { proxy.tls = flag; }\nsni = comma "sni" equals sni:("off"/domain) { \n    if (sni === "off") {\n        proxy["disable-sni"] = true;\n    } else {\n        proxy.sni = sni;\n    }\n}\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\n\nsnell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }\nsnell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }\n\nusernamek = comma "username" equals match:[^,]+ { proxy.username = match.join(""); }\npasswordk = comma "password" equals match:[^,]+ { proxy.password = match.join(""); }\nvmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }\nvmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }\n\nmethod = comma "encrypt-method" equals cipher:cipher {\n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305");\n\nws = comma "ws" equals flag:bool { obfs.type = "ws"; }\nws_headers = comma "ws-headers" equals headers:$[^,]+ {\n    const pairs = headers.split("|");\n    const result = {};\n    pairs.forEach(pair => {\n        const [key, value] = pair.trim().split(":");\n        result[key.trim()] = value.trim();\n    })\n    obfs["ws-headers"] = result;\n}\nws_path = comma "ws-path" equals path:uri { obfs.path = path; }\n\nobfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };\nobfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }\nuri = $[^,]+\n\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nreuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ntfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }\nip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }\nsection_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }\nno_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }\nunderlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\ntest_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }\ntest_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }\ntest_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }\ntos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }\ninterface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }\nallow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }\nhybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }\nidle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }\nprivate_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nserver_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nblock_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }\nshadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }\nshadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }\nshadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }\ntoken = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }\nalpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }\nuuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'])||(raw=strings.slice(0)),_templateObject=Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}})))),_$loon_71={};function ___typeof_71(e){return(___typeof_71="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$loon_71,"__esModule",{value:!0}),_$loon_71.default=function(){return __parser_71||(__parser_71=__peggy_71.generate(__grammars_71)),__parser_71};var ___templateObject_71,__peggy_71=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_71(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_71(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(_$peg_55);function ___getRequireWildcardCache_71(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_71=function(e){return e?r:t})(e)}var __strings_71,__raw_71,__parser_71,__grammars_71=String.raw(___templateObject_71||(__strings_71=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const transport = {};\n    const $ = {};\n\n    function handleTransport() {\n        if (transport.type === "tcp") { /* do nothing */ }\n        else if (transport.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", transport.path);\n            $set(proxy, "ws-opts.headers.Host", transport.host);\n        } else if (transport.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", transport.path);\n            $set(proxy, "http-opts.headers.Host", transport.host);\n        }\n    }\n}\n\nstart = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {\n    return proxy;\n}\n\nshadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/others)*{\n    proxy.type = "ssr";\n    // handle ssr obfs\n    proxy.obfs = obfs.type;\n}\nshadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/others)* {\n    proxy.type = "ss";\n    // handle ss obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n}\nvmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/vmess_alterId/fast_open/udp_relay/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    proxy.alterId = proxy.alterId || 0;\n    handleTransport();\n}\nvless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "vless";\n    handleTransport();\n}\ntrojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "trojan";\n    handleTransport();\n}\nhysteria2 = tag equals "hysteria2"i address password (tls_host/tls_verification/udp_relay/fast_open/download_bandwidth/ecn/others)* {\n    proxy.type = "hysteria2";\n}\nhttps = tag equals "https"i address (username password)? (tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n}\nhttp = tag equals "http"i address (username password)? (fast_open/udp_relay/others)* {\n    proxy.type = "http";\n}\nsocks5 = tag equals "socks5"i address (username password)? (over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "socks5";\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n    throw new Error("Invalid domain: " + domain);\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n    throw new Error("Invalid port number: " + port);\n}\n\nmethod = comma cipher:cipher { \n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305");\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma \'"\' match:[^"]* \'"\' { proxy.password = match.join(""); }\nuuid = comma \'"\' match:[^"]+ \'"\' { proxy.uuid = match.join(""); }\n\nobfs_typev = comma type:("http"/"tls") { obfs.type = type; }\nobfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }\n\nobfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }\n\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }\nobfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\nuri = $[^,]+\n\ntransport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }\ntransport_host = comma "host" equals host:domain { transport.host = host; }\ntransport_path = comma "path" equals path:uri { transport.path = path; }\n\nssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }\nssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nvmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } \n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma sni:("tls-name"/"sni") equals host:domain { proxy.sni = host; }\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\n\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\n\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'],(__raw_71=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const transport = {};\n    const $ = {};\n\n    function handleTransport() {\n        if (transport.type === "tcp") { /* do nothing */ }\n        else if (transport.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", transport.path);\n            $set(proxy, "ws-opts.headers.Host", transport.host);\n        } else if (transport.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", transport.path);\n            $set(proxy, "http-opts.headers.Host", transport.host);\n        }\n    }\n}\n\nstart = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {\n    return proxy;\n}\n\nshadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/others)*{\n    proxy.type = "ssr";\n    // handle ssr obfs\n    proxy.obfs = obfs.type;\n}\nshadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/others)* {\n    proxy.type = "ss";\n    // handle ss obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n}\nvmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/vmess_alterId/fast_open/udp_relay/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    proxy.alterId = proxy.alterId || 0;\n    handleTransport();\n}\nvless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "vless";\n    handleTransport();\n}\ntrojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "trojan";\n    handleTransport();\n}\nhysteria2 = tag equals "hysteria2"i address password (tls_host/tls_verification/udp_relay/fast_open/download_bandwidth/ecn/others)* {\n    proxy.type = "hysteria2";\n}\nhttps = tag equals "https"i address (username password)? (tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n}\nhttp = tag equals "http"i address (username password)? (fast_open/udp_relay/others)* {\n    proxy.type = "http";\n}\nsocks5 = tag equals "socks5"i address (username password)? (over_tls/tls_host/tls_verification/fast_open/udp_relay/others)* {\n    proxy.type = "socks5";\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n    throw new Error("Invalid domain: " + domain);\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n    throw new Error("Invalid port number: " + port);\n}\n\nmethod = comma cipher:cipher { \n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305");\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma \'"\' match:[^"]* \'"\' { proxy.password = match.join(""); }\nuuid = comma \'"\' match:[^"]+ \'"\' { proxy.uuid = match.join(""); }\n\nobfs_typev = comma type:("http"/"tls") { obfs.type = type; }\nobfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }\n\nobfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }\n\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }\nobfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\nuri = $[^,]+\n\ntransport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }\ntransport_host = comma "host" equals host:domain { transport.host = host; }\ntransport_path = comma "path" equals path:uri { transport.path = path; }\n\nssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }\nssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nvmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } \n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma sni:("tls-name"/"sni") equals host:domain { proxy.sni = host; }\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\n\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\n\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'])||(__raw_71=__strings_71.slice(0)),___templateObject_71=Object.freeze(Object.defineProperties(__strings_71,{raw:{value:Object.freeze(__raw_71)}})))),_$qx_72={};function ___typeof_72(e){return(___typeof_72="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$qx_72,"__esModule",{value:!0}),_$qx_72.default=function(){return __parser_72||(__parser_72=__peggy_72.generate(__grammars_72)),__parser_72};var ___templateObject_72,__peggy_72=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_72(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_72(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(_$peg_55);function ___getRequireWildcardCache_72(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_72=function(e){return e?r:t})(e)}var __strings_72,__raw_72,__parser_72,__grammars_72=String.raw(___templateObject_72||(__strings_72=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parse initializer\n{\n\tconst proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleObfs() {\n        if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.network = "ws";\n            if (obfs.type === \'wss\') {\n                proxy.tls = true;\n            }\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers.Host", obfs.host);\n        } else if (obfs.type === "over-tls") {\n            proxy.tls = true;\n        } else if (obfs.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", obfs.path);\n            $set(proxy, "http-opts.headers.Host", obfs.host);\n        }\n    }\n}\n\nstart = (trojan/shadowsocks/vmess/vless/http/socks5) {\n    return proxy\n}\n\ntrojan = "trojan" equals address\n    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {\n    proxy.type = "trojan";\n    handleObfs();\n}\n\nshadowsocks = "shadowsocks" equals address\n    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp/fast_open/tag/server_check_url/others)* {\n    if (proxy.protocol) {\n        proxy.type = "ssr";\n        // handle ssr obfs\n        if (obfs.host) proxy["obfs-param"] = obfs.host;\n        if (obfs.type) proxy.obfs = obfs.type;\n    } else {\n        proxy.type = "ss";\n        // handle ss obfs\n        if (obfs.type == "http" || obfs.type === "tls") {\n            proxy.plugin = "obfs";\n            $set(proxy, "plugin-opts", {\n                mode: obfs.type\n            });\n        } else if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.plugin = "v2ray-plugin";\n            $set(proxy, "plugin-opts.mode", "websocket");\n            if (obfs.type === "wss") {\n                $set(proxy, "plugin-opts.tls", true);\n            }\n        } else if (obfs.type === \'over-tls\') {\n            throw new Error(\'ss over-tls is not supported\');\n        }\n        if (obfs.type) {\n            $set(proxy, "plugin-opts.host", obfs.host);\n            $set(proxy, "plugin-opts.path", obfs.path);\n        }\n    }\n}\n\nvmess = "vmess" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleObfs();\n}\n\nvless = "vless" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vless";\n    proxy.cipher = proxy.cipher || "none";\n    handleObfs();\n}\n\nhttp = "http" equals address \n    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{\n    proxy.type = "http";\n}\n\nsocks5 = "socks5" equals address\n    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {\n    proxy.type = "socks5";\n}\n    \naddress = server:server ":" port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\nserver = ip/domain\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nip = & {\n    const start = peg$currPos;\n    let end;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        if (input[j] === ":") end = j;\n        j++;\n    }\n    peg$currPos = end || j;\n    $.ip = input.substring(start, end).trim();\n    return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = comma "username" equals username:[^=,]+ { proxy.username = username.join("").trim(); }\npassword = comma "password" equals password:[^=,]+ { proxy.password = password.join("").trim(); }\nuuid = comma "password" equals uuid:[^=,]+ { proxy.uuid = uuid.join("").trim(); }\n\nmethod = comma "method" equals cipher:cipher { \n    proxy.cipher = cipher;\n};\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305");\naead = comma "aead" equals flag:bool { proxy.aead = flag; }\n\nudp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }\nudp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }\ntls_verification = comma "tls-verification" equals flag:bool { \n    proxy["skip-cert-verify"] = !flag;\n}\ntls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }\ntls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }\ntls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { \n    proxy["tls-no-session-ticket"] = flag;\n}\ntls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { \n    proxy["tls-no-session-reuse"] = flag;\n}\n\nobfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; return type; }\nobfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\n\nssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }\nssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nserver_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }\n\nuri = $[^,]+\n\ntag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }\nothers = comma [^=,]+ equals [^=,]+\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\n'],(__raw_72=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parse initializer\n{\n\tconst proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleObfs() {\n        if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.network = "ws";\n            if (obfs.type === \'wss\') {\n                proxy.tls = true;\n            }\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers.Host", obfs.host);\n        } else if (obfs.type === "over-tls") {\n            proxy.tls = true;\n        } else if (obfs.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", obfs.path);\n            $set(proxy, "http-opts.headers.Host", obfs.host);\n        }\n    }\n}\n\nstart = (trojan/shadowsocks/vmess/vless/http/socks5) {\n    return proxy\n}\n\ntrojan = "trojan" equals address\n    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {\n    proxy.type = "trojan";\n    handleObfs();\n}\n\nshadowsocks = "shadowsocks" equals address\n    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp/fast_open/tag/server_check_url/others)* {\n    if (proxy.protocol) {\n        proxy.type = "ssr";\n        // handle ssr obfs\n        if (obfs.host) proxy["obfs-param"] = obfs.host;\n        if (obfs.type) proxy.obfs = obfs.type;\n    } else {\n        proxy.type = "ss";\n        // handle ss obfs\n        if (obfs.type == "http" || obfs.type === "tls") {\n            proxy.plugin = "obfs";\n            $set(proxy, "plugin-opts", {\n                mode: obfs.type\n            });\n        } else if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.plugin = "v2ray-plugin";\n            $set(proxy, "plugin-opts.mode", "websocket");\n            if (obfs.type === "wss") {\n                $set(proxy, "plugin-opts.tls", true);\n            }\n        } else if (obfs.type === \'over-tls\') {\n            throw new Error(\'ss over-tls is not supported\');\n        }\n        if (obfs.type) {\n            $set(proxy, "plugin-opts.host", obfs.host);\n            $set(proxy, "plugin-opts.path", obfs.path);\n        }\n    }\n}\n\nvmess = "vmess" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleObfs();\n}\n\nvless = "vless" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vless";\n    proxy.cipher = proxy.cipher || "none";\n    handleObfs();\n}\n\nhttp = "http" equals address \n    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{\n    proxy.type = "http";\n}\n\nsocks5 = "socks5" equals address\n    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {\n    proxy.type = "socks5";\n}\n    \naddress = server:server ":" port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\nserver = ip/domain\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nip = & {\n    const start = peg$currPos;\n    let end;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        if (input[j] === ":") end = j;\n        j++;\n    }\n    peg$currPos = end || j;\n    $.ip = input.substring(start, end).trim();\n    return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = comma "username" equals username:[^=,]+ { proxy.username = username.join("").trim(); }\npassword = comma "password" equals password:[^=,]+ { proxy.password = password.join("").trim(); }\nuuid = comma "password" equals uuid:[^=,]+ { proxy.uuid = uuid.join("").trim(); }\n\nmethod = comma "method" equals cipher:cipher { \n    proxy.cipher = cipher;\n};\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305");\naead = comma "aead" equals flag:bool { proxy.aead = flag; }\n\nudp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }\nudp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }\ntls_verification = comma "tls-verification" equals flag:bool { \n    proxy["skip-cert-verify"] = !flag;\n}\ntls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }\ntls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }\ntls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { \n    proxy["tls-no-session-ticket"] = flag;\n}\ntls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { \n    proxy["tls-no-session-reuse"] = flag;\n}\n\nobfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; return type; }\nobfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\n\nssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }\nssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nserver_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }\n\nuri = $[^,]+\n\ntag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }\nothers = comma [^=,]+ equals [^=,]+\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\n'])||(__raw_72=__strings_72.slice(0)),___templateObject_72=Object.freeze(Object.defineProperties(__strings_72,{raw:{value:Object.freeze(__raw_72)}})))),_$trojanUri_74={};function ___typeof_74(e){return(___typeof_74="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$trojanUri_74,"__esModule",{value:!0}),_$trojanUri_74.default=function(){return __parser_74||(__parser_74=__peggy_74.generate(__grammars_74)),__parser_74};var ___templateObject_74,__peggy_74=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_74(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_74(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(_$peg_55);function ___getRequireWildcardCache_74(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_74=function(e){return e?r:t})(e)}var __strings_74,__raw_74,__parser_74,__grammars_74=String.raw(___templateObject_74||(__strings_74=['\n// global initializer\n{{\n  function $set(obj, path, value) {\n    if (Object(obj) !== obj) return obj;\n    if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n    path\n      .slice(0, -1)\n      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n      path[path.length - 1]\n    ] = value;\n    return obj;\n  }\n\n  function toBool(str) {\n    if (typeof str === \'undefined\' || str === null) return undefined;\n    return /(TRUE)|1/i.test(str);\n  }\n}}\n\n{\n  const proxy = {};\n  const obfs = {};\n  const $ = {};\n  const params = {};\n}\n\nstart = (trojan) {\n  return proxy\n}\n\ntrojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{\n  proxy.type = "trojan";\n  proxy.password = password;\n  proxy.server = server;\n  proxy.port = port;\n  proxy.name = name;\n\n  // name may be empty\n  if (!proxy.name) {\n    proxy.name = server + ":" + port;\n  }\n};\n\npassword = match:$[^@]+ {\n  return decodeURIComponent(match);\n};\n\nserver = ip/domain;\n\ndomain = match:[0-9a-zA-z-_.]+ { \n  const domain = match.join(""); \n  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n    return domain;\n  }\n}\n\nip = & {\n  const start = peg$currPos;\n  let end;\n  let j = start;\n  while (j < input.length) {\n    if (input[j] === ",") break;\n    if (input[j] === ":") end = j;\n    j++;\n  }\n  peg$currPos = end || j;\n  $.ip = input.substring(start, end).trim();\n  return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n  const port = parseInt(digits.join(""), 10); \n  if (port >= 0 && port <= 65535) {\n    return port;\n  } else {\n    throw new Error("Invalid port: " + port);\n  }\n}\n\nparams = "?" head:param tail:("&"@param)* {\n  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);\n  proxy.sni = params["sni"] || params["peer"];\n\n  if (toBool(params["ws"])) {\n    proxy.network = "ws";\n    $set(proxy, "ws-opts.path", params["wspath"]);\n  }\n  \n  if (params["type"]) {\n    proxy.network = params["type"]\n    if ([\'grpc\'].includes(proxy.network)) {\n        proxy[proxy.network + \'-opts\'] = {\n            \'grpc-service-name\': params["serviceName"],\n            \'_grpc-type\': params["mode"],\n        };\n    } else {\n      if (params["path"]) {\n        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  \n      }\n      if (params["host"]) {\n        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); \n      }\n    }\n  }\n\n  proxy.udp = toBool(params["udp"]);\n  proxy.tfo = toBool(params["tfo"]);\n}\n\nparam = kv/single;\n\nkv = key:$[a-z]i+ "=" value:$[^&#]i* {\n  params[key] = value;\n}\n\nsingle = key:$[a-z]i+ {\n  params[key] = true;\n};\n\nname = "#" + match:$.* {\n  return decodeURIComponent(match);\n}\n'],(__raw_74=['\n// global initializer\n{{\n  function $set(obj, path, value) {\n    if (Object(obj) !== obj) return obj;\n    if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n    path\n      .slice(0, -1)\n      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n      path[path.length - 1]\n    ] = value;\n    return obj;\n  }\n\n  function toBool(str) {\n    if (typeof str === \'undefined\' || str === null) return undefined;\n    return /(TRUE)|1/i.test(str);\n  }\n}}\n\n{\n  const proxy = {};\n  const obfs = {};\n  const $ = {};\n  const params = {};\n}\n\nstart = (trojan) {\n  return proxy\n}\n\ntrojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{\n  proxy.type = "trojan";\n  proxy.password = password;\n  proxy.server = server;\n  proxy.port = port;\n  proxy.name = name;\n\n  // name may be empty\n  if (!proxy.name) {\n    proxy.name = server + ":" + port;\n  }\n};\n\npassword = match:$[^@]+ {\n  return decodeURIComponent(match);\n};\n\nserver = ip/domain;\n\ndomain = match:[0-9a-zA-z-_.]+ { \n  const domain = match.join(""); \n  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n    return domain;\n  }\n}\n\nip = & {\n  const start = peg$currPos;\n  let end;\n  let j = start;\n  while (j < input.length) {\n    if (input[j] === ",") break;\n    if (input[j] === ":") end = j;\n    j++;\n  }\n  peg$currPos = end || j;\n  $.ip = input.substring(start, end).trim();\n  return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n  const port = parseInt(digits.join(""), 10); \n  if (port >= 0 && port <= 65535) {\n    return port;\n  } else {\n    throw new Error("Invalid port: " + port);\n  }\n}\n\nparams = "?" head:param tail:("&"@param)* {\n  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);\n  proxy.sni = params["sni"] || params["peer"];\n\n  if (toBool(params["ws"])) {\n    proxy.network = "ws";\n    $set(proxy, "ws-opts.path", params["wspath"]);\n  }\n  \n  if (params["type"]) {\n    proxy.network = params["type"]\n    if ([\'grpc\'].includes(proxy.network)) {\n        proxy[proxy.network + \'-opts\'] = {\n            \'grpc-service-name\': params["serviceName"],\n            \'_grpc-type\': params["mode"],\n        };\n    } else {\n      if (params["path"]) {\n        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  \n      }\n      if (params["host"]) {\n        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); \n      }\n    }\n  }\n\n  proxy.udp = toBool(params["udp"]);\n  proxy.tfo = toBool(params["tfo"]);\n}\n\nparam = kv/single;\n\nkv = key:$[a-z]i+ "=" value:$[^&#]i* {\n  params[key] = value;\n}\n\nsingle = key:$[a-z]i+ {\n  params[key] = true;\n};\n\nname = "#" + match:$.* {\n  return decodeURIComponent(match);\n}\n'])||(__raw_74=__strings_74.slice(0)),___templateObject_74=Object.freeze(Object.defineProperties(__strings_74,{raw:{value:Object.freeze(__raw_74)}})))),_$parsers_70={};Object.defineProperty(_$parsers_70,"__esModule",{value:!0}),_$parsers_70.default=void 0;var ___surge_70=___interopRequireDefault_70(_$surge_73),___loon_70=___interopRequireDefault_70(_$loon_71),___qx_70=___interopRequireDefault_70(_$qx_72),_trojanUri=___interopRequireDefault_70(_$trojanUri_74);function ___interopRequireDefault_70(e){return e&&e.__esModule?e:{default:e}}function __ownKeys_70(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_70(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_70(Object(r),!0).forEach((function(t){___defineProperty_70(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_70(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_70(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___slicedToArray_70(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){i=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||___unsupportedIterableToArray_70(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___createForOfIteratorHelper_70(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_70(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___unsupportedIterableToArray_70(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_70(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_70(e,t):void 0}}function ___arrayLikeToArray_70(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __isIP_70(e){return(0,_$utils_114.isIPv4)(e)||(0,_$utils_114.isIPv6)(e)}var ___default_70=[{name:"URI SS Parser",test:function(e){return/^ss:\/\//.test(e)},parse:function(e){var t,r=e.split("ss://")[1],n={name:decodeURIComponent(e.split("#")[1]),type:"ss"},o=(r=r.split("#")[0]).match(/@([^/]*)(\/|$)/),a=_$base64_4.Base64.decode(r.split("@")[0]),s="";if(!o){if(r.includes("?")){var i=r.match(/^(.*)(\?.*)$/);r=i[1],s=i[2]}if(r=_$base64_4.Base64.decode(r),s){if(/(&|\?)v2ray-plugin=/.test(s)){var u=s.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];u&&(n.plugin="v2ray-plugin",n["plugin-opts"]=JSON.parse(_$base64_4.Base64.decode(u)))}r="".concat(r).concat(s)}a=r.split("@")[0],o=r.match(/@([^/]*)(\/|$)/)}var c=o[1],l=c.lastIndexOf(":");n.server=c.substring(0,l),n.port=null===(t="".concat(c.substring(l+1)).match(/\d+/))||void 0===t?void 0:t[0];var p=a.match(/(^.*?):(.*$)/);if(n.cipher=p[1],n.password=p[2],-1!==r.indexOf("?plugin=")){var f,_={},d=___createForOfIteratorHelper_70(("plugin="+decodeURIComponent(r.split("?plugin=")[1].split("&")[0])).split(";"));try{for(d.s();!(f=d.n()).done;){var h=___slicedToArray_70(f.value.split("="),2),y=h[0],v=h[1];y&&(_[y]=v||!0)}}catch(m){d.e(m)}finally{d.f()}switch(_.plugin){case"obfs-local":case"simple-obfs":n.plugin="obfs",n["plugin-opts"]={mode:_.obfs,host:(0,_$utils_114.getIfNotBlank)(_["obfs-host"])};break;case"v2ray-plugin":n.plugin="v2ray-plugin",n["plugin-opts"]={mode:"websocket",host:(0,_$utils_114.getIfNotBlank)(_["obfs-host"]),path:(0,_$utils_114.getIfNotBlank)(_.path),tls:(0,_$utils_114.getIfPresent)(_.tls)};break;default:throw new Error("Unsupported plugin option: ".concat(_.plugin))}}return/(&|\?)uot=(1|true)/i.test(s)&&(n["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(s)&&(n.tfo=!0),n}},{name:"URI SSR Parser",test:function(e){return/^ssr:\/\//.test(e)},parse:function(e){var t=(e=_$base64_4.Base64.decode(e.split("ssr://")[1])).indexOf(":origin");-1===t&&(t=e.indexOf(":auth_"));var r=e.substring(0,t),n=r.substring(0,r.lastIndexOf(":")),o=r.substring(r.lastIndexOf(":")+1),a=e.substring(t+1).split("/?")[0].split(":"),s={type:"ssr",server:n,port:o,protocol:a[0],cipher:a[1],obfs:a[2],password:_$base64_4.Base64.decode(a[3])},i={};if((e=e.split("/?")[1].split("&")).length>1){var u,c=___createForOfIteratorHelper_70(e);try{for(c.s();!(u=c.n()).done;){var l=___slicedToArray_70(u.value.split("="),2),p=l[0],f=l[1];(f=f.trim()).length>0&&(i[p]=f)}}catch(_){c.e(_)}finally{c.f()}}return ___objectSpread_70(___objectSpread_70({},s),{},{name:i.remarks?_$base64_4.Base64.decode(i.remarks):s.server,"protocol-param":(0,_$utils_114.getIfNotBlank)(_$base64_4.Base64.decode(i.protoparam||"").replace(/\s/g,"")),"obfs-param":(0,_$utils_114.getIfNotBlank)(_$base64_4.Base64.decode(i.obfsparam||"").replace(/\s/g,""))})}},{name:"URI VMess Parser",test:function(e){return/^vmess:\/\//.test(e)},parse:function(t){t=t.split("vmess://")[1];var r=_$base64_4.Base64.decode(t);if(/=\s*vmess/.test(r)){var n,o=r.split(",").map((function(e){return e.trim()})),a={},s=___createForOfIteratorHelper_70(o);try{for(s.s();!(n=s.n()).done;){var i=n.value;if(-1!==i.indexOf("=")){var u=___slicedToArray_70(i.split("="),2),c=u[0],l=u[1];a[c.trim()]=l.trim()}}}catch(U){s.e(U)}finally{s.f()}var p={name:o[0].split("=")[0].trim(),type:"vmess",server:o[1],port:o[2],cipher:(0,_$utils_114.getIfNotBlank)(o[3],"auto"),uuid:o[4].match(/^"(.*)"$/)[1],tls:"wss"===a.obfs,udp:(0,_$utils_114.getIfPresent)(a["udp-relay"]),tfo:(0,_$utils_114.getIfPresent)(a["fast-open"]),"skip-cert-verify":(0,_$utils_114.isPresent)(a["tls-verification"])?!a["tls-verification"]:void 0};if((0,_$utils_114.isPresent)(a.obfs)){if("ws"!==a.obfs&&"wss"!==a.obfs)throw new Error("Unsupported obfs: ".concat(a.obfs));p.network="ws",p["ws-opts"].path=((0,_$utils_114.getIfNotBlank)(a["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];var f=a["obfs-header"];f&&-1!==f.indexOf("Host")&&(f=f.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),(0,_$utils_114.isNotBlank)(f)&&(p["ws-opts"].headers={Host:f})}return p}var _,d,h,y,v={};try{v=JSON.parse(r)}catch(e){var m=___slicedToArray_70(/(^[^?]+?)\/?\?(.*)$/.exec(t),3),g=(m[0],m[1]),b=m[2];r=_$base64_4.Base64.decode(g);var w,A=___createForOfIteratorHelper_70(b.split("&"));try{for(A.s();!(w=A.n()).done;){var E=___slicedToArray_70(w.value.split("="),2),x=E[0],S=E[1],$=S;-1===($=decodeURIComponent(S)).indexOf(",")?v[x]=$:v[x]=$.split(",")}}catch(U){A.e(U)}finally{A.f()}var C=___slicedToArray_70(/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(r),5),k=(C[0],C[1]),P=C[2],O=C[3],I=C[4];v.scy=k,v.id=P,v.port=I,v.add=O}var R=v.add,j=parseInt((0,_$utils_114.getIfPresent)(v.port),10),T={name:null!==(_=null!==(d=null!==(h=v.ps)&&void 0!==h?h:v.remarks)&&void 0!==d?d:v.remark)&&void 0!==_?_:"VMess ".concat(R,":").concat(j),type:"vmess",server:R,port:j,cipher:(0,_$utils_114.getIfPresent)(v.scy,"auto"),uuid:v.id,alterId:parseInt((0,_$utils_114.getIfPresent)(null!==(y=v.aid)&&void 0!==y?y:v.alterId,0),10),tls:["tls",!0,1,"1"].includes(v.tls),"skip-cert-verify":(0,_$utils_114.isPresent)(v.verify_cert)?!v.verify_cert:void 0};if(T.tls&&T.sni&&(T.sni=v.sni),"ws"===v.net||"websocket"===v.obfs?T.network="ws":["tcp","http"].includes(v.net)||"http"===v.obfs?T.network="http":["grpc"].includes(v.net)&&(T.network="grpc"),T.network){var F,L=null!==(F=v.host)&&void 0!==F?F:v.obfsParam;try{var D=JSON.parse(L),N=null==D?void 0:D.Host;N&&(L=N)}catch(e){}var B=v.path;"http"===T.network&&(L&&(L=Array.isArray(L)?L[0]:L),B&&(B=Array.isArray(B)?B[0]:B)),B||L?["grpc"].includes(T.network)?T["".concat(T.network,"-opts")]={"grpc-service-name":(0,_$utils_114.getIfNotBlank)(B),"_grpc-type":(0,_$utils_114.getIfNotBlank)(v.type)}:T["".concat(T.network,"-opts")]={path:(0,_$utils_114.getIfNotBlank)(B),headers:{Host:(0,_$utils_114.getIfNotBlank)(L)}}:delete T.network,T.tls&&!T.sni&&L&&(T.sni=L)}return T}},{name:"URI VLESS Parser",test:function(e){return/^vless:\/\//.test(e)},parse:function(t){var r,n,o,a;t=t.split("vless://")[1];var s=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);if(!s){var i=___slicedToArray_70(/^(.*?)(\?.*?$)/.exec(t),3),u=(i[0],i[1]),c=i[2];t="".concat(_$base64_4.Base64.decode(u)).concat(c),s=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t),a=!0}var l=___slicedToArray_70(s,7),p=(l[0],l[1]),f=l[2],_=l[3],d=(l[4],l[5]),h=void 0===d?"":d,y=l[6];a&&(p=p.replace(/^.*?:/g,"")),_=parseInt("".concat(_),10),p=decodeURIComponent(p),null!=y&&(y=decodeURIComponent(y));var v,m,g,b,w={type:"vless",name:y,server:f,port:_,uuid:p},A={},E=___createForOfIteratorHelper_70(h.split("&"));try{for(E.s();!(v=E.n()).done;){var x,S=___slicedToArray_70(v.value.split("="),2),$=S[0],C=S[1];x=decodeURIComponent(C),A[$]=x}}catch(D){E.e(D)}finally{E.f()}if(w.name=null!==(r=null!==(n=null!==(o=y)&&void 0!==o?o:A.remarks)&&void 0!==n?n:A.remark)&&void 0!==r?r:"VLESS ".concat(f,":").concat(_),w.tls=A.security&&"none"!==A.security,a&&/TRUE|1/i.test(A.tls)&&(w.tls=!0,A.security=null!==(m=A.security)&&void 0!==m?m:"reality"),w.sni=A.sni||A.peer,w.flow=A.flow,!w.flow&&a&&A.xtls){var k=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][A.xtls];k&&(w.flow=k)}if(w["client-fingerprint"]=A.fp,w.alpn=A.alpn?A.alpn.split(","):void 0,w["skip-cert-verify"]=/(TRUE)|1/i.test(A.allowInsecure),["reality"].includes(A.security)){var P={};A.pbk&&(P["public-key"]=A.pbk),A.sid&&(P["short-id"]=A.sid),Object.keys(P).length>0&&(w["".concat(A.security,"-opts")]=P)}if(w.network=A.type,"tcp"===w.network&&"http"===A.headerType&&(w.network="http"),!w.network&&a&&A.obfs&&(w.network=A.obfs),["websocket"].includes(w.network)&&(w.network="ws"),w.network&&!["tcp","none"].includes(w.network)){var O,I={},R=null!==(O=A.host)&&void 0!==O?O:A.obfsParam;if(R)if(A.obfsParam)try{var j=JSON.parse(R);I.headers=j}catch(e){I.headers={Host:R}}else I.headers={Host:R};A.serviceName?I["".concat(w.network,"-service-name")]=A.serviceName:a&&A.path&&(["ws","http","h2"].includes(w.network)||(I["".concat(w.network,"-service-name")]=A.path,delete A.path)),A.path&&(I.path=A.path),["grpc"].includes(w.network)&&(I["_grpc-type"]=A.mode||"gun"),Object.keys(I).length>0&&(w["".concat(w.network,"-opts")]=I)}if(w.tls&&!w.sni)if("ws"===w.network)w.sni=null===(g=w["ws-opts"])||void 0===g||null===(b=g.headers)||void 0===b?void 0:b.Host;else if("http"===w.network){var T,F,L=null===(T=w["http-opts"])||void 0===T||null===(F=T.headers)||void 0===F?void 0:F.Host;w.sni=Array.isArray(L)?L[0]:L}return w}},{name:"URI TUIC Parser",test:function(e){return/^tuic:\/\//.test(e)},parse:function(e){var t;e=e.split(/tuic:\/\//)[1];var r=___slicedToArray_70(/^(.*?):(.*?)@(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),9),n=(r[0],r[1]),o=r[2],a=r[3],s=(r[4],r[5]),i=(r[6],r[7]),u=void 0===i?"":i,c=r[8];s=parseInt("".concat(s),10),isNaN(s)&&(s=443),o=decodeURIComponent(o),null!=c&&(c=decodeURIComponent(c));var l,p={type:"tuic",name:c=null!==(t=c)&&void 0!==t?t:"TUIC ".concat(a,":").concat(s),server:a,port:s,password:o,uuid:n},f=___createForOfIteratorHelper_70(u.split("&"));try{for(f.s();!(l=f.n()).done;){var _=___slicedToArray_70(l.value.split("="),2),d=_[0],h=_[1];d=d.replace(/_/,"-"),h=decodeURIComponent(h),["alpn"].includes(d)?p[d]=h?h.split(","):void 0:["allow-insecure"].includes(d)?p["skip-cert-verify"]=/(TRUE)|1/i.test(h):["disable-sni","reduce-rtt"].includes(d)?p[d]=/(TRUE)|1/i.test(h):p[d]=h}}catch(y){f.e(y)}finally{f.f()}return p}},{name:"URI WireGuard Parser",test:function(e){return/^(wireguard|wg):\/\//.test(e)},parse:function(e){var t;e=e.split(/(wireguard|wg):\/\//)[2];var r=___slicedToArray_70(/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),9),n=(r[0],r[1],r[2]),o=r[3],a=(r[4],r[5]),s=(r[6],r[7]),i=void 0===s?"":s,u=r[8];a=parseInt("".concat(a),10),isNaN(a)&&(a=51820),n=decodeURIComponent(n),null!=u&&(u=decodeURIComponent(u));var c,l={type:"wireguard",name:u=null!==(t=u)&&void 0!==t?t:"WireGuard ".concat(o,":").concat(a),server:o,port:a,"private-key":n,udp:!0},p=___createForOfIteratorHelper_70(i.split("&"));try{for(p.s();!(c=p.n()).done;){var f=___slicedToArray_70(c.value.split("="),2),_=f[0],d=f[1];if(_=_.replace(/_/,"-"),d=decodeURIComponent(d),["reserved"].includes(_)){var h=d.split(",").map((function(e){return parseInt(e.trim(),10)})).filter((function(e){return Number.isInteger(e)}));3===h.length&&(l[_]=h)}else if(["address","ip"].includes(_))d.split(",").map((function(e){var t=e.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");(0,_$utils_114.isIPv4)(t)?l.ip=t:(0,_$utils_114.isIPv6)(t)&&(l.ipv6=t)}));else if(["mtu"].includes(_)){var y=parseInt(d.trim(),10);Number.isInteger(y)&&(l[_]=y)}else/publickey/i.test(_)?l["public-key"]=d:/privatekey/i.test(_)?l["private-key"]=d:["udp"].includes(_)?l[_]=/(TRUE)|1/i.test(d):["flag"].includes(_)||(l[_]=d)}}catch(v){p.e(v)}finally{p.f()}return l}},{name:"URI Hysteria Parser",test:function(e){return/^(hysteria|hy):\/\//.test(e)},parse:function(e){var t;e=e.split(/(hysteria|hy):\/\//)[2];var r=___slicedToArray_70(/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),7),n=(r[0],r[1]),o=(r[2],r[3]),a=(r[4],r[5]),s=void 0===a?"":a,i=r[6];o=parseInt("".concat(o),10),isNaN(o)&&(o=443),null!=i&&(i=decodeURIComponent(i));var u,c={type:"hysteria",name:i=null!==(t=i)&&void 0!==t?t:"Hysteria ".concat(n,":").concat(o),server:n,port:o},l={},p=___createForOfIteratorHelper_70(s.split("&"));try{for(p.s();!(u=p.n()).done;){var f=___slicedToArray_70(u.value.split("="),2),_=f[0],d=f[1];_=_.replace(/_/,"-"),d=decodeURIComponent(d),["alpn"].includes(_)?c[_]=d?d.split(","):void 0:["insecure"].includes(_)?c["skip-cert-verify"]=/(TRUE)|1/i.test(d):["auth"].includes(_)?c["auth-str"]=d:["mport"].includes(_)?c.ports=d:["obfsParam"].includes(_)?c.obfs=d:["upmbps"].includes(_)?c.up=d:["downmbps"].includes(_)?c.down=d:["obfs"].includes(_)?c._obfs=d||"":["fast-open","peer"].includes(_)?l[_]=d:c[_]=d}}catch(h){p.e(h)}finally{p.f()}return!c.sni&&l.peer&&(c.sni=l.peer),!c["fast-open"]&&l.fastopen&&(c["fast-open"]=!0),c.protocol||(c.protocol="udp"),c}},{name:"URI Hysteria2 Parser",test:function(e){return/^(hysteria2|hy2):\/\//.test(e)},parse:function(e){var t;e=e.split(/(hysteria2|hy2):\/\//)[2];var r=___slicedToArray_70(/^(.*?)@(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),8),n=(r[0],r[1]),o=r[2],a=(r[3],r[4]),s=(r[5],r[6]),i=void 0===s?"":s,u=r[7];a=parseInt("".concat(a),10),isNaN(a)&&(a=443),n=decodeURIComponent(n),null!=u&&(u=decodeURIComponent(u));var c,l={type:"hysteria2",name:u=null!==(t=u)&&void 0!==t?t:"Hysteria2 ".concat(o,":").concat(a),server:o,port:a,password:n},p={},f=___createForOfIteratorHelper_70(i.split("&"));try{for(f.s();!(c=f.n()).done;){var _,d=___slicedToArray_70(c.value.split("="),2),h=d[0],y=d[1];_=decodeURIComponent(y),p[h]=_}}catch(v){f.e(v)}finally{f.f()}return l.sni=p.sni,!l.sni&&p.peer&&(l.sni=p.peer),p.obfs&&"none"!==p.obfs&&(l.obfs=p.obfs),l.ports=p.mport,l["obfs-password"]=p["obfs-password"],l["skip-cert-verify"]=/(TRUE)|1/i.test(p.insecure),l.tfo=/(TRUE)|1/i.test(p.fastopen),l["tls-fingerprint"]=p.pinSHA256,l}},{name:"URI Trojan Parser",test:function(e){return/^trojan:\/\//.test(e)},parse:function(t){var r=___slicedToArray_70(t.split(/#(.+)/,2),2),n=r[0],o=r[1],a=(0,_trojanUri.default)().parse(n);if((0,_$utils_114.isNotBlank)(o))try{a.name=decodeURIComponent(o)}catch(e){console.log(e)}return a}},{name:"Clash Parser",test:function(t){try{JSON.parse(t)}catch(e){return!1}return!0},parse:function(e){var t,r,n=JSON.parse(e);if(!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh"].includes(n.type))throw new Error("Clash does not support proxy with type: ".concat(n.type));if(["vmess","vless"].includes(n.type)&&(n.sni=n.servername,delete n.servername,n.tls&&!n.sni))if("ws"===n.network)n.sni=null===(t=n["ws-opts"])||void 0===t||null===(r=t.headers)||void 0===r?void 0:r.Host;else if("http"===n.network){var o,a,s=null===(o=n["http-opts"])||void 0===o||null===(a=o.headers)||void 0===a?void 0:a.Host;n.sni=Array.isArray(s)?s[0]:s}return n.fingerprint&&(n["tls-fingerprint"]=n.fingerprint),n["dialer-proxy"]&&(n["underlying-proxy"]=n["dialer-proxy"]),n["benchmark-url"]&&(n["test-url"]=n["benchmark-url"]),n["benchmark-timeout"]&&(n["test-timeout"]=n["benchmark-timeout"]),n}},{name:"Surge SSH Parser",test:function(e){return/^.*=\s*ssh/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge SS Parser",test:function(e){return/^.*=\s*ss/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge VMess Parser",test:function(e){return/^.*=\s*vmess/.test(e.split(",")[0])&&-1!==e.indexOf("username")},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge Trojan Parser",test:function(e){return/^.*=\s*trojan/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge HTTP Parser",test:function(e){return/^.*=\s*https?/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge Snell Parser",test:function(e){return/^.*=\s*snell/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge Tuic Parser",test:function(e){return/^.*=\s*tuic(-v5)?/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge WireGuard Parser",test:function(e){return/^.*=\s*wireguard/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge Hysteria2 Parser",test:function(e){return/^.*=\s*hysteria2/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge Socks5 Parser",test:function(e){return/^.*=\s*socks5(-tls)?/.test(e.split(",")[0])},parse:function(e){return(0,___surge_70.default)().parse(e)}},{name:"Surge External Parser",test:function(e){return/^.*=\s*external/.test(e.split(",")[0])},parse:function(e){var t,r,n,o=___slicedToArray_70(/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(e),3),a=(o[0],o[1]),s=o[2],i=null===(t=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(e=s))||void 0===t?void 0:t[2];i||(i=null===(n=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(e))||void 0===n?void 0:n[2]);var u,c=null===(r=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(e))||void 0===r?void 0:r[2];c||(c=null===(u=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(e))||void 0===u?void 0:u[2]);for(var l,p=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,f=[];null!==(l=p.exec(e));)null!=l[3]?f.push(l[3]):null!=l[4]&&f.push(l[4]);for(var _,d=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,h=[];null!==(_=d.exec(e));){var y=void 0;null!=_[3]?y=_[3]:null!=_[4]&&(y=_[4]),null!=y&&(y="".concat(y).trim().replace(/^\[/,"").replace(/\]$/,"")),__isIP_70(y)&&h.push(y)}return{type:"external",name:a,exec:i,"local-port":c,args:f,addresses:h}}},{name:"Loon SS Parser",test:function(e){return"shadowsocks"===e.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon SSR Parser",test:function(e){return"shadowsocksr"===e.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon VMess Parser",test:function(e){return/^.*=\s*vmess/i.test(e.split(",")[0])&&-1===e.indexOf("username")},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon Vless Parser",test:function(e){return/^.*=\s*vless/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon Hysteria2 Parser",test:function(e){return/^.*=\s*Hysteria2/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon Trojan Parser",test:function(e){return/^.*=\s*trojan/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon HTTP Parser",test:function(e){return/^.*=\s*http/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon SOCKS5 Parser",test:function(e){return/^.*=\s*socks5/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_70.default)().parse(e)}},{name:"Loon WireGuard Parser",test:function(e){return/^.*=\s*wireguard/i.test(e.split(",")[0])},parse:function(e){var t,r,n,o,a,s,i,u,c,l,p,f,_,d,h=null===(t=e.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i))||void 0===t?void 0:t[1],y=null===(r=(e=e.replace(h,"").replace(/^\s*?=\s*?wireguard\s*/i,"")).match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i))||void 0===r?void 0:r[1],v=y.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),m=null==v?void 0:v[2],g=parseInt(null==v?void 0:v[3],10),b=null===(n=e.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i))||void 0===n?void 0:n[2];b&&(b=parseInt(b,10));var w=null===(o=e.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i))||void 0===o?void 0:o[2];w&&(w=parseInt(w,10));var A,E=null===(a=y.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i))||void 0===a?void 0:a[2];E&&(E=JSON.parse(E));var x=null===(s=e.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===s?void 0:s[2],S=null===(i=e.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===i?void 0:i[2];(x||S)&&(A=[],x&&A.push(x),S&&A.push(S));var $=null===(u=y.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i))||void 0===u||null===(c=u[2])||void 0===c?void 0:c.split(",").map((function(e){return e.trim()})),C=null===(l=y.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===l?void 0:l[2],k=null===(p=e.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===p?void 0:p[2],P=null===(f=e.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===f?void 0:f[2],O=null===(_=y.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===_?void 0:_[2],I={type:"wireguard",name:h,server:m,port:g,ip:k,ipv6:P,"private-key":null===(d=e.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===d?void 0:d[2],"public-key":O,mtu:b,keepalive:w,reserved:E,"allowed-ips":$,"preshared-key":C,dns:A,udp:!0,peers:[{server:m,port:g,ip:k,ipv6:P,"public-key":O,"pre-shared-key":C,"allowed-ips":$,reserved:E}]};return Array.isArray(I.dns)&&I.dns.length>0&&(I["remote-dns-resolve"]=!0),I}},{name:"QX SS Parser",test:function(e){return/^shadowsocks\s*=/.test(e.split(",")[0].trim())&&-1===e.indexOf("ssr-protocol")},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX SSR Parser",test:function(e){return/^shadowsocks\s*=/.test(e.split(",")[0].trim())&&-1!==e.indexOf("ssr-protocol")},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX VMess Parser",test:function(e){return/^vmess\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX VLESS Parser",test:function(e){return/^vless\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX Trojan Parser",test:function(e){return/^trojan\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX HTTP Parser",test:function(e){return/^http\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_70.default)().parse(e)}},{name:"QX Socks5 Parser",test:function(e){return/^socks5\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_70.default)().parse(e)}}];_$parsers_70.default=___default_70;var _$preprocessors_93={};Object.defineProperty(_$preprocessors_93,"__esModule",{value:!0}),_$preprocessors_93.default=void 0;var ___default_93=[{name:"HTML",test:function(e){return/^<!DOCTYPE html>/.test(e)},parse:function(){return""}},{name:"Clash Provider",test:function(e){return/^payload:/gm.exec(e).index>=0},parse:function(e){return e.replace("payload:","").replace(/^\s*-\s*/gm,"")}}];_$preprocessors_93.default=___default_93;var _$producers_94={};Object.defineProperty(_$producers_94,"__esModule",{value:!0}),_$producers_94.default=void 0;var __obj_94,___yaml_94=(__obj_94=_$yaml_119)&&__obj_94.__esModule?__obj_94:{default:__obj_94},___default_94={QX:{type:"SINGLE",func:function(e){return-1!==["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(e.type)?null:"".concat({"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[e.type]||e.type,",").concat(e.content,",SUB-STORE")}},Surge:{type:"SINGLE",func:function(e){if(-1!==["GEOSITE","GEOIP"].indexOf(e.type))return null;var t,r="".concat(e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6"].includes(e.type)&&(r+=(null===(t=e.options)||void 0===t?void 0:t.length)>0?",".concat(e.options.join(",")):""),r}},Loon:{type:"SINGLE",func:function(e){return-1!==["SRC-IP","GEOSITE","GEOIP"].indexOf(e.type)?null:(["IP-CIDR","IP-CIDR6"].includes(e.type)&&e.options&&(e.options=e.options.filter((function(e){return["no-resolve"].includes(e)}))),function(e){if(-1!==["GEOSITE","GEOIP"].indexOf(e.type))return null;var t,r="".concat(e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6"].includes(e.type)&&(r+=(null===(t=e.options)||void 0===t?void 0:t.length)>0?",".concat(e.options.join(",")):""),r}(e))}},Clash:{type:"ALL",func:function(e){var t={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},r={payload:e.map((function(e){var r,n="".concat(t[e.type]||e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6","GEOIP"].includes(e.type)&&(e.options&&(e.options=e.options.filter((function(e){return["no-resolve"].includes(e)}))),n+=(null===(r=e.options)||void 0===r?void 0:r.length)>0?",".concat(e.options.join(",")):""),n}))};return ___yaml_94.default.dump(r)}}};_$producers_94.default=___default_94;var _$parsers_92={};function ___createForOfIteratorHelper_92(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_92(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_92(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_92(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(_$parsers_92,"__esModule",{value:!0}),_$parsers_92.default=void 0;var RULE_TYPES_MAPPING=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]],___default_92=[{name:"Universal Rule Parser",test:function(){return!0},parse:function(t){var r,n=[],o=___createForOfIteratorHelper_92(t.split("\n"));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(0!==(a=a.trim()).length&&!/\s*#/.test(a))try{var s,i=a.split(",").map((function(e){return e.trim()})),u=i[0],c=!1,l=___createForOfIteratorHelper_92(RULE_TYPES_MAPPING);try{for(l.s();!(s=l.n()).done;){var p=s.value;if(p[0].test(u)){c=!0;var f={type:p[1],content:i[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(f.type)&&(f.options=i.slice(2)),n.push(f)}}}catch(_){l.e(_)}finally{l.f()}if(!c)throw new Error("Invalid rule type: "+u)}catch(e){console.log("Failed to parse line: ".concat(a,"\n Reason: ").concat(e))}}}catch(_){o.e(_)}finally{o.f()}return n}}];_$parsers_92.default=___default_92;var _$ruleUtils_91={};Object.defineProperty(_$ruleUtils_91,"__esModule",{value:!0}),_$ruleUtils_91.RuleUtils=void 0;var _preprocessors=___interopRequireDefault_91(_$preprocessors_93),_producers=___interopRequireDefault_91(_$producers_94),_parsers=___interopRequireDefault_91(_$parsers_92),___app_91=___interopRequireDefault_91(_$app_68);function ___interopRequireDefault_91(e){return e&&e.__esModule?e:{default:e}}function ___createForOfIteratorHelper_91(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_91(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_91(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function ___arrayLikeToArray_91(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RuleUtils={parse:function(t){t=function(t){var r,n=___createForOfIteratorHelper_91(_preprocessors.default);try{for(n.s();!(r=n.n()).done;){var o=r.value;try{if(o.test(t))return ___app_91.default.info("Pre-processor [".concat(o.name,"] activated")),o.parse(t)}catch(e){___app_91.default.error("Parser [".concat(o.name,"] failed\n Reason: ").concat(e))}}}catch(a){n.e(a)}finally{n.f()}return t}(t);var r,n=___createForOfIteratorHelper_91(_parsers.default);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=void 0;try{a=o.test(t)}catch(s){a=!1}if(a)return ___app_91.default.info("Rule parser [".concat(o.name,"] is activated!")),o.parse(t)}}catch(s){n.e(s)}finally{n.f()}},produce:function(e,t){var r=_producers.default[t];if(!r)throw new Error("Target platform: ".concat(t," is not supported!"));return void 0===r.type||"SINGLE"===r.type?e.map((function(e){try{return r.func(e)}catch(t){return console.log("ERROR: cannot produce rule: ".concat(JSON.stringify(e),"\nReason: ").concat(t)),""}})).filter((function(e){return e.length>0})).join("\n"):"ALL"===r.type?r.func(e):void 0}};_$ruleUtils_91.RuleUtils=RuleUtils;var _$file_99={};function ___typeof_99(e){return(___typeof_99="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$file_99,"__esModule",{value:!0}),_$file_99.default=function(e){___app_99.default.read(_$constants_67.FILES_KEY)||___app_99.default.write([],_$constants_67.FILES_KEY),e.route("/api/file/:name").get(getFile).patch(updateFile).delete(deleteFile),e.route("/api/wholeFile/:name").get(getWholeFile),e.route("/api/files").get(getAllFiles).post(createFile).put(replaceFile),e.route("/api/wholeFiles").get(getAllWholeFiles)};var __obj_99,___app_99=(__obj_99=_$app_68)&&__obj_99.__esModule?__obj_99:{default:__obj_99},___sync_99=_$sync_106({}),_excluded=["content"];function ___regeneratorRuntime_99(){___regeneratorRuntime_99=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch($){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===l)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch($){return{type:"throw",arg:$}}}e.wrap=u;var l={};function p(){}function f(){}function _(){}var d={};i(d,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&r.call(y,o)&&(d=y);var v=_.prototype=p.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function s(){return new t((function(n,s){!function n(o,a,s,i){var u=c(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_99(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}(o,a,n,s)}))}return n=n?n.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=_,i(v,"constructor",_),i(_,"constructor",f),f.displayName=i(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(v),i(v,s,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function __ownKeys_99(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_99(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_99(Object(r),!0).forEach((function(t){___defineProperty_99(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_99(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_99(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function __asyncGeneratorStep_99(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function createFile(e,t){var r,n=e.body;n.name="".concat(null!==(r=n.name)&&void 0!==r?r:Date.now()),___app_99.default.info("\u6b63\u5728\u521b\u5efa\u6587\u4ef6\uff1a".concat(n.name));var o=___app_99.default.read(_$constants_67.FILES_KEY);if((0,_$database_107.findByName)(o,n.name))return(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY",e.body.name?"\u5df2\u5b58\u5728 name \u4e3a ".concat(n.name," \u7684\u6587\u4ef6"):"\u65e0\u6cd5\u540c\u65f6\u521b\u5efa\u76f8\u540c\u7684\u6587\u4ef6 \u53ef\u7a0d\u540e\u91cd\u8bd5"));o.push(n),___app_99.default.write(o,_$constants_67.FILES_KEY),(0,_$response_102.success)(t,n,201)}function getFile(e,t){return _getFile.apply(this,arguments)}function _getFile(){var e;return e=___regeneratorRuntime_99().mark((function e(t,r){var n,o,a,s,i,u,c,l,p,f,_,d;return ___regeneratorRuntime_99().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.name,n=decodeURIComponent(n),___app_99.default.info("\u6b63\u5728\u4e0b\u8f7d\u6587\u4ef6\uff1a".concat(n)),o=t.query,a=o.url,s=o.ua,i=o.content,u=o.mergeSources,c=o.ignoreFailedRemoteFile,a&&(a=decodeURIComponent(a),___app_99.default.info("\u6307\u5b9a\u8fdc\u7a0b\u6587\u4ef6 URL: ".concat(a))),s&&(s=decodeURIComponent(s),___app_99.default.info("\u6307\u5b9a\u8fdc\u7a0b\u6587\u4ef6 User-Agent: ".concat(s))),i&&(i=decodeURIComponent(i),___app_99.default.info("\u6307\u5b9a\u672c\u5730\u6587\u4ef6: ".concat(i))),u&&(u=decodeURIComponent(u),___app_99.default.info("\u6307\u5b9a\u5408\u5e76\u6765\u6e90: ".concat(u))),null!=c&&""!==c&&(c=decodeURIComponent(c),___app_99.default.info("\u6307\u5b9a\u5ffd\u7565\u5931\u8d25\u7684\u8fdc\u7a0b\u6587\u4ef6: ".concat(c))),l=___app_99.default.read(_$constants_67.FILES_KEY),!(0,_$database_107.findByName)(l,n)){e.next=26;break}return e.prev=12,e.next=15,(0,___sync_99.produceArtifact)({type:"file",name:n,url:a,ua:s,content:i,mergeSources:u,ignoreFailedRemoteFile:c});case 15:p=e.sent,r.set("Content-Type","text/plain; charset=utf-8").send(null!=p?p:""),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(12),___app_99.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u6587\u4ef6\u5931\u8d25","\u274c \u65e0\u6cd5\u4e0b\u8f7d\u6587\u4ef6\uff1a".concat(n,"\uff01"),"\ud83e\udd14 \u539f\u56e0\uff1a".concat(null!==(f=e.t0.message)&&void 0!==f?f:e.t0)),___app_99.default.error(null!==(_=e.t0.message)&&void 0!==_?_:e.t0),(0,_$response_102.failed)(r,new _$errors_98.InternalServerError("INTERNAL_SERVER_ERROR","Failed to download file: ".concat(n),"Reason: ".concat(null!==(d=e.t0.message)&&void 0!==d?d:e.t0)));case 24:e.next=28;break;case 26:___app_99.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u6587\u4ef6\u5931\u8d25","\u274c \u672a\u627e\u5230\u6587\u4ef6\uff1a".concat(n,"\uff01")),(0,_$response_102.failed)(r,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","File ".concat(n," does not exist!")),404);case 28:case"end":return e.stop()}}),e,null,[[12,19]])})),(_getFile=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){__asyncGeneratorStep_99(a,n,o,s,i,"next",e)}function i(e){__asyncGeneratorStep_99(a,n,o,s,i,"throw",e)}s(void 0)}))}).apply(this,arguments)}function getWholeFile(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=___app_99.default.read(_$constants_67.FILES_KEY),o=(0,_$database_107.findByName)(n,r);o?(0,_$response_102.success)(t,o):(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("FILE_NOT_FOUND","File ".concat(r," does not exist"),404))}function updateFile(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=e.body,o=___app_99.default.read(_$constants_67.FILES_KEY),a=(0,_$database_107.findByName)(o,r);if(a){var s=___objectSpread_99(___objectSpread_99({},a),n);___app_99.default.info("\u6b63\u5728\u66f4\u65b0\u6587\u4ef6\uff1a".concat(r,"...")),(0,_$database_107.updateByName)(o,r,s),___app_99.default.write(o,_$constants_67.FILES_KEY),(0,_$response_102.success)(t,s)}else(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","File ".concat(r," does not exist!")),404)}function deleteFile(e,t){var r=e.params.name;r=decodeURIComponent(r),___app_99.default.info("\u6b63\u5728\u5220\u9664\u6587\u4ef6\uff1a".concat(r));var n=___app_99.default.read(_$constants_67.FILES_KEY);(0,_$database_107.deleteByName)(n,r),___app_99.default.write(n,_$constants_67.FILES_KEY),(0,_$response_102.success)(t)}function getAllFiles(e,t){var r=___app_99.default.read(_$constants_67.FILES_KEY);(0,_$response_102.success)(t,r.map((function(e){return e.content,_objectWithoutProperties(e,_excluded)})))}function getAllWholeFiles(e,t){var r=___app_99.default.read(_$constants_67.FILES_KEY);(0,_$response_102.success)(t,r)}function replaceFile(e,t){var r=e.body;___app_99.default.write(r,_$constants_67.FILES_KEY),(0,_$response_102.success)(t)}var _$module_101={};Object.defineProperty(_$module_101,"__esModule",{value:!0}),_$module_101.default=function(e){___app_101.default.read(_$constants_67.MODULES_KEY)||___app_101.default.write([],_$constants_67.MODULES_KEY),e.route("/api/module/:name").get(getModule).patch(updateModule).delete(deleteModule),e.route("/api/modules").get(getAllModules).post(createModule).put(replaceModule)};var __obj_101,___app_101=(__obj_101=_$app_68)&&__obj_101.__esModule?__obj_101:{default:__obj_101},___excluded_101=["content"];function ___objectWithoutProperties_101(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function __ownKeys_101(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_101(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_101(Object(r),!0).forEach((function(t){___defineProperty_101(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_101(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_101(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function createModule(e,t){var r,n=e.body;n.name="".concat(null!==(r=n.name)&&void 0!==r?r:(0,_$md5_121.hex_md5)(JSON.stringify(n))),___app_101.default.info("\u6b63\u5728\u521b\u5efa\u6a21\u5757\uff1a".concat(n.name));var o=___app_101.default.read(_$constants_67.MODULES_KEY);if((0,_$database_107.findByName)(o,n.name))return(0,_$response_102.failed)(t,new _$errors_98.RequestInvalidError("DUPLICATE_KEY",e.body.name?"\u5df2\u5b58\u5728 name \u4e3a ".concat(n.name," \u7684\u6a21\u5757"):"\u5df2\u5b58\u5728\u76f8\u540c\u7684\u6a21\u5757 \u8bf7\u52ff\u91cd\u590d\u6dfb\u52a0"));o.push(n),___app_101.default.write(o,_$constants_67.MODULES_KEY),(0,_$response_102.success)(t,n,201)}function getModule(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=___app_101.default.read(_$constants_67.MODULES_KEY),o=(0,_$database_107.findByName)(n,r);o?t.set("Content-Type","text/plain; charset=utf-8").send(o.content):(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("MODULE_NOT_FOUND","Module ".concat(r," does not exist"),404))}function updateModule(e,t){var r=e.params.name;r=decodeURIComponent(r);var n=e.body,o=___app_101.default.read(_$constants_67.MODULES_KEY),a=(0,_$database_107.findByName)(o,r);if(a){var s=___objectSpread_101(___objectSpread_101({},a),n);___app_101.default.info("\u6b63\u5728\u66f4\u65b0\u6a21\u5757\uff1a".concat(r,"...")),(0,_$database_107.updateByName)(o,r,s),___app_101.default.write(o,_$constants_67.MODULES_KEY),(0,_$response_102.success)(t,s)}else(0,_$response_102.failed)(t,new _$errors_98.ResourceNotFoundError("RESOURCE_NOT_FOUND","Module ".concat(r," does not exist!")),404)}function deleteModule(e,t){var r=e.params.name;r=decodeURIComponent(r),___app_101.default.info("\u6b63\u5728\u5220\u9664\u6a21\u5757\uff1a".concat(r));var n=___app_101.default.read(_$constants_67.MODULES_KEY);(0,_$database_107.deleteByName)(n,r),___app_101.default.write(n,_$constants_67.MODULES_KEY),(0,_$response_102.success)(t)}function getAllModules(e,t){var r=___app_101.default.read(_$constants_67.MODULES_KEY);(0,_$response_102.success)(t,r.map((function(e){return e.content,___objectWithoutProperties_101(e,___excluded_101)})))}function replaceModule(e,t){var r=e.body;___app_101.default.write(r,_$constants_67.MODULES_KEY),(0,_$response_102.success)(t)}var _$subStore0_95={},$app,___migration_95=___interopRequireDefault_95(_$migration_116),_express=___interopRequireDefault_95(_$express_120),___app_95=___interopRequireDefault_95(_$app_68),_collections=___interopRequireDefault_95(_$collections_97),_subscriptions=___interopRequireDefault_95(_$subscriptions_105),___artifacts_95=___interopRequireDefault_95(_$artifacts_96),___settings_95=___interopRequireDefault_95(_$settings_103),_miscs=___interopRequireDefault_95(_$miscs_100),_sort=___interopRequireDefault_95(_$sort_104),_file=___interopRequireDefault_95(_$file_99),_module=___interopRequireDefault_95(_$module_101);function ___interopRequireDefault_95(e){return e&&e.__esModule?e:{default:e}}console.log("\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n     Sub-Store -- v".concat(_$package_66.version,"\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n")),(0,___migration_95.default)(),$app=(0,_express.default)({substore:___app_95.default}),(0,_collections.default)($app),(0,_subscriptions.default)($app),(0,_file.default)($app),(0,_module.default)($app),(0,___artifacts_95.default)($app),(0,___settings_95.default)($app),(0,_sort.default)($app),(0,_miscs.default)($app),$app.start()}();
